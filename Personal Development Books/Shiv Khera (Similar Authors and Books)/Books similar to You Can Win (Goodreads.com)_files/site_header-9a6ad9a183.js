!function e(t,r,s){function o(a,i){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!i&&l)return l(a,!0);if(n)return n(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return o(r?r:e)},d,d.exports,e,t,r,s)}return r[a].exports}for(var n="function"==typeof require&&require,a=0;a<s.length;a++)o(s[a]);return o}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ShelvedBookOrigin={BROWSE_SPOTLIGHT:"browse_spotlight",RECS_WIDGET:"recs_widget"}},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.URLTrackingParams={FROM_SEARCH_PARAM:"from_search=true",BOOK_SHOW_INTERACTION_PARAM:"ac=1",DISCUSSIONS_PANE_ALL_DISCUSSIONS:"nav_bar_discussions_pane_all_discussions",DISCUSSIONS_PANE_GROUP:"nav_bar_discussions_pane_group",DISCUSSIONS_PANE_GROUP_ALL_UNREAD_POSTS:"nav_bar_discussions_pane_group_all_unread_posts",DISCUSSIONS_PANE_DISCUSSION:"nav_bar_discussions_pane_discussion",DISCUSSIONS_PANE_SPARSE_READING_CHALLENGES:"nav_bar_discussions_sparse_reading_challenge",DISCUSSIONS_PANE_SPARSE_ALL:"nav_bar_discussions_sparse_all",DISCUSSIONS_PANE_SPARSE_POPULAR:"nav_bar_discussions_sparse_popular"}},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.TRACKED_CLASSES={book_image:{dfp:!0,pmet:{click_type:"book_image"}},book_title:{dfp:!0,pmet:{click_type:"book_title"}},author_link:{dfp:!0,pmet:{click_type:"author_name"}},full_content_link:{dfp:!0,pmet:{click_type:"body_click"}},user_profile:{dfp:!0,pmet:{click_type:"social"}},want_to_read_button:{dfp:!0,pmet:{click_type:"wtr_button"}},sponsored_update_body_image:{dfp:!0,pmet:{click_type:"image"}},cta_link:{dfp:!0,pmet:{click_type:"cta_click"}},sponsored_footer_actions:{dfp:!0,pmet:{click_type:"sponsored"}},newsfeed_caret_not_interested:{dfp:!1,pmet:{click_type:"not_interested"}},newsfeed_caret_help:{dfp:!1,pmet:{click_type:"why"}},newsfeed_caret:{dfp:!1,pmet:{click_type:"caret"}},user_rating_star:{dfp:!0,pmet:{click_type:"rating"}},preview_book:{dfp:!0,pmet:{click_type:"preview"}},sponsored_update_body_title_link:{dfp:!0,pmet:{click_type:"sponsored_title"}}},r.TRACKED_CLASSES_AUDIBLE={AEP_Desktop_Browse_Image:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_Image"}},AEP_Desktop_Browse_Title:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_Title"}},AEP_Desktop_Browse_ExploreButton:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_ExploreButton"}},AEP_Desktop_Browse_SponsoredBy:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_SponsoredBy"}},AEP_Desktop_Video_ExternalLink:{pmet:{pmet_click_tid:"AEP_Desktop_Video_ExternalLink",no_redirect:!0}},AEP_Desktop_Sponsored_BookImage:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookImage",no_redirect:!0}},AEP_Desktop_Sponsored_BookTitle:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookTitle",no_redirect:!0}},AEP_Desktop_Sponsored_AuthorLink:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_AuthorLink",no_redirect:!0}},AEP_Desktop_Sponsored_WantToRead:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_WantToRead",no_redirect:!0}},AEP_Desktop_Sponsored_Stars:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_Stars",no_redirect:!0}},AEP_Desktop_Sponsored_BookDescription:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookDescription",no_redirect:!0}},AEP_Desktop_Sponsored_BookExternalLink:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookExternalLink",no_redirect:!0}},AEP_Desktop_Carousel_BookImage:{pmet:{pmet_click_tid:"AEP_Desktop_Carousel_BookImage",no_redirect:!0}},AEP_Desktop_Carousel_WantToRead:{pmet:{pmet_click_tid:"AEP_Desktop_Carousel_WantToRead",no_redirect:!0}},AEP_Mobile_Carousel_BookImage:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_BookImage",no_redirect:!0}},AEP_Mobile_Carousel_WantToRead:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_WantToRead",no_redirect:!0}},AEP_Mobile_Carousel_BookTitle:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_BookTitle",no_redirect:!0}},AEP_Mobile_Carousel_Author:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_Author",no_redirect:!0}}}},{}],4:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){c(e,t),u["default"].hasRequestedCreativeForSlot(e)})}function n(e,t,r){window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){var s=window.googletag,o=s.defineSlot(t,d[r],e);o.addService(s.pubads())})}function a(){window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){var e=window.googletag;e.enableServices()})}Object.defineProperty(r,"__esModule",{value:!0}),r.requestCreativeForAdSlot=o,r.defineSlot=n,r.enableServices=a;var i=e("../../react_stores/google_ads_store"),l=e("../../react_actions/google_ads_actions"),u=s(l),d={"300x250":[300,250],"970x66":[970,66],"160x600":[160,600],"300x140":[300,140],"728x90":[728,90],"625x210":[625,210],"640x480":[640,480],"300x225":[300,225],"300x175":[300,175],"320x50":[320,50],"400x300":[400,300]},c=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=window.googletag;r.pubads().addEventListener("slotRenderEnded",function(r){if(r.slot.getSlotId().getDomId()==e)if(r.isEmpty)u["default"].removeAdSlot(e),u["default"].trackImpression(e,i.ImpressionCode.empty);else{u["default"].displayCreativeForSlot(e);var s=$j(t.googleHookSelector).find('iframe[id^="google_ads_iframe_"]'),o=s.contents().find(t.creativeSelector);if(t.isNativeAd){var n=o.data("id"),a=o.data("url");n&&a?u["default"].attachServedNativeAdAttributesAndTracking(e,r.lineItemId,o,n,i.ImpressionCode.success,o.data("url")):u["default"].trackImpression(e,i.ImpressionCode.dfpError)}else t.pollRequest?!function(){var n={id:o.data("id"),line_item_id:r.lineItemId,ad_unit:r.slot.getName().split("/",3)[2],ad_device_type:t.deviceType},a=s.closest("td");$j.each(["offset","index"],function(e,t){n[t]=a.attr(t)}),u["default"].populateHomepagePollAndTracking(e,r.lineItemId,o,n)}():u["default"].attachServedBannerAdAttributesAndTracking(e,r.lineItemId,o,i.ImpressionCode.success,t.delayImpressionTracking);"160x600"===t.dimensions&&$j(".mainContentContainer").addClass("adSkinEnabled")}}),r.display(e)}},{"../../react_actions/google_ads_actions":31,"../../react_stores/google_ads_store":182}],5:[function(e,t,r){"use strict";function s(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t=(0,l.merge)({},t,{type:t.method}),t=(0,l.omit)(t,"method");var r=$j.Deferred(),s=$j.ajax(e,t);return s.done(r.resolve),s.fail(function(e,t,s){(0,i.redirectOnAuthFailure)(e)||r.reject(e,t,s)}),r.promise()}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return s(e,(0,l.merge)({},t,{method:"POST"}))}function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return s(e,(0,l.merge)({},t,{method:"DELETE"}))}function a(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return s(e,(0,l.merge)({},t,{method:"GET"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.httpRequest=s,r.httpPost=o,r.httpDelete=n,r.httpGet=a;var i=e("./default_auth_failure_handler"),l=e("lodash")},{"./default_auth_failure_handler":6,lodash:"lodash"}],6:[function(e,t,r){"use strict";function s(e){if(e&&403===e.status){var t=e.responseJSON;if(t.redirect)return(0,o.setLocationUrl)(t.redirect),!0}return!1}Object.defineProperty(r,"__esModule",{value:!0}),r.redirectOnAuthFailure=s;var o=e("../env_utils")},{"../env_utils":13}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.BOOK_ORIGINS={CURRENTLY_READING_WIDGET:"currently-reading-widget",UPDATE_READING_PROGRESS:"hp_status_editor"}},{}],8:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("append-query"),n=s(o);r["default"]={openSocialShareWindow:function(e,t,r){var s=(0,n["default"])(e,t),o="left="+r.left+", top="+r.top,a="width="+r.width+", height="+r.height,i=o+", "+a+", menubar=no, scrollbar=no";window.open(s,"_blank",i)}}},{"append-query":"append-query"}],9:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.target,r=e.currentTarget,s=!1;if(t===r)s=i(t);else for(;r.contains(t)&&!(s=i(t));)t=t.parentNode;s&&a["default"].trackClickEvent(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.handleDataTracking=o;var n=e("../../react_actions/data_tracking/data_tracking_actions"),a=s(n),i=function(e){return"true"===e.getAttribute("data-tracking-enabletracking")}},{"../../react_actions/data_tracking/data_tracking_actions":24}],10:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=arguments.length<=1||void 0===arguments[1]?(0,u["default"])():arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];t.locale("en-abbreviated"),e=null!==r?r:(0,u["default"])(e).locale("en-abbreviated");var s=t.diff(e,"days"),o=t.diff(e,"months"),n=t.diff(e,"days",!0),a=6.5;return i["default"].inRange(o,1,13)?t.subtract(s,"days").format("DD MMM"):o>12?t.subtract(s,"days").format("DD MMM YY"):i["default"].inRange(s,7,28)?Math.ceil(s/7)+"w":n>=a&&28>=n?Math.round(n/a)+"w":e.fromNow()}function n(e){var t=arguments.length<=1||void 0===arguments[1]?"YYYY-MM-DD":arguments[1];if(e){var r=(0,u["default"])(e);return r.format(t)}return""}Object.defineProperty(r,"__esModule",{value:!0}),r.fromNow=o,r.getFormattedDate=n;var a=e("lodash"),i=s(a),l=e("moment"),u=s(l);u["default"].relativeTimeThreshold("s",60),u["default"].relativeTimeThreshold("m",60),u["default"].relativeTimeThreshold("h",24),u["default"].relativeTimeThreshold("d",25),u["default"].relativeTimeThreshold("M",10),u["default"].locale("en-abbreviated",{relativeTime:{future:"in %s",past:"%s",s:"Just now",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}}),u["default"].locale("en")},{lodash:"lodash",moment:"moment"}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.LAYOUT_SIZE={WIDE:"wide",NARROW:"narrow"}},{}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.DEFAULT_SHELVES={READ:{name:"read",displayName:"Read"},CURRENTLY_READING:{name:"currently-reading",displayName:"Currently Reading"},WANT_TO_READ:{name:"to-read",displayName:"Want to Read"}}},{}],13:[function(e,t,r){"use strict";t.exports={PRODUCTION:"production",DEVELOPMENT:"development",TEST:"test",hasDom:function(){return!!window.document},domUnavailable:function(){return!this.hasDom()},isDevelopment:function(){return"production"===this.DEVELOPMENT},getCurrentPath:function(){return window?window.encodeURIComponent(window.location.pathname+window.location.search):void 0},setLocationUrl:function(e){window&&(window.location.href=e)},getLocationUrl:function(){return window&&window.location?window.location.href:void 0}}},{}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=r.clearFlashMessage=function(){$j("#flashMessages").trigger("clearFlashError")};r.flashSuccessMessage=function(e){s(),$j("#flashMessages").trigger("addFlashMessage",[e,"notice"])},r.flashErrorMessage=function(e){$j("#flashMessages").trigger("addFlashMessage",[e,"error"])}},{}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash");r["default"]={notifyException:function(e,t){e?window.console&&(0,s.isFunction)(window.console.error)&&window.console.error(t,e.stack):window.console&&(0,s.isFunction)(window.console.warn)&&window.console.warn("Attempted to notifyException without providing error,\n                           message: "+t)},notifyUser:function(e){window&&(0,s.isFunction)(window.alert)&&window.alert(e)}}},{lodash:"lodash"}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={enter:13,escape:27,space:32,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40};r["default"]={isEnter:function(e){return e===s.enter},isEscape:function(e){return e===s.escape},isSpace:function(e){return e===s.space},isArrowLeft:function(e){return e===s.leftArrow},isArrowUp:function(e){return e===s.upArrow},isArrowRight:function(e){return e===s.rightArrow},isArrowDown:function(e){return e===s.downArrow},isDropdownOpenerKey:function(e){return this.isEnter(e)||this.isSpace(e)||this.isArrowDown(e)},isDefaultOpenerKey:function(e){return this.isEnter(e)||this.isSpace(e)},isDefaultCloserKey:function(e){return this.isEscape(e)},KEYCODES:s}},{}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.LAYOUT_SIZE={WIDE:"wide",NARROW:"narrow"}},{}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ICON_SIZES={SMALL:"small",MEDIUM:"medium",LARGE:"large"},r.ICON_SHAPES={CIRCLE:"circular",ROUND_SQUARE:"roundSquare"}},{}],19:[function(e,t,r){"use strict";function s(){return window.GrImageRegistry||{}}Object.defineProperty(r,"__esModule",{value:!0}),r.getImages=s},{}],20:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),a=s(n);r["default"]={toSentence:function(e){var t=arguments.length<=1||void 0===arguments[1]?"and":arguments[1],r=[],s=e.length;switch(s){case 0:return"";case 1:r.push(e[0]);break;case 2:r.push(e[0]),r.push(" "+t+" "),r.push(e[1]);break;default:a["default"].each(e.slice(0,-1),function(e){r.push(e),r.push(", ")}),r.push(t+" "),r.push(e[s-1])}return o("span",{},void 0,r)},sentenceJoin:function(e){var t=arguments.length<=1||void 0===arguments[1]?", ":arguments[1],r=[];return a["default"].each(e.slice(0,-1),function(e){r.push(e),r.push(t)}),r.push(e[e.length-1]),o("span",{},void 0,r)}}},{lodash:"lodash"}],21:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){return n["default"].createActions(["selectSpecificResult","selectNextResult","selectPreviousResult","search","searchResultsFound","setShowResultsContainer"])};var o=e("reflux"),n=s(o)},{reflux:"reflux"}],22:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions({addNewComment:{},commentEntered:{sync:!0},deleteComment:{},showCommentsForPage:{},showSeeMoreLoadingSpinner:{},textareaFocused:{},textareaFocusRequested:{},textareaUnfocused:{}})},{reflux:"reflux"}],23:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["updatePreference"])},{reflux:"reflux"}],24:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["trackClickEvent"])},{reflux:"reflux"}],25:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["openPane"])},{reflux:"reflux"}],26:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){return n["default"].createActions(["selectSpecificResult","selectNextResult","selectPreviousResult","search","searchResultsFound","setShowResultsContainer"])};var o=e("reflux"),n=s(o)},{reflux:"reflux"}],27:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["enablePublishPermission","togglePublishPermission"])},{reflux:"reflux"}],28:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["changeFavoriteGenres"])},{reflux:"reflux"}],29:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["selectFavoriteGenre","deselectFavoriteGenre","submitSelectedGenres"])},{reflux:"reflux"}],30:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["displayError","requestFeaturedBooks"])},{reflux:"reflux"}],31:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["hasRequestedCreativeForSlot","displayCreativeForSlot","removeAdSlot","trackImpression","attachServedNativeAdAttributesAndTracking","attachServedBannerAdAttributesAndTracking","populateHomepagePollAndTracking","pollAnswerChanged"])},{reflux:"reflux"}],32:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["like","unLike"])},{reflux:"reflux"}],33:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["openModal","closeModal"])},{reflux:"reflux"}],34:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions({loadMoreUpdates:{},newsfeedItemsLoaded:{sync:!0},updateNativeAdSlot:{},userNotInterested:{},undoUserNotInterested:{},hideStory:{},previewBook:{},setUpdatesFeedPreferences:{}})},{reflux:"reflux"}],35:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["loadError","loadNotifications","requestNotifications"])},{reflux:"reflux"}],36:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["updateProgress","closeUpdateProgressForm","openUpdateProgressForm","refreshReadingSessions","shelveBookSuccess","loadAllReadingSessions"])},{reflux:"reflux"}],37:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions({updateSharingTextInputValue:{sync:!0},submitShare:{},openShareModal:{}})},{reflux:"reflux"}],38:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions({addShelvings:{},bookShelved:{},bookUnshelved:{},shelveBook:{},toggleNonExclusiveShelving:{},rateBook:{children:["newBook","failed"]},unshelveBook:{}})},{reflux:"reflux"}],39:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["selectTab"])},{reflux:"reflux"}],40:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(t){t({type:"NOTIFICATIONS_PUSH_TO_KINDLE_SAVING"}),(0,l.httpPost)("/user/update",{data:{format:"json",category:"index",notif_prefs:{push:{kindle:e}}},dataType:"JSON"}).done(function(){t({type:"NOTIIFICATIONS_PUSH_TO_KINDLE_CHANGED",value:e})}).fail(function(){(0,u.flashErrorMessage)("Sorry, we weren’t able to update your notifications setting. Please try again later, or contact us if the problem persists.")})}}function n(){return function(e){e({type:"ACCOUNTS_AMAZON_UNLINK_REQUESTED"}),(0,l.httpDelete)("/amazon/login/destroy").done(function(){e({type:"ACCOUNTS_AMAZON_UNLINKED"}),(0,u.flashSuccessMessage)("Amazon account unlinked")}).fail(function(){e({type:"ACCOUNTS_AMAZON_UNLINK_FAILED"}),(0,u.flashErrorMessage)("Sorry, we weren’t able to unlink your Amazon account. Please try again later, or contact us if the problem persists.")})}}Object.defineProperty(r,"__esModule",{value:!0}),r.changeNotificationsPushToKindle=o,r.unlinkAmazonAccount=n;var a=e("reflux"),i=s(a),l=e("../../../modules/ajax/ajax_helper"),u=e("../../../modules/flash_message_helper");r["default"]=i["default"].createActions(["updatePreferences"])},{"../../../modules/ajax/ajax_helper":5,"../../../modules/flash_message_helper":14,reflux:"reflux"}],41:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["userAgentGainsTouch","userAgentLosesTouch"])},{reflux:"reflux"}],42:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["addNonExclusiveShelf","removeNonExclusiveShelf"])},{reflux:"reflux"}],43:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o);r["default"]=n["default"].createActions(["openAddShelfTextbox","updateShelfNameFilter","updateShelves"])},{reflux:"reflux"}],44:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}e("./_polyfills");var o=e("./_dom_ready_initializers"),n=s(o),a=e("./_public_actions"),i=s(a);window.ReactActions=i["default"],n["default"].initializeModernizrTouchCheck()},{"./_dom_ready_initializers":45,"./_polyfills":46,"./_public_actions":47}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]={initializeModernizrTouchCheck:function(){$j(function(){Modernizr&&Modernizr.touchevents?window.ReactActions.UserAgentCapabilitiesActions.userAgentGainsTouch():window.ReactActions.UserAgentCapabilitiesActions.userAgentLosesTouch()})}}},{}],46:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=e("object-assign"),n=s(o);window.Object.assign=n["default"]},{"object-assign":"object-assign"}],47:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../react_actions/user_agent_capabilities_actions"),n=s(o);r["default"]={UserAgentCapabilitiesActions:n["default"]}},{"../react_actions/user_agent_capabilities_actions":41}],48:[function(e,t,r){"use strict";e("./_common");var s=e("../react_isomorphic/site_header"),o=e("../react_isomorphic/deals"),n=e("../react_isomorphic/reading_notes"),a=e("../react_isomorphic/experiments"),i=e("lodash");window.ReactComponents=(0,i.merge)({},s.HeaderComponents,a.ExperimentComponents,o.DealsComponents,n.ReadingNotesComponents),window.ReactStores=(0,i.merge)({},s.HeaderStores,a.ExperimentStores,o.DealsStores)},{"../react_isomorphic/deals":161,"../react_isomorphic/experiments":163,"../react_isomorphic/reading_notes":166,"../react_isomorphic/site_header":167,"./_common":44,lodash:"lodash"}],49:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),n=s(o),a=e("../gr_component_factory"),i=s(a),l=e("../../react_stores/google_ads_store"),u=s(l),d=e("reflux"),c=s(d),f=e("classnames"),p=s(f),m=e("../../modules/ads/google_ad_helper"),_="googleBannerAd";r["default"]=i["default"].createClass({displayName:"GoogleBannerAd",mixins:[c["default"].connectFilter(u["default"],"googleAdsStore",function(e){return e.ads[this.props.adId]})],propTypes:{adId:n["default"].PropTypes.string.isRequired,delayImpressionTracking:n["default"].PropTypes.bool},getDefaultProps:function(){return{delayImpressionTracking:!1}},componentDidMount:function(){var e=this.state.googleAdsStore,t={googleHookSelector:this.refs.googleHook,creativeSelector:e.creativeSelector,dimensions:e.dimensions,isNativeAd:e.isNativeAd,delayImpressionTracking:this.props.delayImpressionTracking};(0,m.requestCreativeForAdSlot)(this.props.adId,t)},render:function(){var e=this.state.googleAdsStore,t=(0,p["default"])(e.className,_,{"googleBannerAd--970x66":"970x66"===e.dimensions,"googleBannerAd--300x250 u-bottomGrayBorder":e.path.match(/goodr.home.cb/)||e.path.match(/goodr.home/)&&"300x250"===e.dimensions,"googleBannerAd--left_skin":e.path.match(/left.160x600/)||e.path.match(/left.out.160x600/),"googleBannerAd--right_skin":e.path.match(/right.160x600/)||e.path.match(/right.out.160x600/)});return e?n["default"].createElement("div",{className:t,id:this.props.adId,ref:"googleHook"}):null}})},{"../../modules/ads/google_ad_helper":4,"../../react_stores/google_ads_store":182,"../gr_component_factory":91,classnames:"classnames",react:"react",reflux:"reflux"}],50:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("../../react_stores/google_ads_store"),d=s(u),c=e("../../modules/ads/google_ad_helper"),f=e("classnames"),p=s(f),m="googleNativeNewsfeedAd";r["default"]=l["default"].createClass({displayName:"GoogleNativeNavAd",mixins:[a["default"].connectFilter(d["default"],"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired},componentDidMount:function(){var e=this.state.googleAdsStore;if(!e.hasCreative){var t={googleHookSelector:this.refs.googleHook,creativeSelector:e.creativeSelector,dimensions:e.dimensions,isNativeAd:e.isNativeAd};(0,c.requestCreativeForAdSlot)(this.props.adId,t)}},render:function(){var e=this.state.googleAdsStore;if(e){var t=(0,p["default"])(m,e.className);return o("div",{},void 0,React.createElement("div",{className:t,id:this.props.adId,ref:"googleHook"}))}return null}})},{"../../modules/ads/google_ad_helper":4,"../../react_stores/google_ads_store":182,"../gr_component_factory":91,classnames:"classnames",reflux:"reflux"}],51:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("../../react_stores/google_ads_store"),d=s(u),c=e("../click_tracking_wrapper"),f=s(c),p=e("../user_content/expandable_html"),m=s(p),_=e("../../modules/ads/click_tracking_helper");r["default"]=l["default"].createClass({displayName:"GoogleNativeNavCreative",mixins:[a["default"].connectFilter(d["default"],"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired,genre:React.PropTypes.string,trackingOptions:React.PropTypes.shape({enableTracking:React.PropTypes.bool,adId:React.PropTypes.string}).isRequired},getDefaultProps:function(){return{audibleUrl:"https://www.goodreads.com/audible"}},renderImage:function(){var e=this.state.googleAdsStore,t=o("a",{href:this.props.audibleUrl},void 0,o("img",{alt:e.creative.title,src:e.creative.image}));return o(f["default"],{trackingOptions:_.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_Image,children:t})},renderExploreButton:function(){var e=o("a",{href:this.props.audibleUrl,className:"gr-button u-marginTopSmall gr-microsite-link"},void 0,"Browse ",this.props.genre);return o(f["default"],{trackingOptions:_.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_ExploreButton,children:e})},renderBody:function(){var e=this.state.googleAdsStore,t=o("div",{className:"gr-book__titleLink gr-book__title gr-book__titleLink--large"},void 0,o("a",{href:this.props.audibleUrl,className:"gr-hyperlink gr-hyperlink--naked"},void 0,e.creative.title));return o("div",{},void 0,this.renderImage(),o("div",{className:"u-marginTopXSmall"},void 0,o(f["default"],{trackingOptions:_.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_Title,children:t})),o("div",{className:"u-marginTopXSmall"},void 0,React.createElement(m["default"],e.creative.description)),this.renderExploreButton())},renderCreative:function(){var e=this.state.googleAdsStore;if(e.creative){var t=o("a",{href:this.props.audibleUrl,className:"gr-hyperlink featuredGenres__sponsoredLink"},void 0,e.creative.sponsoredBy),r=o("div",{className:"featuredGenres__sponsoredFooter"},void 0,o("span",{className:"gr-newsfeedItem__sponsoredBadgeIcon featuredGenres__sponsoredIcon"}),o("span",{className:"featuredGenres__sponsoredLabel"},void 0,"Sponsored by "),o(f["default"],{children:t,trackingOptions:_.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_SponsoredBy}));return o("div",{className:"featuredGenres__book"},void 0,o("div",{className:"siteHeader__heading siteHeader__title siteHeader__title--secondary"},void 0,"Discover Audiobooks through Audible"),o("div",{className:"u-marginTopSmall"},void 0,this.renderBody(),r))}return null},render:function(){return this.state.googleAdsStore?o("div",{},void 0,this.renderCreative()):null}})},{"../../modules/ads/click_tracking_helper":3,"../../react_stores/google_ads_store":182,"../click_tracking_wrapper":54,"../gr_component_factory":91,"../user_content/expandable_html":152,reflux:"reflux"}],52:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n),i=e("react"),l=o("span",{className:"gr-icon gr-icon--authorBadge",title:"Goodreads Author"});r["default"]=a["default"].createClass({displayName:"AuthorBadge",propTypes:{isGoodreadsAuthor:i.PropTypes.bool.isRequired},render:function(){return this.props.isGoodreadsAuthor?l:null}})},{"../gr_component_factory":91,react:"react"}],53:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{
"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.VALID_BOOK_SIZES=void 0;var n=e("react"),a=s(n),i=e("lodash"),l=s(i),u=e("./gr_component_factory"),d=s(u),c=e("./shared/gr_prop_types"),f=s(c),p=e("./click_tracking_wrapper"),m=s(p),_=e("../modules/ads/click_tracking_helper"),h=e("classnames"),g=s(h),v=e("./author/author_badge"),y=s(v),b=r.VALID_BOOK_SIZES={MEDIUM:"medium",LARGE:"large"};r["default"]=d["default"].createClass({displayName:"Book",propTypes:{imageUrl:a["default"].PropTypes.string.isRequired,bookUrl:a["default"].PropTypes.string.isRequired,title:a["default"].PropTypes.string.isRequired,size:a["default"].PropTypes.oneOf(l["default"].values(b)),titleSize:a["default"].PropTypes.oneOf(l["default"].values(b)),author:f["default"].author(),mediaBoxModifier:a["default"].PropTypes.string,className:a["default"].PropTypes.string,sponsored:a["default"].PropTypes.bool,bookImageTrackingData:a["default"].PropTypes.object,bookTitleTrackingData:a["default"].PropTypes.object,authorLinkTrackingData:a["default"].PropTypes.object,label:a["default"].PropTypes.element},getDefaultProps:function(){return{size:b.MEDIUM,bookImageTrackingData:_.TRACKED_CLASSES.book_image,bookTitleTrackingData:_.TRACKED_CLASSES.book_title,authorLinkTrackingData:_.TRACKED_CLASSES.author_link}},render:function(){var e=(0,g["default"])("gr-mediaBox","gr-book--"+this.props.size,this.withBemModifiers("gr-book"),this.props.className),t=(0,g["default"])("gr-mediaBox__media",this.withBemModifiers("gr-book__image"),{"gr-book__image--large":this.props.size===b.LARGE}),r=null==this.props.titleSize?this.props.size:this.props.titleSize,s=(0,g["default"])(this.withBemModifiers("gr-book__titleLink"),{"gr-book__titleLink--large":r===b.LARGE},"gr-hyperlink gr-hyperlink--naked"),n=(0,g["default"])(this.withBemModifiers("gr-book__title")),a=this.withBemModifiers("gr-mediaBox__desc",this.props.mediaBoxModifier),i=o("img",{alt:this.props.title,className:t,src:this.props.imageUrl}),l=o("a",{href:this.props.bookUrl,className:s},void 0,this.props.title);return o("div",{className:e},void 0,o("a",{href:this.props.bookUrl},void 0,o(m["default"],{children:i,trackingOptions:this.props.bookImageTrackingData})),o("div",{className:a},void 0,this.props.label,o("div",{className:n},void 0,o(m["default"],{children:l,trackingOptions:this.props.bookTitleTrackingData})),this.renderAuthorLink(),o("div",{className:"gr-book__additionalContent"},void 0,this.props.children)))},renderAuthorLink:function(){var e=null==this.props.titleSize?this.props.size:this.props.titleSize,t=(0,g["default"])(this.withBemModifiers("gr-book__author"),{"gr-book__author--large":e===b.LARGE});if(this.props.author){var r=o("a",{href:this.props.author.profileUrl,className:"gr-book__authorLink gr-hyperlink gr-hyperlink--naked"},void 0,this.props.author.name);return o("div",{className:t},void 0,"by ",o(m["default"],{children:r,trackingOptions:this.props.authorLinkTrackingData}),a["default"].createElement(y["default"],this.props.author))}return o("div",{className:t},void 0,"by deleted author")}})},{"../modules/ads/click_tracking_helper":3,"./author/author_badge":52,"./click_tracking_wrapper":54,"./gr_component_factory":91,"./shared/gr_prop_types":133,classnames:"classnames",lodash:"lodash",react:"react"}],54:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),n=s(o),a=e("./gr_component_factory"),i=s(a);r["default"]=i["default"].createClass({displayName:"ClickTrackingWrapper",propTypes:{trackingOptions:n["default"].PropTypes.shape({dfp:n["default"].PropTypes.bool,pmet:n["default"].PropTypes.object.isRequired}).isRequired,children:n["default"].PropTypes.element.isRequired},render:function(){return this.props.children}})},{"./gr_component_factory":91,react:"react"}],55:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./gr_component_factory"),l=s(i),u=e("../modules/shared/image_registry"),d=e("classnames"),c=s(d);r["default"]=l["default"].createClass({displayName:"CloseButton",propTypes:{action:a["default"].PropTypes.func.isRequired},render:function(){var e=(0,c["default"])("gr-iconButton",this.props.className);return o("button",{className:e,onClick:this.props.action},void 0,o("img",{alt:"Dismiss",src:(0,u.getImages)().closeIcon}))}})},{"../modules/shared/image_registry":19,"./gr_component_factory":91,classnames:"classnames",react:"react"}],56:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("../gr_component_factory"),u=s(l),d=e("../user_content/expandable_html"),c=s(d),f=e("../user_content/hidden_html"),p=s(f),m=e("../shared/gr_prop_types"),_=s(m),h=e("../user/user_profile_link"),g=s(h),v=e("../user/user_icon"),y=s(v),b=e("./right_side_information"),S=s(b);r["default"]=u["default"].createClass({displayName:"Comment",propTypes:{body:i["default"].PropTypes.shape(_["default"].expandableHtml()),createdAt:_["default"].date.isRequired,authorUser:_["default"].user().isRequired,subjectKey:i["default"].PropTypes.string.isRequired,subject:_["default"].commentSubject(),deletableByCurrentUser:i["default"].PropTypes.bool.isRequired,blockedByCurrentUser:i["default"].PropTypes.bool,showTimestamp:i["default"].PropTypes.bool,uri:i["default"].PropTypes.string.isRequired,flagForAbuseUrl:i["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{blockedByCurrentUser:!1}},getInitialState:function(){return{showCommentDeletingSpinner:!1}},renderBody:function(){if(this.props.blockedByCurrentUser){var e="unhide comment";return n(p["default"],{unhideText:e},void 0,i["default"].createElement(c["default"],this.props.body))}return i["default"].createElement(c["default"],this.props.body)},render:function(){var e=this;return n("div",{className:"gr-comment gr-mediaBox",onMouseEnter:function(){e.setState({isHoveringOnComment:!0})},onMouseLeave:function(){e.setState({isHoveringOnComment:!1})}},void 0,n("div",{className:"gr-mediaBox__media"},void 0,n(y["default"],{user:this.props.authorUser})),n("div",{className:"gr-mediaBox__desc\n                              gr-mediaBox__desc--clearfixOverflow"},void 0,i["default"].createElement(S["default"],o({isHoveringOnComment:this.state.isHoveringOnComment},this.props)),n(g["default"],{user:this.props.authorUser}),this.props.blockedByCurrentUser?n("strong",{},void 0," (blocked)"):null,n("div",{className:"gr-comment__body"},void 0,this.renderBody())))}})},{"../gr_component_factory":91,"../shared/gr_prop_types":133,"../user/user_icon":150,"../user/user_profile_link":151,"../user_content/expandable_html":152,"../user_content/hidden_html":153,"./right_side_information":59,react:"react"}],57:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("../shared/gr_prop_types"),f=s(c),p=e("../../react_actions/comment_actions"),m=s(p),_=e("../../react_stores/comments_store"),h=s(_),g=e("../user/user_icon"),v=s(g),y=e("../../react_mixins/gr_reflux"),b=e("classnames"),S=s(b);r["default"]=d["default"].createClass({displayName:"CommentForm",propTypes:{authorUser:f["default"].user().isRequired,subjectKey:a["default"].PropTypes.string.isRequired,subject:a["default"].PropTypes.shape({type:a["default"].PropTypes.string,id:a["default"].PropTypes.number,uri:a["default"].PropTypes.string}),placeholder:a["default"].PropTypes.string},mixins:[(0,y.connectToLazyStore)(h["default"],"subjectKey")],getDefaultProps:function(){return{placeholder:"Write a comment…"}},addNewComment:function(e){this.isCommentEmpty()||m["default"].addNewComment({subjectKey:this.props.subjectKey,subject:this.props.subject,body:this.state.unsavedComment,authorUser:this.props.authorUser}),e.preventDefault()},isCommentEmpty:function(){return l["default"].isEmpty(l["default"].trim(this.state.unsavedComment))},onTextChange:function(e){m["default"].commentEntered(this.props.subjectKey,e.target.value)},onFocus:function(){m["default"].textareaFocused(this.props.subjectKey)},onBlur:function(){m["default"].textareaUnfocused(this.props.subjectKey)},componentDidUpdate:function(){this.state.textareaFocusRequested===!0&&this.refs.commentBodyTextarea.focus()},render:function(){var e=(0,S["default"])(this.withBemModifiers("gr-commentForm"),"gr-mediaBox");return o("div",{className:e},void 0,o("div",{className:"gr-mediaBox__media u-noLineHeight"},void 0,o(v["default"],{user:this.props.authorUser})),o("form",{className:"gr-mediaBox__desc",method:"post",action:"/comment"},void 0,o("input",{type:"hidden",name:"id",value:this.props.subject.id}),o("input",{type:"hidden",name:"type",value:this.props.subject.type}),a["default"].createElement("textarea",{className:"gr-textarea gr-commentForm__textarea",name:"comment[body_usertext]",disabled:this.state.saveInProgress,onChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,rows:this.state.textareaRows,value:this.state.unsavedComment,ref:"commentBodyTextarea",placeholder:this.props.placeholder,"aria-label":this.props.placeholder}),this.state.showCommentButton?o("button",{className:"gr-commentForm__submitButton gr-button gr-button--small",disabled:this.state.saveInProgress||this.isCommentEmpty(),onClick:this.addNewComment,type:"submit"},void 0,"Comment"):null))}})},{"../../react_actions/comment_actions":22,"../../react_mixins/gr_reflux":171,"../../react_stores/comments_store":175,"../gr_component_factory":91,"../shared/gr_prop_types":133,"../user/user_icon":150,classnames:"classnames",lodash:"lodash",react:"react"}],58:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("lodash"),u=s(l),d=e("../gr_component_factory"),c=s(d),f=e("../shared/gr_prop_types"),p=s(f),m=e("./comment"),_=s(m),h=e("../pagination_links"),g=s(h),v=e("../../react_stores/comments_store"),y=s(v),b=e("../../react_actions/comment_actions"),S=s(b),T=e("../spinner"),k=s(T),P=e("../../react_mixins/gr_reflux"),N=e("classnames"),w=s(N),R=3,x=1;r["default"]=c["default"].createClass({displayName:"Comments",propTypes:{subjectKey:i["default"].PropTypes.string.isRequired,subject:p["default"].commentSubject(),subjectUrl:i["default"].PropTypes.string,showTimestamp:i["default"].PropTypes.bool},getDefaultProps:function(){return{showTimestamp:!0}},mixins:[(0,P.connectToLazyStore)(y["default"],"subjectKey")],seeMoreCommentsText:function(){return 1==this.state.numComments?"See 1 comment":"See all "+this.state.numComments+" comments"},showCommentsForPage:function(e){S["default"].showCommentsForPage({subjectKey:this.props.subjectKey,subject:this.props.subject,page:e})},showMoreClicked:function(e){S["default"].showSeeMoreLoadingSpinner(this.props.subjectKey),this.showCommentsForPage(x),e.preventDefault()},renderSeeMoreComments:function(){var e=this.state.numComments;return e>R||e>this.state.comments.length?n("div",{className:"gr-comments__seeAllLinkBox"},void 0,this.state.showSeeMoreLoadingSpinner?n("span",{},void 0,n("span",{className:"gr-hyperlink gr-hyperlink--bold"},void 0,this.seeMoreCommentsText()),n("span",{id:"showMoreSpinner",className:"u-marginLeftTiny"},void 0,n(k["default"],{}))):n("a",{href:this.props.subjectUrl,className:"gr-hyperlink gr-hyperlink--bold",onClick:this.showMoreClicked},void 0,this.seeMoreCommentsText())):null},renderComments:function(){var e=this,t=this.state.showPagination?this.state.comments:u["default"].takeRight(this.state.comments,R);return u["default"].map(t,function(t){return i["default"].createElement(_["default"],o({key:t.uri,subjectKey:e.props.subjectKey,subject:e.props.subject,showTimestamp:e.props.showTimestamp},t))})},render:function(){var e=(0,w["default"])(this.withBemModifiers("gr-comments"),"gr-box","gr-box--hiddenOverflow","u-defaultType");return this.state.numComments>0?n("div",{className:e},void 0,this.state.showPagination?null:this.renderSeeMoreComments(),this.renderComments(),this.state.showPagination?n("div",{className:"u-topGrayBorder"},void 0,n(g["default"],{subjectKey:this.props.subjectKey,totalSize:this.state.numComments,currentPageNumber:this.state.currentPage,perPage:10,changePageAction:this.showCommentsForPage,className:"gr-paginationLinks__links"})):null):null}})},{"../../react_actions/comment_actions":22,"../../react_mixins/gr_reflux":171,"../../react_stores/comments_store":175,"../gr_component_factory":91,"../pagination_links":119,"../shared/gr_prop_types":133,"../spinner":142,"./comment":56,classnames:"classnames",lodash:"lodash",react:"react"}],59:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("reflux"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("../shared/gr_prop_types"),f=s(c),p=e("../spinner"),m=s(p),_=e("../flagged_resources/flag_for_abuse_link"),h=s(_),g=e("../time/relative_time"),v=s(g),y=e("../dot_separated_elements"),b=s(y),S=e("../../react_actions/comment_actions"),T=s(S),k=e("../../react_stores/user_agent_capabilities_store"),P=s(k),N=e("../../modules/env_utils"),w=s(N);r["default"]=d["default"].createClass({displayName:"CommentRightSideInformation",mixins:[l["default"].connect(P["default"],"userAgentCapabilities")],propTypes:{showTimestamp:a["default"].PropTypes.bool,isHoveringOnComment:a["default"].PropTypes.bool,deletableByCurrentUser:a["default"].PropTypes.bool.isRequired,subject:f["default"].commentSubject().isRequired,uri:a["default"].PropTypes.string.isRequired,subjectKey:a["default"].PropTypes.string.isRequired,createdAt:f["default"].date.isRequired,flagForAbuseUrl:a["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{showTimestamp:!0,isHoveringOnComment:!1}},getInitialState:function(){return{showCommentDeletingSpinner:!1}},deleteComment:function(){var e={subject:this.props.subject,subjectKey:this.props.subjectKey};window.confirm("Are you sure you want to delete this comment?")&&(this.setState({showCommentDeletingSpinner:!0}),T["default"].deleteComment(this.props.subjectKey,this.props.uri,e))},getDeleteLink:function(){return this.props.deletableByCurrentUser?this.state.showCommentDeletingSpinner?a["default"].createElement(m["default"],{ref:"spinner"}):a["default"].createElement("a",{className:"gr-comment__deleteLink gr-hyperlink--naked gr-hyperlink",ref:"deleteLink",onClick:this.deleteComment,"aria-label":"Delete comment"},"Delete"):void 0},getFlag:function(){var e=this.props.flagForAbuseUrl+"&return_url="+encodeURIComponent(w["default"].getLocationUrl());return o(h["default"],{flagForAbuseUrl:e})},getTimestamp:function(){return this.props.showTimestamp?o("small",{className:"gr-comment__timestamp"},void 0,o(v["default"],{time:this.props.createdAt})):void 0},getRightSideElements:function(){var e=[];return this.state.userAgentCapabilities.touch?(e.push(this.getDeleteLink()),e.push(this.getFlag()),e.push(this.getTimestamp())):this.props.isHoveringOnComment?(e.push(this.getDeleteLink()),e.push(this.getFlag())):e.push(this.getTimestamp()),e},render:function(){return o("div",{className:"gr-comment__rightSideInformation"},void 0,o(b["default"],{elements:this.getRightSideElements()}))}})},{"../../modules/env_utils":13,"../../react_actions/comment_actions":22,"../../react_stores/user_agent_capabilities_store":192,"../dot_separated_elements":77,"../flagged_resources/flag_for_abuse_link":88,"../gr_component_factory":91,"../shared/gr_prop_types":133,"../spinner":142,"../time/relative_time":145,react:"react",reflux:"reflux"}],60:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./gr_component_factory"),l=s(i),u=e("classnames"),d=s(u),c=e("./dot_separated_elements"),f=s(c),p={SMALL:"small",MEDIUM:"medium",LARGE:"large"},m=5;r["default"]=l["default"].createClass({displayName:"CommunityRating",statics:{ICON_SIZES:p},propTypes:{rating:a["default"].PropTypes.number.isRequired,displayAvg:a["default"].PropTypes.bool,displayAvgRatingText:a["default"].PropTypes.bool,ratingsCount:a["default"].PropTypes.number,textReviewsCount:a["default"].PropTypes.number,className:a["default"].PropTypes.string,size:a["default"].PropTypes.oneOf([p.SMALL,p.MEDIUM,p.LARGE])},getDefaultProps:function(){return{displayAvg:!1,size:p.SMALL}},wrapperClasses:function(){return(0,d["default"])("communityRating__starsWrapper",{"communityRating__starsWrapper--small":this.props.size===p.SMALL,"communityRating__starsWrapper--medium":this.props.size===p.MEDIUM,"communityRating__starsWrapper--large":this.props.size===p.LARGE})},starClasses:function(){return(0,d["default"])("communityRating__stars",{"communityRating__stars--small":this.props.size===p.SMALL,"communityRating__stars--medium":this.props.size===p.MEDIUM,"communityRating__stars--large":this.props.size===p.LARGE})},getRoundedRating:function(e){var t=Math.floor(e);return e===t?e:.5>e-t?t+.45:t+.6},renderRating:function(){var e=this.getRoundedRating(this.props.rating),t={width:e/m*100+"%"},r="Rated "+this.props.rating.toFixed(2)+" of "+m,s=null==this.props.displayAvgRatingText?this.props.displayAvg:this.props.displayAvgRatingText;return o("span",{},void 0,o("div",{className:this.wrapperClasses()},void 0,o("div",{className:this.starClasses(),style:t,"aria-label":r})),this.props.displayAvg?o("span",{className:"gr-metaText"},void 0,this.props.rating.toFixed(2),s?" avg. rating":""):null)},renderRatingsCount:function(){return o("span",{className:"gr-metaText"},void 0,this.props.ratingsCount," Ratings")},renderTextReviewsCount:function(){return o("span",{className:"gr-metaText"},void 0,this.props.textReviewsCount," Reviews")},render:function(){var e=(0,d["default"])("communityRating",this.props.className),t="Rated "+this.props.rating.toFixed(2)+" of "+m,r=[this.renderRating()];return this.props.ratingsCount&&r.push(this.renderRatingsCount()),this.props.textReviewsCount&&r.push(this.renderTextReviewsCount()),o("div",{className:e,"aria-label":t},void 0,o(f["default"],{elements:r}))}})},{"./dot_separated_elements":77,"./gr_component_factory":91,classnames:"classnames",react:"react"}],61:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=e("../shared/gr_prop_types"),i=s(a),l=e("../book"),u=s(l),d=e("../community_rating"),c=s(d),f=e("./deal_expiration_date"),p=s(f),m=e("./deal_price"),_=s(m),h=e("./deal_tags"),g=s(h),v=e("../user_content/expandable_html"),y=s(v),b=e("./deal_buy_button"),S=s(b),T=e("../../modules/deals/deals_helper"),k=function(e){return o("div",{className:"gr-deal"},void 0,React.createElement(u["default"],Object.assign({},e.book,{size:"large"}),o("div",{},void 0,o(c["default"],{rating:parseFloat(e.book.avgRating),size:"medium",displayAvg:!0,displayAvgRatingText:!1,className:"u-inlineBlock u-marginBottomTiny u-marginTopTiny"}),o("span",{},void 0," · "),o("span",{className:"gr-metaText"},void 0,e.book.ratingsCount.toLocaleString()," Ratings"),o("span",{},void 0," · "),o("span",{className:"gr-metaText"},void 0,e.book.textReviewsCount.toLocaleString()," Reviews")),o(g["default"],{tags:e.tags.concat(e.genres)}),o(y["default"],{html:e.description.html,className:"gr-deal__blurb"}),o(_["default"],{dealPrice:e.dealPrice,listPrice:e.listPrice}),o(p["default"],{expirationDate:e.expirationDate,size:T.LAYOUT_SIZE.WIDE}),o(S["default"],{retailerLinks:e.retailerLinks})))},P=function(e){return o("div",{className:"gr-deal"},void 0,o("div",{className:"u-marginBottomXSmall"},void 0,React.createElement(u["default"],Object.assign({},e.book,{titleSize:"large"}),o("div",{},void 0,o(c["default"],{rating:parseFloat(e.book.avgRating),size:"medium",displayAvg:!0,displayAvgRatingText:!1,className:"u-inlineBlock u-marginBottomTiny u-marginTopTiny"}),o("span",{},void 0," · "),o("span",{className:"gr-metaText"},void 0,e.book.ratingsCount.toLocaleString()," Ratings")),o(g["default"],{tags:e.tags.concat(e.genres)})),o(y["default"],{html:e.description.html,truncatedHtml:e.description.truncatedHtml,className:"gr-deal__blurb"}),o(_["default"],{dealPrice:e.dealPrice,listPrice:e.listPrice}),o(p["default"],{expirationDate:e.expirationDate,size:T.LAYOUT_SIZE.NARROW}),o(S["default"],{retailerLinks:e.retailerLinks})))},N=function(e){var t=e.deal,r=e.size;return r===T.LAYOUT_SIZE.WIDE?k(t):P(t)};N.propTypes={deal:i["default"].deal().isRequired,size:n.PropTypes.string},r["default"]=N},{"../../modules/deals/deals_helper":11,"../book":53,"../community_rating":60,"../shared/gr_prop_types":133,"../user_content/expandable_html":152,"./deal_buy_button":62,"./deal_expiration_date":63,"./deal_price":64,"./deal_tags":66,react:"react"}],62:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n),i=e("lodash"),l=e("classnames"),u=s(l),d=(0,u["default"])("gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","buttonGroup__dropdownMenuItem","u-displayBlock");r["default"]=a["default"].createClass({displayName:"DealBuyButton",getInitialState:function(){return{menuOpen:!1}},toggleMenuOpen:function(){this.setState({menuOpen:!this.state.menuOpen})},renderBuyLink:function(e){return o("a",{target:"_blank",className:d,"aria-label":"Buy this e-book on "+e.label,onClick:this.toggleMenuOpen,href:e.url},e.label,e.label)},renderAdditionalLinks:function(){var e=this,t=this.props.retailerLinks.additional;return this.state.menuOpen?o("div",{className:"buttonGroup__dropdownMenu gr-box gr-box--withShadowLarge"},void 0,t.map(function(t){return e.renderBuyLink(t)})):null},render:function(){var e=this.props.retailerLinks.preferred,t=this.props.retailerLinks.additional;return(0,i.isEmpty)(t)?o("div",{className:"u-marginTopXSmall"},void 0,o("a",{className:"gr-button",href:e.url,target:"_blank","aria-label":"Buy this e-book on "+e.label},void 0,e.label)):o("div",{},void 0,o("div",{className:"buttonGroup u-marginTopXSmall"},void 0,o("a",{className:"buttonGroup__button buttonGroup__button--first",href:e.url,target:"_blank","aria-label":"Buy this e-book on "+e.label},void 0,e.label),o("button",{className:"buttonGroup__button buttonGroup__button--last",onClick:this.toggleMenuOpen,"aria-label":"Click to show additional retailers for this e-book"},void 0,"▾"),this.renderAdditionalLinks()))}})},{"../gr_component_factory":91,classnames:"classnames",lodash:"lodash"}],63:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=e("../time/relative_time"),i=s(a),l=e("../../modules/deals/deals_helper"),u=function(e){return o("span",{className:"gr-deal__expirationDate"},void 0,"Expires ",o(i["default"],{time:e,longFormat:!0}))},d=function(e){return o("span",{className:"gr-deal__expirationDate"},void 0,"Exp. ",o(i["default"],{time:e}))},c=function(e){var t=e.expirationDate,r=e.size;return r===l.LAYOUT_SIZE.WIDE?u(t):d(t)};c.propTypes={expirationDate:n.PropTypes.string.isRequired,size:n.PropTypes.string},r["default"]=c},{"../../modules/deals/deals_helper":11,"../time/relative_time":145,react:"react"}],64:[function(e,t,r){"use strict";var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),n=function(e){var t=parseFloat(e);return isNaN(t)||0>=t?"FREE":"$"+e},a=function(e){var t=e.dealPrice,r=e.listPrice;return s("span",{},void 0,s("span",{className:"gr-deal__price__deal u-marginRightXSmall"},void 0,n(t)),s("span",{className:"gr-deal__price__original"},void 0,"Regular Price*: ",s("strike",{},void 0,n(r))))};a.propTypes={dealPrice:o.PropTypes.string.isRequired,listPrice:o.PropTypes.string.isRequired},r["default"]=a},{react:"react"}],65:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.DealTag=r.TAG_CLASSES=r.TAG_TEXT=r.TAG_TYPE=void 0;var n=e("react"),a=e("classnames"),i=s(a),l=r.TAG_TYPE={WTR:"wtr",AUTHOR_FOLLOW:"author",FANTASY_AND_SCI_FI:"Fantasy & Science Fiction"},u=r.TAG_TEXT={};u[l.WTR]="You Want to Read",u[l.AUTHOR_FOLLOW]="Author You Follow",u[l.FANTASY_AND_SCI_FI]="Fantasy & Sci-Fi";var d=r.TAG_CLASSES={};d[l.WTR]="gr-deal__tag__green",d[l.AUTHOR_FOLLOW]="gr-deal__tag__brown";var c=function(e){return u[e]||e},f=r.DealTag=function(e){var t=e.text,r=(0,i["default"])("gr-deal__tag",d[t]);return o("div",{className:r},void 0,c(t))};f.propTypes={text:n.PropTypes.string.isRequired},r["default"]=f},{classnames:"classnames",react:"react"}],66:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=e("./deal_tag"),i=s(a),l=e("lodash"),u=function(e){var t=e.tags,r=t;return t.length>4&&(r=t.slice(0,4)),o("div",{},void 0,(0,l.map)(r,function(e){return o(i["default"],{text:e},e)}))};u.propTypes={tags:n.PropTypes.array},r["default"]=u},{"./deal_tag":65,lodash:"lodash",react:"react"}],67:[function(e,t,r){"use strict";var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),n=e("lodash"),a=e("../../modules/deals/deals_helper"),i=function(e){return s("div",{className:"gr-dealsCategoryExplorer u-bottomGrayBorder u-paddingBottomSmall"
},void 0,s("h3",{className:"gr-h3 u-marginTopNone"},void 0,"Explore by Category"),s("ul",{className:"u-unstyledListItem"},void 0,s("li",{},"home",e.selectedCategory?s("a",{href:e.activeDealsUrl},void 0,"All Deals"):s("span",{className:"u-defaultType u-fontBold"},void 0,"All Deals")),(0,n.map)(e.categories,function(t){return s("li",{},t.name,e.selectedCategory&&e.selectedCategory.url===t.url?s("span",{className:"u-defaultType u-fontBold"},void 0,t.name):s("a",{href:t.url},void 0,t.name))})))},l=function(e){window.location.href=e.target.value},u=function(e){return s("div",{className:"gr-dealsCategoryExplorer u-paddingBottomSmall"},void 0,s("select",{defaultValue:e.selectedCategory&&e.selectedCategory.url||"",onChange:l},void 0,s("option",{value:"",disabled:!0},void 0,"Browse by Category"),(0,n.map)(e.categories,function(e){return s("option",{value:e.url},e.name,e.name)})))},d=function(e){return e.size===a.LAYOUT_SIZE.WIDE?i(e):u(e)};d.propTypes={categories:o.PropTypes.array,selectedCategory:o.PropTypes.object,activeDealsUrl:o.PropTypes.string,size:o.PropTypes.string},r["default"]=d},{"../../modules/deals/deals_helper":11,lodash:"lodash",react:"react"}],68:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=e("lodash"),i=e("classnames"),l=s(i),u=e("./deals_list"),d=s(u),c=function(e){return o("div",{className:"gr-metaText u-marginTopMedium u-marginBottomHuge"},void 0,"Sorry, there aren't any Deals in '",e.selectedCategory.name,"' right now. ",o("a",{href:e.activeDealsUrl},void 0,"Check out our latest Deals."))},f=function(e){var t=void 0;return t=e.signedIn?o("span",{},void 0,o("p",{},void 0,"There are no active deals on your Want to Read shelf or by Authors you follow."),o("p",{},void 0,"Tell us more about the types of Genres you like to read, so that we can improve our recommendations to you!")):o("span",{},void 0,"Create a Goodreads account to set your reading preferences and get personalized recommendations!"),o("div",{className:"u-marginTopMedium u-marginBottomHuge"},void 0,o("div",{className:"gr-metaText"},void 0,t),o("a",{className:"gr-button u-marginTopMedium",href:e.settingsUrl},void 0,"Subscribe to Goodreads Deals"))},p=function(e){var t=void 0;t=(0,a.isEmpty)(e.deals)?"Recommended for You"===e.selectedCategory.name?f(e):c(e):o(d["default"],{deals:e.deals,size:e.size});var r=(0,l["default"])("u-paddingTopSmall",e.className);return o("div",{className:r},void 0,t)};p.propTypes={deals:n.PropTypes.array,size:n.PropTypes.string,selectedCategory:n.PropTypes.object,signedIn:n.PropTypes.bool,settingsUrl:n.PropTypes.string,activeDealsUrl:n.PropTypes.string},r["default"]=p},{"./deals_list":73,classnames:"classnames",lodash:"lodash",react:"react"}],69:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=e("lodash"),i=e("./deals_category_explorer"),l=s(i),u=e("./deals_category_list"),d=s(u),c=e("./deals_legalese"),f=s(c),p=e("./deals_ctas"),m=s(p),_=e("../../modules/deals/deals_helper"),h=function(e){var t=(0,a.flatten)(e.deals);return o("div",{},void 0,o("div",{},void 0,o("a",{href:e.activeDealsUrl},void 0,"Goodreads Deals")),o("div",{className:"gr-deals--desktop gr-deals--desktop__content620 u-paddingLeftNone"},void 0,o("h1",{className:"pageHeader textColor"},void 0,e.selectedCategory.name),o(d["default"],{deals:t,size:_.LAYOUT_SIZE.WIDE,selectedCategory:e.selectedCategory,signedIn:e.signedIn,settingsUrl:e.settingsUrl,activeDealsUrl:e.activeDealsUrl,className:"u-topGrayBorder"}),(0,a.isEmpty)(t)?null:o(f["default"],{})),o("div",{className:"gr-deals--desktop gr-deals--desktop__content300"},void 0,o("div",{className:"u-marginTopXSmall"},void 0,o(l["default"],{categories:e.categories,selectedCategory:e.selectedCategory,activeDealsUrl:e.activeDealsUrl,size:_.LAYOUT_SIZE.WIDE}),o(m["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl}))),o("div",{className:"u-clearBoth"}))},g=function(e){return o("div",{},void 0,o("div",{className:"u-marginBottomMedium"},void 0,o("a",{href:e.activeDealsUrl},void 0,"Goodreads Deals")),o("div",{className:"u-bottomGrayBorder"},void 0,o(l["default"],{categories:e.categories,selectedCategory:e.selectedCategory,activeDealsUrl:e.activeDealsUrl,size:_.LAYOUT_SIZE.NARROW}),o(d["default"],{deals:(0,a.flatten)(e.deals),size:_.LAYOUT_SIZE.NARROW,selectedCategory:e.selectedCategory,signedIn:e.signedIn,settingsUrl:e.settingsUrl,activeDealsUrl:e.activeDealsUrl})),o("div",{className:"gr-dealsCtas--mobile u-paddingLeftMedium u-paddingRightMedium"},void 0,o(m["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl})),o(f["default"],{}))},v=function(e){return o("div",{className:"gr-deals"},void 0,o("div",{className:"visibleWide"},void 0,h(e)),o("div",{className:"visibleNarrow"},void 0,g(e)))};v.propTypes={deals:n.PropTypes.array,categories:n.PropTypes.array,selectedCategory:n.PropTypes.object,subscribed:n.PropTypes.bool,signedIn:n.PropTypes.bool,aboutUrl:n.PropTypes.string,settingsUrl:n.PropTypes.string,activeDealsUrl:n.PropTypes.string},r["default"]=v},{"../../modules/deals/deals_helper":11,"./deals_category_explorer":67,"./deals_category_list":68,"./deals_ctas":70,"./deals_legalese":72,lodash:"lodash",react:"react"}],70:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n),i=e("./deals_subscribe_banner"),l=s(i);r["default"]=a["default"].createClass({displayName:"DealsCtas",propTypes:{subscribed:React.PropTypes.bool,aboutUrl:React.PropTypes.string,settingsUrl:React.PropTypes.string},renderSettingsLinks:function(){return o("div",{},void 0,o("a",{href:this.props.aboutUrl,className:"u-displayBlock u-marginBottomSmall"},void 0,"About Goodreads Deals"),o("a",{href:this.props.settingsUrl,className:"u-displayBlock"},void 0,"Update Your Settings"))},renderSubscribeCta:function(){return o(l["default"],{aboutUrl:this.props.aboutUrl,signUpUrl:this.props.settingsUrl})},render:function(){return o("div",{className:"u-paddingTopMedium u-paddingBottomMedium"},void 0,this.props.subscribed?this.renderSettingsLinks():this.renderSubscribeCta())}})},{"../gr_component_factory":91,"./deals_subscribe_banner":75}],71:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=e("./deals_welcome_message"),i=s(a),l=e("./deals_lists"),u=s(l),d=e("./deals_category_explorer"),c=s(d),f=e("./deals_legalese"),p=s(f),m=e("./deals_ctas"),_=s(m),h=e("../../modules/deals/deals_helper"),g=function(e){return o("div",{},void 0,o("div",{className:"u-bottomGrayBorder"},void 0,o("h1",{className:"pageHeadline"},void 0,"Goodreads Deals"),e.customHeader?o("h3",{className:"gr-h3"},void 0,"Celebrate Summer Reading with Deals You'll Love!"):null,o(i["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl}),o(c["default"],{categories:e.categories,selectedCategory:e.selectedCategory,size:h.LAYOUT_SIZE.NARROW}),o(u["default"],{deals:e.deals,categories:e.categories,size:h.LAYOUT_SIZE.NARROW})),o("div",{className:"gr-dealsCtas--mobile u-paddingLeftMedium u-paddingRightMedium"},void 0,o(_["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl})),o(p["default"],{}))},v=function(e){return o("div",{},void 0,o("h1",{className:"pageHeader textColor"},void 0,"Goodreads Deals"),e.customHeader?o("h3",{className:"gr-h3"},void 0,"Celebrate Summer Reading with Deals You'll Love!"):null,o("div",{className:"gr-deals--desktop gr-deals--desktop__content620 u-paddingLeftNone"},void 0,o(i["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl}),o(u["default"],{deals:e.deals,categories:e.categories,size:h.LAYOUT_SIZE.WIDE}),o(p["default"],{})),o("div",{className:"gr-deals--desktop gr-deals--desktop__content300"},void 0,o(c["default"],{categories:e.categories,selectedCategory:e.selectedCategory,size:h.LAYOUT_SIZE.WIDE}),o(_["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl})),o("div",{className:"u-clearBoth"}))},y=function(e){return o("div",{className:"gr-deals"},void 0,o("div",{className:"visibleWide"},void 0,v(e)),o("div",{className:"visibleNarrow"},void 0,g(e)))};y.propTypes={deals:n.PropTypes.array,categories:n.PropTypes.array,selectedCategory:n.PropTypes.object,subscribed:n.PropTypes.bool,aboutUrl:n.PropTypes.string,settingsUrl:n.PropTypes.string},r["default"]=y},{"../../modules/deals/deals_helper":11,"./deals_category_explorer":67,"./deals_ctas":70,"./deals_legalese":72,"./deals_lists":74,"./deals_welcome_message":76,react:"react"}],72:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n);r["default"]=a["default"].createClass({displayName:"DealsLegalese",render:function(){return o("div",{className:"u-textAlignCenter u-topGrayBorder u-paddingTopMedium u-paddingBottomXSmall"},void 0,o("div",{className:"u-marginRightMedium u-marginLeftMedium"},void 0,o("div",{},void 0,o("small",{},void 0,"*Regular price provided by publisher or as shown on Amazon.com.")),o("small",{},void 0,"Prices and availability were accurate at the time the deal was featured. However, they may differ from those you see when you visit the retailer websites. The end date for the deal is provided by the publisher, and is subject to change.")))}})},{"../gr_component_factory":91}],73:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),a=e("react"),i=e("./deal"),l=s(i),u=e("moment"),d=s(u),c=function(e){var t=e.deals,r=e.listName,s=e.size,a=(0,d["default"])();return o("div",{className:"gr-dealsList u-paddingBottomSmall"},void 0,r?o("h3",{className:"gr-h3 gr-dealsList__listName u-marginTopNone"},r,r):null,(0,n.map)(t,function(e){return a.isBefore(e.expirationDate)?o("div",{className:"gr-dealsList__listItem"},e.uri,o(l["default"],{deal:e,size:s})):null}))};c.propTypes={deals:a.PropTypes.array.isRequired,listName:a.PropTypes.string,size:a.PropTypes.string},r["default"]=c},{"./deal":61,lodash:"lodash",moment:"moment",react:"react"}],74:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){function e(e,t){var r=[],s=!0,o=!1,n=void 0;try{for(var a,i=e[Symbol.iterator]();!(s=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);s=!0);}catch(l){o=!0,n=l}finally{try{!s&&i["return"]&&i["return"]()}finally{if(o)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=e("lodash"),l=e("./deals_list"),u=s(l),d=function(e){return n("div",{},void 0,(0,i.map)((0,i.zip)(e.categories,e.deals),function(t){var r=o(t,2),s=r[0],a=r[1];return(0,i.isEmpty)(a)?null:n(u["default"],{listName:s.name,deals:a,size:e.size},s.name)}))};d.propTypes={deals:a.PropTypes.array,categories:a.PropTypes.array,size:a.PropTypes.string},r["default"]=d},{"./deals_list":73,lodash:"lodash",react:"react"}],75:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n);r["default"]=a["default"].createClass({displayName:"DealsSubscribeBanner",propTypes:{aboutUrl:React.PropTypes.string,signUpUrl:React.PropTypes.string},render:function(){return o("div",{className:"dealsSubscribeBanner"},void 0,o("div",{className:"u-fontBold u-marginBottomTiny"},void 0,"Like what you see?"),"Get personalized ebook deals in your inbox every day!",o("div",{className:"u-marginTopSmall u-marginBottomSmall"},void 0,o("a",{href:this.props.signUpUrl,className:"gr-button gr-button--dark gr-button--fullWidth"},void 0,"Subscribe for Free")),o("a",{href:this.props.aboutUrl},void 0,"Learn More"))}})},{"../gr_component_factory":91}],76:[function(e,t,r){"use strict";var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),n=function(e){var t=e.subscribed,r=e.aboutUrl;return t?s("div",{}):s("div",{className:"gr-infoMessageBox u-marginBottomMedium"},void 0,s("h3",{className:"gr-h3"},void 0,"Welcome to Goodreads!"),s("div",{},void 0,"Your home for exceptional deals on ebooks you’ll love, including selections based on your Want to Read shelf, authors you follow, and preferred genres."),s("div",{className:"u-marginTopSmall"},void 0,s("a",{href:r},void 0,"Learn More")))};n.propTypes={subscribed:o.PropTypes.bool,aboutUrl:o.PropTypes.string},r["default"]=n},{react:"react"}],77:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=e("./gr_component_factory"),u=s(l);r["default"]=u["default"].createClass({displayName:"DotSeparatedElements",propTypes:{elements:a["default"].PropTypes.arrayOf(a["default"].PropTypes.oneOfType([a["default"].PropTypes.element,a["default"].PropTypes.string])).isRequired,separator:a["default"].PropTypes.element},getDefaultProps:function(){return{separator:o("span",{},void 0," · ")}},joinElementsWithSeparator:function(){var e=this,t=(0,i.compact)(this.props.elements);return(0,i.transform)(t,function(r,s,o){r.push(s),o+1!==t.length&&r.push(e.props.separator)})},render:function(){return o("span",{className:this.props.className},void 0,(0,i.map)(this.joinElementsWithSeparator(),function(e,t){return o("span",{},t,e)}))}})},{"./gr_component_factory":91,lodash:"lodash",react:"react"}],78:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./gr_component_factory"),l=s(i);r["default"]=l["default"].createClass({displayName:"DropDownList",propTypes:{showMoreLink:a["default"].PropTypes.bool,moreLinkURL:a["default"].PropTypes.string,moreLinkText:a["default"].PropTypes.string},getDefaultProps:function(){return{showMoreLink:!1,moreLinkURL:null,moreLinkText:"…More"}},render:function(){return o("div",{},void 0,this.props.children,this.props.showMoreLink&&null!==this.props.moreLinkURL?o("a",{className:"dropDownList__listItem--moreLink",href:this.props.moreLinkURL},void 0,this.props.moreLinkText):null)}})},{"./gr_component_factory":91,react:"react"}],79:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=s(i),u=e("reflux"),d=s(u),c=e("./gr_component_factory"),f=s(c),p=e("../react_mixins/hover_intent"),m=s(p),_=e("classnames"),h=s(_),g=e("react-onclickoutside"),v=s(g),y=e("../modules/keys"),b=s(y),S=e("../react_stores/user_agent_capabilities_store"),T=s(S),k={HOVER:"hover",CLICK:"click"},P={LEFT:"left",RIGHT:"right"},N=100,w=N;r["default"]=f["default"].createClass({displayName:"Dropdown",mixins:[m["default"],v["default"],d["default"].connect(T["default"],"userAgentCapabilities")],propTypes:{alignment:a["default"].PropTypes.oneOf(l["default"].values(P)),fallbackUrl:a["default"].PropTypes.string,hoverTriggerClickUrl:a["default"].PropTypes.string,isInSiteHeader:a["default"].PropTypes.bool,onShowCallback:a["default"].PropTypes.func,tooltipText:a["default"].PropTypes.string,trigger:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]).isRequired,triggerEventType:a["default"].PropTypes.oneOf(l["default"].values(k))},statics:{TriggerEventTypes:k},getTriggerEventType:function(){return this.state.userAgentCapabilities.touch?k.CLICK:this.props.triggerEventType},getInitialState:function(){return{dropdownOpen:!1}},getDefaultProps:function(){return{triggerEventType:k.CLICK,alignment:P.LEFT}},hide:function(){this.setState({dropdownOpen:!1})},show:function(){this.setState({dropdownOpen:!0}),this.props.onShowCallback&&this.props.onShowCallback()},toggle:function(e){this.props.children&&e.preventDefault(),this.state.dropdownOpen?this.hide():this.show()},openList:function(e){b["default"].isDropdownOpenerKey(e.keyCode)?(e.preventDefault(),b["default"].isArrowDown(e.keyCode)?this.show():this.toggle(e)):b["default"].isDefaultCloserKey(e.keyCode)&&(e.preventDefault(),this.hide())},handleClickOutside:function(){this.state.userAgentCapabilities.touch||this.hide()},handleMouseEnter:function(){this.onEnterIntent(this.show,N)},handleMouseLeave:function(){this.onLeaveIntent(this.hide,w)},handleTriggerClick:function(e){return this.state.dropdownOpen&&this.props.triggerEventType===k.HOVER&&this.state.userAgentCapabilities.touch!==!0?void(this.props.hoverTriggerClickUrl||e.preventDefault()):void this.toggle(e)},triggerClasses:function(){return(0,h["default"])(this.withBemModifiers(["dropdown__trigger"]),{"dropdown__trigger--buttonReset":l["default"].isUndefined(this.props.fallbackUrl)},{"dropdown__trigger--triggerEventTypeHover":this.props.triggerEventType===k.HOVER},{"dropdown__trigger--personalNav":"true"===this.props.isInPersonalNav},{"dropdown__trigger--active":this.state.dropdownOpen},{"dropdown__trigger--personalNavActive":"true"===this.props.isInPersonalNav&&this.state.dropdownOpen},{"dropdown__trigger--activeSiteHeader":this.state.dropdownOpen&&this.props.isInSiteHeader})},renderTriggerButton:function(){return o("button",{className:this.triggerClasses(),"aria-haspopup":"true","aria-expanded":this.state.dropdownOpen,onClick:this.handleTriggerClick,onKeyDown:this.openList,title:this.props.tooltipText},void 0,this.props.trigger)},renderTriggerLink:function(){return o("a",{className:this.triggerClasses(),href:this.props.fallbackUrl,onClick:this.handleTriggerClick,onKeyDown:this.openList,role:"button","aria-haspopup":"true","aria-expanded":this.state.dropdownOpen,title:this.props.tooltipText},void 0,this.props.trigger)},render:function(){var e=(0,h["default"])(this.withBemModifiers("dropdown")),t=(0,h["default"])(this.withBemModifiers("dropdown__menu"),"gr-box gr-box--withShadowLarge",{"dropdown__menu--show":this.state.dropdownOpen}),r=l["default"].isUndefined(this.props.fallbackUrl)?this.renderTriggerButton():this.renderTriggerLink(),s=o("div",{className:t,role:"menu"},void 0,this.props.children);switch(this.getTriggerEventType()){case k.HOVER:return o("div",{className:e,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,r,s);case k.CLICK:return o("div",{className:e},void 0,r,s)}}})},{"../modules/keys":16,"../react_mixins/hover_intent":172,"../react_stores/user_agent_capabilities_store":192,"./gr_component_factory":91,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],80:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n);r["default"]=a["default"].createClass({displayName:"error_message.js",propTypes:{componentName:a["default"].PropTypes.string.isRequired},render:function(){return o("div",{className:"gr-errorMessage"},void 0,"There was an issue rendering ",this.props.componentName)}})},{react:"react"}],81:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../../../../gr_component_factory"),l=s(i),u=e("../../../../shared/gr_prop_types"),d=s(u),c=e("classnames"),f=s(c),p=e("../../../../author/author_badge"),m=s(p);r["default"]=l["default"].createClass({displayName:"UniversalSearchResultAuthor",propTypes:{result:d["default"].searchResults.author().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,f["default"])("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","searchResults__result");return o("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.result)}},void 0,o("img",{className:"gr-mediaBox__media",src:this.props.result.object.profileImage,alt:"Author pic"}),o("div",{className:"gr-mediaBox__desc"},void 0,o("div",{className:"gr-universalSearchResult__mainText gr-universalSearchResult__mainText--navbar u-defaultType"},void 0,this.props.result.object.name)),o("div",{className:"gr-universalSearchResult__secondaryText gr-universalSearchResult__secondaryText--navbar"},void 0,"Author",a["default"].createElement(m["default"],this.props.result.object)))}})},{"../../../../author/author_badge":52,"../../../../gr_component_factory":91,"../../../../shared/gr_prop_types":133,classnames:"classnames",react:"react"}],82:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../../../../gr_component_factory"),l=s(i),u=e("../../../../shared/gr_prop_types"),d=s(u),c=e("classnames"),f=s(c),p=e("../../../../author/author_badge"),m=s(p);r["default"]=l["default"].createClass({displayName:"UniversalSearchResultBook",propTypes:{result:d["default"].searchResults.book().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,f["default"])("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","gr-universalSearchResults__result");return o("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.result)}},void 0,o("img",{className:"gr-mediaBox__media",src:this.props.result.object.imageUrl,alt:"Cover pic"}),o("div",{className:"gr-mediaBox__desc"},void 0,o("div",{className:"gr-universalSearchResult__mainText gr-universalSearchResult__mainText--navbar u-defaultType"},void 0,this.props.result.object.title),o("div",{className:"gr-universalSearchResult__secondaryText gr-universalSearchResult__secondaryText--navbar"},void 0,"by ",this.props.result.object.authorName,a["default"].createElement(m["default"],this.props.result.object))))}})},{"../../../../author/author_badge":52,"../../../../gr_component_factory":91,"../../../../shared/gr_prop_types":133,classnames:"classnames",react:"react"}],83:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../../../../gr_component_factory"),l=s(i),u=e("../../../../shared/gr_prop_types"),d=s(u),c=e("classnames"),f=s(c);r["default"]=l["default"].createClass({displayName:"UniversalSearchResultUser",propTypes:{result:d["default"].searchResults.user().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,f["default"])("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","searchResults__result");return o("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.result)}},void 0,o("img",{className:"gr-mediaBox__media",src:this.props.result.object.profileImage,alt:"User pic"}),o("div",{className:"gr-mediaBox__desc"},void 0,o("div",{className:"gr-universalSearchResult__mainText gr-universalSearchResult__mainText--navbar u-defaultType"},void 0,this.props.result.object.name)),o("div",{className:"gr-universalSearchResult__secondaryText gr-universalSearchResult__secondaryText--navbar"},void 0,"Goodreads User"))}})},{"../../../../gr_component_factory":91,"../../../../shared/gr_prop_types":133,classnames:"classnames",react:"react"}],84:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("lodash"),u=s(l),d=e("../../../gr_component_factory"),c=s(d),f=e("reflux"),p=s(f),m=e("react-onclickoutside"),_=s(m),h=e("classnames"),g=s(h),v=e("../../../../modules/keys"),y=s(v),b=e("../../../../react_stores/experimental/search/universal_search_store_factory"),S=s(b),T=e("./universal_search_results"),k=s(T),P=e("../../../spinner"),N=s(P),w=e("../../../../react_mixins/factory_store_mixin"),R=s(w);r["default"]=c["default"].createClass({displayName:"UniversalSearch",mixins:[_["default"],p["default"].ListenerMixin,(0,
R["default"])(S["default"])],propTypes:{onChooseResult:i["default"].PropTypes.func.isRequired,maxResults:i["default"].PropTypes.number,searchPath:i["default"].PropTypes.string.isRequired,closeAfterResultChosen:i["default"].PropTypes.bool,autocompleteUrl:i["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{maxResults:7,closeAfterResultChosen:!1}},hide:function(){this.actions.setShowResultsContainer(!1)},handleClickOutside:function(){this.hide()},handleSearch:function(e){this.actions.search(e.target.value,this.props.autocompleteUrl,this.props.maxResults)},handleClick:function(e){u["default"].isEmpty(this.state.query)||this.handleSearch(e)},handleChoice:function(e){this.props.onChooseResult(e),this.props.closeAfterResultChosen&&this.hide()},handleKeyPress:function(e){var t=Math.min(this.props.maxResults,this.state.results.length);y["default"].isEnter(e.keyCode)&&null!==this.state.activeResult?(this.handleChoice(this.state.activeResult),e.preventDefault()):y["default"].isArrowDown(e.keyCode)?this.actions.selectNextResult(t):y["default"].isArrowUp(e.keyCode)?this.actions.selectPreviousResult(t):y["default"].isEscape(e.keyCode)&&this.hide()},renderInputIcon:function(){var e=(0,g["default"])("searchBox__icon",{"searchBox__icon--loadingSpinner":this.state.showLoadingSpinner,"searchBox__icon--magnifyingGlass gr-iconButton":!this.state.showLoadingSpinner});return this.state.showLoadingSpinner?n("span",{className:e},void 0,n(N["default"],{})):n("button",{type:"submit",className:e,"aria-label":"Search"})},render:function(){var e=(0,g["default"])(this.withBemModifiers("searchBox")),t=(0,g["default"])(this.withBemModifiers("searchBox__input"));return n("div",{acceptCharset:"UTF-8",className:e,onKeyDown:this.handleKeyPress},void 0,n("form",{autoComplete:"off",action:this.props.searchPath,role:"search","aria-label":"Search for books to add to your shelves"},void 0,n("input",{className:t,autoComplete:"off",name:"q",type:"text",placeholder:"Search books/authors","aria-label":"Search books",onClick:this.handleClick,onChange:this.handleSearch,"aria-controls":"searchResults"}),this.renderInputIcon(),this.state.showResultsContainer?i["default"].createElement(k["default"],o({},this.props,this.state,{onChooseResult:this.handleChoice,mouseoverAction:this.actions.selectSpecificResult})):null))}})},{"../../../../modules/keys":16,"../../../../react_mixins/factory_store_mixin":170,"../../../../react_stores/experimental/search/universal_search_store_factory":177,"../../../gr_component_factory":91,"../../../spinner":142,"./universal_search_results":85,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],85:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=s(i),u=e("classnames"),d=s(u),c=e("../../../drop_down_list"),f=s(c),p=e("./results/universal_search_result_book"),m=s(p),_=e("./results/universal_search_result_author"),h=s(_),g=e("./results/universal_search_result_user"),v=s(g),y=e("../../../shared/gr_prop_types"),b=s(y),S=e("../../../gr_component_factory"),T=s(S),k={author:h["default"],book:m["default"],friend:v["default"]};r["default"]=T["default"].createClass({displayName:"UniversalSearchResults",propTypes:{maxResults:a["default"].PropTypes.number.isRequired,query:a["default"].PropTypes.string,results:a["default"].PropTypes.array.isRequired,shelfName:a["default"].PropTypes.string,searchPath:a["default"].PropTypes.string,onChooseResult:a["default"].PropTypes.func.isRequired,mouseoverAction:a["default"].PropTypes.func.isRequired,activeResult:a["default"].PropTypes.oneOfType([b["default"].searchResults.author(),b["default"].searchResults.book(),b["default"].searchResults.user()])},renderLastSearchResultItem:function(e){var t=(0,d["default"])("gr-buttonAsLink","searchResults__lastItem",this.withBemElement("gr-universalSearchResults","lastItem"));return o("button",{className:t,type:"submit"},void 0,e)},renderResult:function(e){var t=this,r=k[e.type];return o("div",{className:(0,d["default"])("gr-universalSearchResults__item",{"gr-universalSearchResults__item--active":e===this.props.activeResult}),onMouseOver:function(){t.props.mouseoverAction(e)}},e.object.id,o(r,{result:e,onChooseResult:this.props.onChooseResult}))},render:function(){var e=this,t=(0,d["default"])(this.withBemModifiers("gr-universalSearchResults"),"gr-box","gr-box--withShadow");return o("div",{className:t,id:"universalSearchResults"+this.props.query+this.props.results.length,"aria-live":"polite","aria-label":"Universal search results"},void 0,o(f["default"],{maxListItems:this.props.maxResults},void 0,this.props.results.length>0?l["default"].map(l["default"].slice(this.props.results,0,this.props.maxResults),function(t){return e.renderResult(t)}):this.renderLastSearchResultItem('Search for "'+this.props.query+'"…'),this.props.results.length>0?this.renderLastSearchResultItem('See all results for "'+this.props.query+'"'):null))}})},{"../../../drop_down_list":78,"../../../gr_component_factory":91,"../../../shared/gr_prop_types":133,"./results/universal_search_result_author":81,"./results/universal_search_result_book":82,"./results/universal_search_result_user":83,classnames:"classnames",lodash:"lodash",react:"react"}],86:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=e("reflux"),u=s(l),d=e("../gr_component_factory"),c=s(d),f=e("../../react_stores/facebook_store"),p=s(f),m=e("../../react_actions/facebook_actions"),_=s(m),h=e("classnames"),g=s(h),v="Post to your facebook timeline";r["default"]=c["default"].createClass({mixins:[u["default"].connect(p["default"],"facebookStore")],displayName:"facebookTimelinePublishToggle",propTypes:{cogAction:a["default"].PropTypes.oneOf((0,i.values)(p["default"].COG_ACTIONS)),additionalText:a["default"].PropTypes.string},statics:{COG_ACTIONS:p["default"].COG_ACTIONS},enablePublishing:function(){_["default"].enablePublishPermission()},renderCheckbox:function(){var e=this,t=this.state.facebookStore;return o("input",{className:"facebookTimelinePublishToggle__checkBox",type:"checkbox",value:"1",checked:t.cog[this.props.cogAction],onChange:function(){_["default"].togglePublishPermission(e.props.cogAction)}})},renderFacebookIcon:function(){var e=this.state.facebookStore,t=e.cog[this.props.cogAction]?"Enabled":"Disabled";return o("img",{className:"facebookTimelinePublishToggle__icon",src:e.cog.enabled?e.images.fbIconUrl:e.images.fbIconDisabledUrl,alt:t+" Facebook timeline posting permission"})},renderPublishingEnabledState:function(){return o("label",{"aria-label":v},void 0,this.renderCheckbox(),this.renderFacebookIcon())},renderPublishingDisabledState:function(){return o("button",{className:"gr-iconButton",onClick:this.enablePublishing,"aria-label":v},void 0,this.renderFacebookIcon())},render:function(){var e=(0,g["default"])(this.withBemModifiers("facebookTimelinePublishToggle")),t=this.state.facebookStore;return t.isUserConnected?o("div",{className:e},void 0,(0,i.isEmpty)(this.props.additionalText)?null:o("span",{className:"u-marginRightTiny"},void 0,this.props.additionalText),t.cog.enabled?this.renderPublishingEnabledState():this.renderPublishingDisabledState()):null}})},{"../../react_actions/facebook_actions":27,"../../react_stores/facebook_store":178,"../gr_component_factory":91,classnames:"classnames",lodash:"lodash",react:"react",reflux:"reflux"}],87:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=s(i),u=e("./gr_component_factory"),d=s(u),c=e("reflux"),f=s(c),p=e("./genre_checkbox"),m=s(p),_=e("./../react_actions/modal_actions"),h=s(_),g=e("../react_actions/favorite_genres_form_actions"),v=s(g),y=e("../react_stores/favorite_genres_form_store"),b=s(y);r["default"]=d["default"].createClass({displayName:"FavoriteGenresForm",mixins:[f["default"].connect(b["default"],"favoriteGenresFormStore")],propTypes:{favoriteGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired},getDefaultProps:function(){return{favoriteGenres:[]}},onSubmit:function(e){v["default"].submitSelectedGenres(),h["default"].closeModal(),e.preventDefault()},renderGenreCheckboxes:function(){var e=this;return o("div",{className:"gr-genresForm__checkBoxes"},void 0,l["default"].map(this.props.genres,function(t){return o(m["default"],{genre:t.name,isFavorited:l["default"].includes(e.state.favoriteGenresFormStore.selectedGenres,t.name)},t.name)}))},render:function(){return o("div",{className:"gr-genresForm"},void 0,o("div",{className:"gr-genresForm__title"},void 0,"Follow Your Favorite Genres"),o("div",{className:"gr-genresForm__description"},void 0,"We use your favorite genres to make better book recommendations and tailor what you see in your Updates feed."),o("form",{action:"/user/edit_fav_genres","data-remote":"true",method:"post"},void 0,this.renderGenreCheckboxes(),o("button",{type:"submit",onClick:this.onSubmit,className:"gr-button gr-button--large"},void 0,"Save")))}})},{"../react_actions/favorite_genres_form_actions":29,"../react_stores/favorite_genres_form_store":179,"./../react_actions/modal_actions":33,"./genre_checkbox":90,"./gr_component_factory":91,lodash:"lodash",react:"react",reflux:"reflux"}],88:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("classnames"),d=s(u);r["default"]=l["default"].createClass({displayName:"FlagForAbuseLink",propTypes:{flagForAbuseUrl:a["default"].PropTypes.string.isRequired},render:function(){var e=(0,d["default"])("gr-metaText","gr-hyperlink--naked","gr-hyperlink","gr-flag");return o("a",{href:this.props.flagForAbuseUrl,className:e},void 0,"Flag")}})},{"../gr_component_factory":91,classnames:"classnames",react:"react"}],89:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=e("classnames"),u=s(l),d=e("./close_button"),c=s(d),f={ERROR:"error",INFO:"info",NOTICE_DEPRECATED:"notice",SUCCESS:"success",WARNING:"warning"};r["default"]=a["default"].createClass({displayName:"FlashMessage",propTypes:{category:a["default"].PropTypes.oneOf((0,i.values)(f)),message:a["default"].PropTypes.string.isRequired},getInitialState:function(){return{isVisible:!0}},hideMessage:function(){this.setState({isVisible:!1})},flashMessageMarkup:function(){return{__html:this.props.message}},render:function(){if((0,i.isEmpty)(this.props.message))return null;var e=(0,u["default"])("gr-flashMessage",{"gr-flashMessage--dismissed":!this.state.isVisible,"gr-flashMessage--error":this.props.category===f.ERROR,"gr-flashMessage--info":this.props.category===f.INFO,"gr-flashMessage--warning":this.props.category===f.WARNING,"gr-flashMessage--success":this.props.category===f.SUCCESS});return o("div",{className:e,role:"alert"},void 0,o(c["default"],{action:this.hideMessage,className:"gr-flashMessage__dismissButton"}),o("span",{dangerouslySetInnerHTML:this.flashMessageMarkup()}))}})},{"./close_button":55,classnames:"classnames",lodash:"lodash",react:"react"}],90:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./gr_component_factory"),l=s(i),u=e("classnames"),d=s(u),c=e("../react_actions/favorite_genres_form_actions"),f=s(c);r["default"]=l["default"].createClass({displayName:"GenreCheckbox",propTypes:{genre:a["default"].PropTypes.string,isFavorited:a["default"].PropTypes.bool.isRequired},onCheckboxChange:function(){this.props.isFavorited?f["default"].deselectFavoriteGenre(this.props.genre):f["default"].selectFavoriteGenre(this.props.genre)},render:function(){var e=(0,d["default"])("gr-genresForm__genreLabel",{"gr-genresForm__genreLabel--selected":this.props.isFavorited});return o("label",{className:e},void 0,o("input",{name:"favorites["+this.props.genre+"]",type:"hidden",value:"false"}),a["default"].createElement("input",{name:"favorites["+this.props.genre+"]",type:"checkbox",value:"true","data-genre":this.props.genre,ref:"checkbox",defaultChecked:this.props.isFavorited,onChange:this.onCheckboxChange}),o("span",{className:"u-verticalAlignMiddle u-marginLeftTiny"},void 0,this.props.genre))}})},{"../react_actions/favorite_genres_form_actions":29,"./gr_component_factory":91,classnames:"classnames",react:"react"}],91:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),a=e("react"),i=s(a),l=e("../react_mixins/bem_modifiers"),u=s(l),d=e("../react_mixins/deploy_service"),c=s(d),f=e("react-addons-pure-render-mixin"),p=s(f),m=e("../react_mixins/tracking_data_attributes_mixin"),_=s(m),h=e("./error_message"),g=s(h),v=e("../modules/env_utils"),y=s(v),b=e("../modules/gr_error_reporting"),S=s(b),T=[p["default"],u["default"],c["default"],_["default"]],k={showErrorMessage:"production"===y["default"].DEVELOPMENT},P=function(e,t){var r=e.render;t=(0,n.merge)({},k,t),e.render=function(){try{return r.apply(this,arguments)}catch(s){return S["default"].notifyException(s,"Failed to render "+e.displayName),t.showErrorMessage?o(g["default"],{componentName:e.displayName}):null}}},N=function(e){if((0,n.isEmpty)(e))throw new Error("GrError: Missing component name. Please make sure `displayName` attribute is defined while creating a React class using GrComponentFactory.createClass.")},w=function(e){var t=e.mixins||[];e.mixins=t.concat(T)},R=function(e,t){return w(e),"production"!==y["default"].TEST&&P(e,t),e};r["default"]={createClass:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return N(e.displayName),i["default"].createClass(R(e,t))}}},{"../modules/env_utils":13,"../modules/gr_error_reporting":15,"../react_mixins/bem_modifiers":168,"../react_mixins/deploy_service":169,"../react_mixins/tracking_data_attributes_mixin":173,"./error_message":80,lodash:"lodash",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],92:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("../shape_icon"),d=s(u),c=e("../../modules/shape_icon_values");r["default"]=l["default"].createClass({displayName:"GroupIcon",propTypes:{group:a["default"].PropTypes.shape({name:a["default"].PropTypes.string.isRequired,iconUrl:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired}).isRequired,includeLink:a["default"].PropTypes.bool,size:a["default"].PropTypes.oneOf([c.ICON_SIZES.SMALL,c.ICON_SIZES.MEDIUM,c.ICON_SIZES.LARGE])},getDefaultProps:function(){return{includeLink:!1,size:c.ICON_SIZES.SMALL}},render:function(){var e=this.props.group;return o(d["default"],{imageUrl:e.iconUrl,imageAlt:e.name,linkUrl:e.url,shape:c.ICON_SHAPES.ROUND_SQUARE,size:this.props.size,includeLink:this.props.includeLink})}})},{"../../modules/shape_icon_values":18,"../gr_component_factory":91,"../shape_icon":129,react:"react"}],93:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("../modal_trigger"),d=s(u),c=e("../modal"),f=s(c),p=e("../spinner"),m=s(p),_=e("../../modules/ajax/ajax_helper");r["default"]=l["default"].createClass({displayName:"PreviewBroadcast",propTypes:{previewBroadcastURL:a["default"].PropTypes.string.isRequired},getInitialState:function(){return{fetching:!1}},requestPreview:function(e,t){var r=this;(0,_.httpRequest)(this.props.previewBroadcastURL,{method:"GET",data:{message:{subject:e,body:t}}}).done(function(e){r.setState({modalHTML:{__html:e},fetching:!1})}).fail(function(){r.setState({modalHTML:{__html:"<div>There was an error processing your request.</div>"},fetching:!1})})},handlePreview:function(){var e=this,t=document.getElementById("message_body").value,r=document.getElementById("message_subject").value;this.setState({fetching:!0},function(){return e.requestPreview(r,t)})},renderModal:function(){return this.state.fetching?null:o(f["default"],{id:"previewBroadcast",centered:!0,bemModifiers:"previewBroadcast"},void 0,o("div",{className:"modalMessageBox"},void 0,o("h3",{className:"modalMessageBox__headerText"},void 0,"Message Preview"),o("div",{dangerouslySetInnerHTML:this.state.modalHTML})))},renderModalTrigger:function(){return this.state.fetching?o(m["default"],{isSmall:!0}):o(d["default"],{id:"previewBroadcast"},void 0,o("button",{className:"gr-buttonAsLink previewBroadcast__linkText",onClick:this.handlePreview},void 0,"(preview)"))},render:function(){var e=this.renderModal(),t=this.renderModalTrigger();return o("div",{className:"previewBroadcast"},void 0,o("div",{className:"previewBroadcast__openPreviewContainer"},void 0,t,e))}})},{"../../modules/ajax/ajax_helper":5,"../gr_component_factory":91,"../modal":117,"../modal_trigger":118,"../spinner":142,react:"react"}],94:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("../dropdown"),f=s(c),p=e("./favorite_genres_pane"),m=s(p),_=e("./featured_genres"),h=s(_),g=e("./genre_list"),v=s(g),y=e("../menu_link"),b=s(y),S=e("../../react_actions/featured_genres_actions"),T=s(S);r["default"]=d["default"].createClass({displayName:"BrowseMenu",propTypes:{adId:a["default"].PropTypes.string,browseUrl:a["default"].PropTypes.string.isRequired,choiceAwardsUrl:a["default"].PropTypes.string.isRequired,dealsUrl:a["default"].PropTypes.string.isRequired,editorsPicksUrl:a["default"].PropTypes.string.isRequired,favoriteGenres:a["default"].PropTypes.array,sponsoredGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired,giveawayUrl:a["default"].PropTypes.string.isRequired,listUrl:a["default"].PropTypes.string.isRequired,newReleasesUrl:a["default"].PropTypes.string.isRequired,recommendationsUrl:a["default"].PropTypes.string.isRequired,blogUrl:a["default"].PropTypes.string.isRequired,signedIn:a["default"].PropTypes.bool},render:function(){var e=function(){T["default"].requestFeaturedBooks()},t=o("span",{},void 0,"Browse ▾");return o(f["default"],{trigger:t,triggerEventType:f["default"].TriggerEventTypes.HOVER,fallbackUrl:this.props.browseUrl,bemModifiers:"siteHeader",isInSiteHeader:!0,onShowCallback:e},void 0,o("div",{className:"siteHeader__browseMenuDropdown"},void 0,o("ul",{className:"siteHeader__subNav"},void 0,o(b["default"],{href:this.props.recommendationsUrl,linkText:"Recommendations",linkClass:"siteHeader__subNavLink"}),o(b["default"],{href:this.props.dealsUrl,linkText:"Deals",linkClass:"siteHeader__subNavLink"}),o(b["default"],{href:this.props.choiceAwardsUrl,linkText:"Choice Awards",linkClass:"siteHeader__subNavLink"}),o(b["default"],{href:this.props.giveawayUrl,linkText:"Giveaways",linkClass:"siteHeader__subNavLink"}),o(b["default"],{href:this.props.newReleasesUrl,linkText:"New Releases",linkClass:"siteHeader__subNavLink"}),o(b["default"],{href:this.props.listUrl,linkText:"Lists",linkClass:"siteHeader__subNavLink"}),o(b["default"],{href:this.props.editorsPicksUrl,linkText:"News & Interviews",linkClass:"siteHeader__subNavLink"}),o(b["default"],{href:this.props.browseUrl,linkText:"Explore",linkClass:"siteHeader__subNavLink"}),o(b["default"],{href:this.props.blogUrl,linkText:"Blog",linkClass:"siteHeader__subNavLink"}),o("div",{className:"siteHeader__sponsoredFillSpace"}),o(b["default"],{href:"https://www.goodreads.com/track/daily_click?pmet_click_tid=AEP_Desktop_Header_BrowseEntrypoint&tid=AEP_Desktop_Header_BrowseEntrypoint&url=https://www.goodreads.com/audible",linkText:o("div",{},void 0,o("div",{className:"siteHeader__navDivider"}),o("span",{},void 0,"Listen with Audible")),linkClass:"siteHeader__sponsoredNavLink"}),o("div",{className:"siteHeader__sponsoredLabel"},void 0,o("span",{className:"siteHeader__sponsoredIcon gr-newsfeedItem__sponsoredBadgeIcon featuredGenres__sponsoredIcon"}),o("span",{className:"featuredGenres__sponsoredLabel siteHeader__sponsoredText"},void 0,"Sponsored"))),this.renderSpotlight()))},classesWithModifier:function(e){return"siteHeader__spotlight siteHeader__spotlight--"+e},renderGenreList:function(){return o("div",{className:this.classesWithModifier("withoutSubMenu")},void 0,o(v["default"],{genres:this.props.genres}))},renderFeaturedGenres:function(){return o("div",{className:this.classesWithModifier("browseMenu")},void 0,o(h["default"],{favoriteGenres:this.props.favoriteGenres,sponsoredGenres:this.props.sponsoredGenres,adId:this.props.adId}))},renderFavoriteGenresPane:function(){return o("div",{className:this.classesWithModifier("withoutSubMenu")},void 0,o(m["default"],{genres:this.props.genres}))},renderSpotlight:function(){return this.props.signedIn?l["default"].isEmpty(this.props.favoriteGenres)?this.renderFavoriteGenresPane():this.renderFeaturedGenres():this.renderGenreList()}})},{"../../react_actions/featured_genres_actions":30,"../dropdown":79,"../gr_component_factory":91,"../menu_link":116,"./favorite_genres_pane":99,"./featured_genres":100,"./genre_list":103,lodash:"lodash",react:"react"}],95:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("reflux"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("../dropdown"),f=s(c),p=e("../menu_link"),m=s(p),_=e("../ads/google_banner_ad"),h=s(_),g=e("../../react_stores/google_ads_store"),v=s(g),y=e("../../react_actions/google_ads_actions"),b=s(y);r["default"]=d["default"].createClass({displayName:"CommunityMenu",mixins:[l["default"].connect(v["default"],"googleAdStore")],propTypes:{communityUrl:a["default"].PropTypes.string.isRequired,eventUrl:a["default"].PropTypes.string.isRequired,featuredAskAuthorUrl:a["default"].PropTypes.string.isRequired,groupsUrl:a["default"].PropTypes.string.isRequired,discussionsUrl:a["default"].PropTypes.string.isRequired,peopleUrl:a["default"].PropTypes.string.isRequired,quizzesUrl:a["default"].PropTypes.string.isRequired,quotesUrl:a["default"].PropTypes.string.isRequired,storiesUrl:a["default"].PropTypes.string.isRequired,triviaUrl:a["default"].PropTypes.string.isRequired},renderSpotlightAd:function(){if(this.isFeatureEnabled("ads_uxo_nav_spotlight")){var e=v["default"].findAd(/goodr.nav.browse.300x250/);if(e)return o("div",{className:"siteHeader__spotlight--withoutSubMenu siteHeader__spotlight--withSpotlightAd googleAd"},void 0,o("div",{className:"spotlightAd"},void 0,o("div",{className:"featuredGenres__book"},void 0,o("div",{className:"u-marginTopTiny"},void 0,o(h["default"],{adId:e.id,delayImpressionTracking:!0})))))}},render:function(){var e=o("span",{},void 0,"Community ▾"),t=function(){var e=v["default"].findAd(/goodr.nav.browse.300x250/);e&&b["default"].trackImpression(e.id,e.ad.impressionCode)};return o(f["default"],{trigger:e,triggerEventType:f["default"].TriggerEventTypes.HOVER,bemModifiers:["siteHeader"],fallbackUrl:this.props.communityUrl,isInSiteHeader:!0,onShowCallback:t},void 0,o("ul",{className:"siteHeader__subNav"},void 0,o(m["default"],{href:this.props.groupsUrl,linkText:"Groups",linkClass:"siteHeader__subNavLink"}),o(m["default"],{href:this.props.discussionsUrl,linkText:"Discussions",linkClass:"siteHeader__subNavLink"}),o(m["default"],{href:this.props.quotesUrl,linkText:"Quotes",linkClass:"siteHeader__subNavLink"}),o(m["default"],{href:this.props.featuredAskAuthorUrl,linkText:"Ask the Author",linkClass:"siteHeader__subNavLink"}),o(m["default"],{href:this.props.triviaUrl,linkText:"Trivia",linkClass:"siteHeader__subNavLink"}),o(m["default"],{href:this.props.quizzesUrl,linkText:"Quizzes",linkClass:"siteHeader__subNavLink"}),o(m["default"],{href:this.props.storiesUrl,linkText:"Creative Writing",linkClass:"siteHeader__subNavLink"}),o(m["default"],{href:this.props.peopleUrl,linkText:"People",linkClass:"siteHeader__subNavLink"}),o(m["default"],{href:this.props.eventUrl,linkText:"Events",linkClass:"siteHeader__subNavLink"})),this.renderSpotlightAd())}})},{"../../react_actions/google_ads_actions":31,"../../react_stores/google_ads_store":182,"../ads/google_banner_ad":49,"../dropdown":79,"../gr_component_factory":91,"../menu_link":116,react:"react",reflux:"reflux"}],96:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../gr_component_factory"),a=s(n),i=e("../../shared/gr_prop_types"),l=s(i),u=e("append-query"),d=s(u),c=e("../../../modules/shape_icon_values"),f=e("../../time/relative_time"),p=s(f),m=e("../../group/group_icon"),_=s(m),h=e("../../../analytics/url_tracking_params");r["default"]=a["default"].createClass({displayName:"DiscussionsGroupBanner",propTypes:{group:l["default"].group()},render:function(){var e=this.props.group;return o("a",{href:(0,d["default"])(e.url,{ref:h.URLTrackingParams.DISCUSSIONS_PANE_GROUP}),"aria-label":"Visit your group "+this.props.group.name,className:"gr-hyperlink\n                          gr-hyperlink--naked\n                          gr-hyperlink--noUnderline"},void 0,o("div",{className:"gr-mediaFlexbox\n                              gr-mediaFlexbox--alignItemsCenter\n                              gr-headerDiscussions__groupBanner"},void 0,o("div",{className:"gr-mediaFlexbox__media"},void 0,o(_["default"],{group:e,size:c.ICON_SIZES.SMALL})),o("div",{className:"gr-mediaFlexbox__desc"},void 0,o("div",{className:"gr-headerDiscussions__groupTitle"},void 0,e.name),o("small",{},void 0,"Active ",o(p["default"],{time:e.lastActiveAt,longFormat:!0})))))}})},{"../../../analytics/url_tracking_params":2,"../../../modules/shape_icon_values":18,"../../gr_component_factory":91,"../../group/group_icon":92,"../../shared/gr_prop_types":133,"../../time/relative_time":145,"append-query":"append-query"}],97:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){
for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../gr_component_factory"),a=s(n),i=e("../../shared/gr_prop_types"),l=s(i),u=e("append-query"),d=s(u),c=e("moment"),f=s(c),p=e("../../time/relative_time"),m=s(p),_=e("../../dot_separated_elements"),h=s(_),g=e("../../../analytics/url_tracking_params");r["default"]=a["default"].createClass({displayName:"DiscussionsTopic",propTypes:{topic:l["default"].topic()},getTitleAriaLabel:function(){var e=void 0;return e=this.props.topic.newPosts?"New comments in topic "+this.props.topic.title:"Topic "+this.props.topic.title,e+=this.props.topic.folder?" in folder "+this.props.topic.folder.name+".":".",e+=" "+(0,f["default"])(this.props.topic.updatedAt).fromNow()+".",this.props.topic.newPosts&&(e+=" "+this.props.topic.newPosts+"."),e},getTopicUrl:function(){var e=this.props.topic.newCommentsUrl?this.props.topic.newCommentsUrl:this.props.topic.url;return(0,d["default"])(e,{ref:g.URLTrackingParams.DISCUSSIONS_PANE_DISCUSSION})},renderFolder:function(){return this.props.topic.folder?o("span",{className:"gr-headerDiscussions__topicFolderTitle"},void 0,"in ",this.props.topic.folder.name):null},renderPosts:function(){return this.props.topic.newPosts?o("div",{className:"gr-smallAlert"},void 0,this.props.topic.newPosts):o("small",{},void 0,this.props.topic.totalPosts)},render:function(){var e=this.props.topic,t=[this.renderPosts(),o("small",{},void 0,o(m["default"],{time:e.updatedAt,longFormat:!0}))];return o("a",{className:"gr-headerDiscussions__topic\n                         gr-hyperlink\n                         gr-hyperlink--noUnderline",href:this.getTopicUrl(),"aria-label":this.getTitleAriaLabel()},void 0,o("span",{className:"gr-headerDiscussions__topicTitle"},void 0,e.title)," ",this.renderFolder(),o("div",{className:"gr-headerDiscussions__posts"},void 0,o(h["default"],{elements:t,separator:o("small",{className:"u-marginLeftTiny u-marginRightTiny"},void 0,"·")})))}})},{"../../../analytics/url_tracking_params":2,"../../dot_separated_elements":77,"../../gr_component_factory":91,"../../shared/gr_prop_types":133,"../../time/relative_time":145,"append-query":"append-query",moment:"moment"}],98:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),a=s(n),i=e("lodash"),l=e("append-query"),u=s(l),d=e("../gr_component_factory"),c=s(d),f=e("../dropdown"),p=s(f),m=e("../../react_actions/discussions_pane_actions"),_=s(m),h=e("../../react_stores/group_store"),g=s(h),v=e("./discussions/group_banner"),y=s(v),b=e("./discussions/topic"),S=s(b),T=e("../spinner"),k=s(T),P=e("../shape_icon"),N=s(P),w=e("../../analytics/url_tracking_params");r["default"]=c["default"].createClass({mixins:[a["default"].connect(g["default"],"groupStore")],displayName:"DiscussionsPane",getGroupState:function(){return this.state.groupStore},renderAllUnreadPostsLink:function(e){var t="All unread posts in group "+e.name;return o("a",{className:"gr-headerDiscussions__moreDiscussionsLink gr-hyperlink u-textAlignCenter","aria-label":t,href:(0,u["default"])(e.allUnreadPostsUrl,{ref:w.URLTrackingParams.DISCUSSIONS_PANE_GROUP_ALL_UNREAD_POSTS})},void 0,"All unread posts")},renderDiscussionsList:function(){var e=this;return(0,i.map)(this.getGroupState().groups,function(t){return o("div",{},"discussionsGroup"+t.group.id,o(y["default"],{group:t.group}),(0,i.map)(t.topics,function(e){return o(S["default"],{topic:e},"discussionsTopic"+e.id)}),e.renderAllUnreadPostsLink(t.group))})},renderSparseState:function(){var e=this.getGroupState().sparse;return o("div",{className:"gr-headerDiscussions u-defaultType"},void 0,o("h3",{className:"siteHeader__heading siteHeader__dropdownHeading"},void 0,"Group Discussions"),o("div",{},void 0,o("div",{className:"gr-headerDiscussions__sparseBody"},void 0,o("div",{className:"gr-headerDiscussions__groupsExplanation"},void 0,"Want to connect with readers who love the same books as you? Goodreads has a group for almost any interest."),o("div",{className:"gr-mediaFlexbox gr-headerDiscussions__testimonial"},void 0,o("div",{className:"gr-mediaFlexbox__media"},void 0,o(N["default"],{imageUrl:e.groupModeratorImageUrl,imageAlt:"Moderator of a book group"})),o("div",{className:"gr-mediaFlexbox__desc"},void 0,o("div",{className:"gr-headerDiscussions__testimonialQuote"},void 0,'"I\'ve been reading more since I became involved with groups. I especially love reading challenges…"'),o("div",{className:"gr-headerDiscussions__testimonialQuoteAttribution"},void 0,"—Moderator of a book group"),o("a",{className:"gr-hyperlink",href:(0,u["default"])(e.groupsWithReadingChallengesUrl,{ref:w.URLTrackingParams.DISCUSSIONS_PANE_SPARSE_READING_CHALLENGES})},void 0,"See groups with reading challenges"))),o("div",{className:"gr-mediaFlexbox gr-headerDiscussions__testimonial"},void 0,o(N["default"],{className:"gr-mediaFlexbox__media",imageUrl:e.groupMemberImageUrl,imageAlt:"Member of a group"}),o("div",{className:"gr-mediaFlexbox__desc"},void 0,o("div",{className:"gr-headerDiscussions__testimonialQuote"},void 0,'"When I first joined a group, I finally felt like I had friends interested in the same books as me."'),o("div",{className:"gr-headerDiscussions__testimonialQuoteAttribution"},void 0,"—Member of a group"),o("a",{className:"gr-hyperlink",href:(0,u["default"])(e.popularGroupsUrl,{ref:w.URLTrackingParams.DISCUSSIONS_PANE_SPARSE_POPULAR})},void 0,"See popular groups"))))),o("div",{className:"u-topGrayBorder gr-headerDiscussions__moreDiscussionsLink u-textAlignCenter u-marginTopSmall"},void 0,o("a",{className:"gr-hyperlink",href:(0,u["default"])(e.allGroupsUrl,{ref:w.URLTrackingParams.DISCUSSIONS_PANE_SPARSE_ALL})},void 0,"View all groups")))},renderPaneContents:function(){var e=this.getGroupState();return e.errorMessage?o("div",{className:"gr-headerDiscussions u-paddingTopBottomXSmall u-textAlignCenter"},void 0,e.errorMessage):e.sparse?this.renderSparseState():(0,i.isEmpty)(e.groups)?o("div",{className:"gr-headerDiscussions u-paddingTopBottomXSmall u-textAlignCenter"},void 0,o(k["default"],{})):o("section",{},void 0,o("div",{className:"siteHeader__dropdownHeading"},void 0,o("h3",{className:"siteHeader__heading siteHeader__dropdownHeader"},void 0,"Group Discussions"),o("a",{className:"u-displayBlock gr-hyperlink",href:(0,u["default"])("/topic",{discussion_filter:"groups",ref:w.URLTrackingParams.DISCUSSIONS_PANE_ALL_DISCUSSIONS})},void 0,"View all group discussions")),o("div",{className:"gr-headerDiscussions gr-box gr-box--forceScrollBar"},void 0,this.renderDiscussionsList()))},render:function(){var e=o("span",{className:"headerPersonalNav__icon\n                       headerPersonalNav__icon--discussions","aria-label":"My group discussions"});return o(p["default"],{trigger:e,triggerEventType:p["default"].TriggerEventTypes.CLICK,tooltipText:"My group discussions",bemModifiers:"discussions",isInPersonalNav:"true",onShowCallback:_["default"].openPane},void 0,this.renderPaneContents())}})},{"../../analytics/url_tracking_params":2,"../../react_actions/discussions_pane_actions":25,"../../react_stores/group_store":183,"../dropdown":79,"../gr_component_factory":91,"../shape_icon":129,"../spinner":142,"./discussions/group_banner":96,"./discussions/topic":97,"append-query":"append-query",lodash:"lodash",reflux:"reflux"}],99:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("../modal_trigger"),d=s(u);r["default"]=l["default"].createClass({displayName:"FavoriteGenresPane",propTypes:{favoriteGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired},render:function(){return o("div",{className:"favoriteGenresPane"},void 0,o("div",{className:"favoriteGenresPane__title"},void 0,"What do you like to read?"),o("div",{className:"favoriteGenresPane__description"},void 0,"Choose your favorite genres to get personalized book recommendations."),o("div",{className:"favoriteGenresPane__buttonContainer"},void 0,o(d["default"],{id:"favGenres"},void 0,o("button",{className:"gr-button gr-button--dark"},void 0,"Choose Favorite Genres"))),o("a",{href:"/genres",className:"favoriteGenresPane__browseGenres"},void 0,"Browse Genres"))}})},{"../gr_component_factory":91,"../modal_trigger":118,react:"react"}],100:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("lodash"),i=s(a),l=e("reflux"),u=s(l),d=e("../gr_component_factory"),c=s(d),f=e("./featured_genres_book"),p=s(f),m=e("./featured_genres_list"),_=s(m),h=e("../spinner"),g=s(h),v=e("../../react_stores/featured_genres_store"),y=s(v),b=e("../../react_stores/user_agent_capabilities_store"),S=s(b),T=e("../../react_stores/google_ads_store"),k=s(T),P=e("../ads/google_native_nav_ad"),N=s(P),w=e("../ads/google_native_nav_creative"),R=s(w),x=e("./../tab_content"),A=s(x),C=/goodr.nav.browse.400x300/;r["default"]=c["default"].createClass({displayName:"FeaturedGenres",propTypes:{sponsoredGenres:React.PropTypes.array,adId:React.PropTypes.string},getDefaultProps:function(){return{sponsoredGenres:[]}},mixins:[u["default"].connect(y["default"],"featuredGenres"),u["default"].connect(S["default"],"userAgentCapabilities"),u["default"].connect(k["default"],"googleAdStore")],renderBooks:function(){if(this.state.userAgentCapabilities.touch===!0){var e=this.state.featuredGenres.featuredGenreBookInfo[0];return n("div",{className:"featuredGenres__genreSpotlight"},e.genre.name,n(p["default"],{book:e.book,genre:e.genre,alwaysShown:!0}))}return i["default"].map(this.state.featuredGenres.featuredGenreBookInfo,function(e){return n("div",{className:"featuredGenres__genreSpotlight"},e.genre.name,n(p["default"],{book:e.book,genre:e.genre}))})},renderSponsoredSpotlight:function(e){var t=this;if(e){var r=function(){var e={enableTracking:!0,adId:t.props.adId};return{v:i["default"].map(t.props.sponsoredGenres,function(r){var s=n(R["default"],{adId:t.props.adId,genre:r.name,trackingOptions:e});return n("div",{className:"featuredGenres__genreSpotlight"},r.name,n(A["default"],{group:"featuredGenres",name:"featuredGenre-"+r.name},void 0,s))})}}();if("object"===("undefined"==typeof r?"undefined":o(r)))return r.v}},render:function(){var e=k["default"].findAd(C);return this.state.featuredGenres.featuredGenreBookInfo?e&&this.state.googleAdStore.nativeAds[this.props.adId]&&!this.state.googleAdStore.nativeAds[this.props.adId].hasCreative?n("div",{className:"featuredGenres featuredGenres--sparse"},void 0,n(g["default"],{}),n(N["default"],{adId:this.props.adId})):n("div",{className:"featuredGenres"},void 0,n("span",{className:"featuredGenres__genreList"},void 0,n(_["default"],{genres:i["default"].pluck(this.state.featuredGenres.featuredGenreBookInfo,"genre"),sponsoredGenres:this.props.sponsoredGenres,showSponsoredGenres:this.state.googleAdStore.nativeAds[this.props.adId]&&!this.state.googleAdStore.nativeAds[this.props.adId].empty})),this.renderSponsoredSpotlight(e),this.renderBooks()):this.state.featuredGenres.errorMessage?n("span",{},void 0,this.state.featuredGenres.errorMessage):n("div",{className:"featuredGenres featuredGenres--sparse"},void 0,n(g["default"],{}))}})},{"../../react_stores/featured_genres_store":181,"../../react_stores/google_ads_store":182,"../../react_stores/user_agent_capabilities_store":192,"../ads/google_native_nav_ad":50,"../ads/google_native_nav_creative":51,"../gr_component_factory":91,"../spinner":142,"./../tab_content":144,"./featured_genres_book":101,"./featured_genres_list":102,lodash:"lodash",reflux:"reflux"}],101:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("../gr_component_factory"),u=s(l),d=e("../shared/gr_prop_types"),c=s(d),f=e("./../book"),p=s(f),m=e("./../community_rating"),_=s(m),h=e("./../tab_content"),g=s(h),v=e("./../user_content/truncated_html"),y=s(v),b=e("../want_to_read/want_to_read_button"),S=s(b),T=e("lodash"),k=e("../../analytics/origins");r["default"]=u["default"].createClass({displayName:"FeaturedGenresBook",propTypes:{alwaysShown:i["default"].PropTypes.bool,genre:i["default"].PropTypes.shape({name:i["default"].PropTypes.string.isRequired,url:i["default"].PropTypes.string.isRequired}).isRequired,book:c["default"].book().isRequired},renderBookDescription:function(){return(0,T.isUndefined)(this.props.book.description)?null:n("div",{className:"featuredGenres__bookDescription"},void 0,i["default"].createElement(y["default"],this.props.book.description))},renderBook:function(){var e=this.props.genre;return n("div",{className:"featuredGenres__book"},void 0,n("div",{className:"siteHeader__heading siteHeader__title siteHeader__title--secondary"},void 0,"Among Most Read This Week in "+e.name),n("div",{className:"u-marginTopSmall"},void 0,i["default"].createElement(p["default"],o({},this.props.book,{key:this.props.book.bookId,size:f.VALID_BOOK_SIZES.LARGE}),n(_["default"],{rating:parseFloat(this.props.book.avgRating),displayAvg:!0}),n("div",{className:"featuredGenres__bookWantToReadButton"},void 0,n(S["default"],{bookTitle:this.props.book.title,uniqueId:(0,T.random)(1e6).toString(),bookId:this.props.book.bookId,origin:k.ShelvedBookOrigin.BROWSE_SPOTLIGHT,showMenu:!1})),this.renderBookDescription())),n("a",{href:e.url,className:"u-defaultType gr-hyperlink"},void 0,"More in "+e.name))},render:function(){return this.props.alwaysShown===!0?this.renderBook():n(g["default"],{group:"featuredGenres",name:"featuredGenre-"+this.props.genre.name},void 0,this.renderBook())}})},{"../../analytics/origins":1,"../gr_component_factory":91,"../shared/gr_prop_types":133,"../want_to_read/want_to_read_button":157,"./../book":53,"./../community_rating":60,"./../tab_content":144,"./../user_content/truncated_html":155,lodash:"lodash",react:"react"}],102:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("classnames"),a=s(n),i=e("reflux"),l=s(i),u=e("react"),d=s(u),c=e("lodash"),f=e("../dropdown"),p=s(f),m=e("../gr_component_factory"),_=s(m),h=e("./../tab"),g=s(h),v=e("../../react_stores/user_agent_capabilities_store"),y=s(v),b=8,S=1;r["default"]=_["default"].createClass({displayName:"FeaturedGenresList",mixins:[l["default"].connect(y["default"],"userAgentCapabilities")],propTypes:{adId:d["default"].PropTypes.string,genres:d["default"].PropTypes.array.isRequired,sponsoredGenres:d["default"].PropTypes.array,showSponsoredGenres:d["default"].PropTypes.bool},onClick:function(e){e.preventDefault()},allGenresLink:function(){return o("li",{role:"menuitem",className:"genreList__genre"},"allGenres",o("a",{href:"/genres",className:"siteHeader__subNavLink genreList__genreLink--more"},void 0,"All Genres"))},renderGenreLink:function(e,t){var r=(0,a["default"])(["genreList__genreLink","gr-hyperlink","gr-hyperlink--naked"]),s=o("a",{href:e.url,className:r},void 0,e.name);return this.state.userAgentCapabilities.touch===!0?s:o(g["default"],{group:"featuredGenres",name:"featuredGenre-"+e.name,triggerEventType:p["default"].TriggerEventTypes.HOVER,initiallySelected:t},void 0,s)},renderSponsoredGenresList:function(){var e=this;return this.props.showSponsoredGenres?o("div",{className:"featuredGenres__list genreList genreList--featuredSidebar"},void 0,o("div",{className:"siteHeader__heading siteHeader__title"},void 0,o("span",{className:"featuredGenres__listTitle"},void 0,"Featured Genres")),o("ul",{},void 0,(0,c.map)((0,c.take)(this.props.sponsoredGenres,S),function(t){return o("li",{role:"menuitem",className:"genreList__genre"},t.name,e.renderGenreLink(t,!0))}))):null},renderFavoritesList:function(){var e=this,t=(0,c.random)(0,this.props.genres.length-1),r=this.props.showSponsoredGenres?b-2:b;return o("div",{className:"featuredGenres__list genreList genreList--sidebar"},void 0,o("div",{className:"siteHeader__title siteHeader__heading"},void 0,o("span",{className:"featuredGenres__listTitle"},void 0,"Favorite Genres")),o("ul",{},void 0,(0,c.map)((0,c.take)(this.props.genres,r),function(r,s){return o("li",{role:"menuitem",className:"genreList__genre"},r.name,e.renderGenreLink(r,e.props.showSponsoredGenres?!1:s===t))}),this.allGenresLink()))},render:function(){return o("div",{},void 0,this.renderSponsoredGenresList(),this.renderFavoritesList())}})},{"../../react_stores/user_agent_capabilities_store":192,"../dropdown":79,"../gr_component_factory":91,"./../tab":143,classnames:"classnames",lodash:"lodash",react:"react",reflux:"reflux"}],103:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),a=s(n),i=e("../gr_component_factory"),l=s(i);r["default"]=l["default"].createClass({displayName:"GenreList",render:function(){for(var e=10,t=[],r=this.props.genres.slice(0);t.length*e<this.props.genres.length;)t.push(r.splice(0,e));return o("div",{className:"genreListContainer"},void 0,o("div",{className:"siteHeader__heading siteHeader__title"},void 0,"Genres"),a["default"].map(t,function(e,t){return o("ul",{className:"genreList"},"genreList"+t,a["default"].map(e,function(e){return o("li",{role:"menuitem",className:"genreList__genre"},e.name,o("a",{href:e.url,className:"genreList__genreLink"},void 0,e.name))}))}))}})},{"../gr_component_factory":91,lodash:"lodash"}],104:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("../gr_component_factory"),u=s(l),d=e("../search/book_search"),c=s(d),f=e("../experimental/search/universal/universal_search"),p=s(f),m=e("../favorite_genres_form"),_=s(m),h=e("../modal"),g=s(h),v=e("./personal_nav"),y=s(v),b=e("./primary_nav_menus"),S=s(b),T=e("./header_logo"),k=s(T),P=e("../../analytics/url_tracking_params"),N=e("../../modules/env_utils"),w=s(N);r["default"]=u["default"].createClass({displayName:"Header",propTypes:{adId:i["default"].PropTypes.string,autocomleteUrl:i["default"].PropTypes.string,browseUrl:i["default"].PropTypes.string,choiceAwardsUrl:i["default"].PropTypes.string,communityUrl:i["default"].PropTypes.string,editorsPicksUrl:i["default"].PropTypes.string,eventUrl:i["default"].PropTypes.string,discussionsUrl:i["default"].PropTypes.string,favoriteGenres:i["default"].PropTypes.array,sponsoredGenres:i["default"].PropTypes.array,friendIconUrl:i["default"].PropTypes.string,genres:i["default"].PropTypes.array.isRequired,giveawayUrl:i["default"].PropTypes.string,groupsUrl:i["default"].PropTypes.string,featuredAskAuthorUrl:i["default"].PropTypes.string,helpUrl:i["default"].PropTypes.string,listUrl:i["default"].PropTypes.string,messageIconUrl:i["default"].PropTypes.string,myBooksUrl:i["default"].PropTypes.string,myFriendsUrl:i["default"].PropTypes.string,myGroupsUrl:i["default"].PropTypes.string,myQuotesUrl:i["default"].PropTypes.string,myReadingChallengeUrl:i["default"].PropTypes.string,myRecsUrl:i["default"].PropTypes.string,name:i["default"].PropTypes.string,newReleasesUrl:i["default"].PropTypes.string,notificationIconUrl:i["default"].PropTypes.string,peopleUrl:i["default"].PropTypes.string,preferences:i["default"].PropTypes.object,profileImage:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,quizzesUrl:i["default"].PropTypes.string,quotesUrl:i["default"].PropTypes.string,recommendationsUrl:i["default"].PropTypes.string,signedIn:i["default"].PropTypes.bool,searchPath:i["default"].PropTypes.string,signInUrl:i["default"].PropTypes.string,signUpUrl:i["default"].PropTypes.string,storiesUrl:i["default"].PropTypes.string,tempFriendRequestCount:i["default"].PropTypes.number,tempUnreadMessageCount:i["default"].PropTypes.number,triviaUrl:i["default"].PropTypes.string,logoUrl:i["default"].PropTypes.string,signInWithReturnUrl:i["default"].PropTypes.bool},render:function(){return n("div",{},void 0,n("header",{className:"siteHeader__contents"},void 0,i["default"].createElement(k["default"],this.props),i["default"].createElement(S["default"],this.props),this.renderSearchForm(),this.props.signedIn?this.renderPersonalNav():this.renderLoginLinks(),this.renderModals()))},renderPersonalNav:function(){return i["default"].createElement(y["default"],this.props)},getSignInUrl:function(){var e=w["default"].getCurrentPath();return this.props.signInUrl+"?returnurl="+e},signIn:function(e){e.preventDefault(),w["default"].setLocationUrl(this.getSignInUrl())},renderLoginLinks:function(){var e={};return this.props.signInWithReturnUrl&&(e.onClick=this.signIn),n("ul",{className:"siteHeader__personal"},void 0,n("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signedOut"},void 0,i["default"].createElement("a",o({href:this.props.signInUrl,rel:"nofollow",className:"siteHeader__topLevelLink"},e),"Sign In")),n("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signedOut"},void 0,n("a",{href:this.props.signUpUrl,rel:"nofollow",className:"siteHeader__topLevelLink"},void 0,"Join")))},onSearchSelection:function(e){var t=null;t=this.isFeatureEnabled("universal_search")?e.destination+"?"+P.URLTrackingParams.BOOK_SHOW_INTERACTION_PARAM+"&"+P.URLTrackingParams.FROM_SEARCH_PARAM:e.bookUrl+"?"+P.URLTrackingParams.BOOK_SHOW_INTERACTION_PARAM+"&"+P.URLTrackingParams.FROM_SEARCH_PARAM,w["default"].setLocationUrl(t)},renderSearchForm:function(){return this.isFeatureEnabled("universal_search")?n(p["default"],{bemModifiers:"navbar",searchPath:this.props.searchPath,autocompleteUrl:this.props.autocompleteUrl,onChooseResult:this.onSearchSelection}):n(c["default"],{bemModifiers:"navbar",searchPath:this.props.searchPath,autocompleteUrl:this.props.autocompleteUrl,onChooseResult:this.onSearchSelection})},renderModals:function(){return this.props.signedIn?n(g["default"],{id:"favGenres"},void 0,n(_["default"],{favoriteGenres:this.props.favoriteGenres,genres:this.props.genres})):null}})},{"../../analytics/url_tracking_params":2,"../../modules/env_utils":13,"../experimental/search/universal/universal_search":84,"../favorite_genres_form":87,"../gr_component_factory":91,"../modal":117,"../search/book_search":126,"./header_logo":105,"./personal_nav":109,"./primary_nav_menus":110,react:"react"}],105:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n);r["default"]=a["default"].createClass({displayName:"HeaderLogo",render:function(){return o("a",{href:this.props.logoActionUrl,className:this.isFeatureEnabled("logo_doodle")?"siteHeader__logo siteHeader__logo--doodle":"siteHeader__logo","aria-label":this.props.logoAltText,title:this.props.logoAltText})}})},{"../gr_component_factory":91}],106:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=s(o),a=e("../gr_component_factory"),i=s(a),l=e("reflux"),u=s(l),d=e("./header"),c=s(d),f=e("../../react_stores/current_user_store"),p=s(f),m=e("../../react_stores/favorite_genres_store"),_=s(m);r["default"]=i["default"].createClass({displayName:"HeaderStoreConnector",mixins:[u["default"].connect(p["default"],"currentUser"),u["default"].connect(_["default"],"favoriteGenres")],render:function(){var e=this.state.currentUser.currentUser,t=!n["default"].isNull(e),r={adId:this.state.favoriteGenres.adId,signedIn:t,genres:this.state.favoriteGenres.allGenres,favoriteGenres:this.state.favoriteGenres.favoriteGenres,sponsoredGenres:this.state.favoriteGenres.sponsoredGenres};return t&&n["default"].merge(r,e),n["default"].merge(r,this.props),React.createElement(c["default"],r)}})},{"../../react_stores/current_user_store":176,"../../react_stores/favorite_genres_store":180,"../gr_component_factory":91,"./header":104,lodash:"lodash",reflux:"reflux"}],107:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n),i=e("lodash"),l=e("../../modules/shared/image_registry"),u=e("../../modules/to_sentence"),d=s(u),c=e("../user/user_icon"),f=s(c),p=e("../time/relative_time"),m=s(p),_=e("../shape_icon"),h=s(_);r["default"]=a["default"].createClass({displayName:"Notification",mixins:[d["default"]],propTypes:{notification:React.PropTypes.object.isRequired},userLink:function(e){return o("a",{href:e.profileUrl,className:"u-defaultType"},e.profileUrl,o("b",{},void 0,e.viewableName))},userLinks:function g(e){var t=this,g=(0,i.map)(e.actors,function(e){return t.userLink(e)});return e.moreActors?this.sentenceJoin(g):this.toSentence(g)},renderActorIcon:function(e){return e.actor?o(f["default"],{user:e.actor}):o(h["default"],{imageUrl:(0,l.getImages)().notificationFromGRIcon||"",imageAlt:"Goodreads Notification"})},renderNewNotificationFlag:function(e){return e.viewed?void 0:o("small",{className:"gr-smallAlert u-marginRightTiny"},void 0,"New")},renderHistoryMessage:function(e){return e.historyMessage?o("small",{className:"gr-notification__historyMessage"},void 0,e.historyMessage):void 0},render:function(){var e=this.props.notification;return e.error?null:o("div",{className:"gr-mediaBox gr-notification"},void 0,o("div",{className:"gr-mediaBox__media u-marginRightMedium"},void 0,this.renderActorIcon(e)),o("div",{className:"gr-mediaBox__desc u-defaultType"},void 0,this.userLinks(e),!e.actor||e.moreActors?"":e.directlyAddressed?", ":" ",e.body+" ",e.resource?o("a",{className:"gr-hyperlink",href:e.resource.url},void 0,e.resource.text):null,o("div",{},void 0,this.renderNewNotificationFlag(e),o("small",{},void 0,o(m["default"],{time:e.createdAt,longFormat:!0}))),o("div",{},void 0,this.renderHistoryMessage(e))))}})},{"../../modules/shared/image_registry":19,"../../modules/to_sentence":20,"../gr_component_factory":91,"../shape_icon":129,"../time/relative_time":145,"../user/user_icon":150,lodash:"lodash"}],108:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("reflux"),f=s(c),p=e("../spinner"),m=s(p),_=e("../dropdown"),h=s(_),g=e("../../react_stores/notifications_store"),v=s(g),y=e("../../react_actions/notifications_actions"),b=s(y),S=e("./notification"),T=s(S);r["default"]=d["default"].createClass({displayName:"Notifications",mixins:[f["default"].connect(v["default"],"notificationsStore")],propTypes:{notificationIconUrl:a["default"].PropTypes.string.isRequired},getStoreState:function(){return this.state.notificationsStore},generateKey:function(e){return e.actor?""+e.actor.profileUrl+e.createdAt:e.resource?""+e.resource.url+e.createdAt:""+e.body+e.createdAt},notificationsCountString:function(){var e=this.getStoreState();return e.unreadCount+(e.unreadCountMore?"+":"")},renderNotificationList:function(){
var e=this,t=this.getStoreState(),r=t.notifications;return t.errorOccurred?o("div",{className:"gr-notifications gr-notifications--sparse"},void 0,o("span",{},void 0,"An error occurred loading your notifications")):l["default"].isUndefined(r)?o("div",{className:"gr-notifications gr-notifications--sparse"},void 0,o(m["default"],{})):l["default"].isEmpty(r)?o("div",{className:"gr-notifications gr-notifications--sparse"},void 0,o("span",{},void 0,"No notifications")):o("section",{},void 0,o("a",{className:"u-displayBlock gr-hyperlink gr-hyperlink--noUnderline",href:"/notifications"},void 0,o("div",{className:"siteHeader__dropdownHeading"},void 0,o("h3",{className:"siteHeader__heading siteHeader__dropdownHeader"},void 0,"Notifications"),o("span",{},void 0,"View all notifications"))),o("div",{className:"gr-notifications gr-box gr-box--forceScrollBar"},void 0,l["default"].map(r,function(t){return o(T["default"],{notification:t},e.generateKey(t))})))},render:function(){var e=this.getStoreState(),t=o("span",{className:"headerPersonalNav__icon\n                       headerPersonalNav__icon--notifications","aria-label":"Notifications"},void 0,e.unreadCount>0?o("span",{className:"headerPersonalNav__flag"},void 0,this.notificationsCountString()):null);return o("div",{},void 0,o(h["default"],{trigger:t,triggerEventType:h["default"].TriggerEventTypes.CLICK,hoverTriggerClickUrl:this.props.notificationIconUrl,fallbackUrl:this.props.notificationIconUrl,tooltipText:"Notifications",onShowCallback:b["default"].requestNotifications,bemModifiers:"notifications",isInPersonalNav:"true"},void 0,this.renderNotificationList()))}})},{"../../react_actions/notifications_actions":35,"../../react_stores/notifications_store":186,"../dropdown":79,"../gr_component_factory":91,"../spinner":142,"./notification":107,lodash:"lodash",react:"react",reflux:"reflux"}],109:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("lodash"),u=s(l),d=e("../gr_component_factory"),c=s(d),f=e("../dropdown"),p=s(f),m=e("./notifications"),_=s(m),h=e("./profile_menu"),g=s(h),v=e("../user/user_icon"),y=s(v),b=e("./discussions_pane"),S=s(b);r["default"]=c["default"].createClass({displayName:"PersonalNav",propTypes:{author:i["default"].PropTypes.shape({id:i["default"].PropTypes.number,editProfileUrl:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,dashboardUrl:i["default"].PropTypes.string}),commentsUrl:i["default"].PropTypes.string,editFavGenresUrl:i["default"].PropTypes.string,groupInvitesCount:i["default"].PropTypes.number,messageIconUrl:i["default"].PropTypes.string,myFriendsUrl:i["default"].PropTypes.string,myQuotesUrl:i["default"].PropTypes.string,myReadingChallengeUrl:i["default"].PropTypes.string,name:i["default"].PropTypes.string,pendingRecsCount:i["default"].PropTypes.number,preferences:i["default"].PropTypes.object,profileEditUrl:i["default"].PropTypes.string,profileImage:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,signOutUrl:i["default"].PropTypes.string,tempFriendRequestCount:i["default"].PropTypes.number,tempUnreadMessageCount:i["default"].PropTypes.number},render:function(){var e={viewableName:this.props.name,profileImage:this.props.profileImage,profileUrl:this.props.profileUrl},t=n("span",{className:"headerPersonalNav"},void 0,n("span",{className:"headerPersonalNav__icon"},void 0,n(y["default"],{user:e,includeLink:!1}))),r=n("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--inbox","aria-label":"Inbox"},void 0,this.props.tempUnreadMessageCount>0?n("span",{className:"headerPersonalNav__flag"},void 0,this.props.tempUnreadMessageCount):null),s=n("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--friendRequests","aria-label":"Friend Requests"},void 0,this.props.tempFriendRequestCount>0?n("span",{className:"headerPersonalNav__flag"},void 0,this.props.tempFriendRequestCount):null),a=0===u["default"].size(this.props.author)?this.props.profileUrl:this.props.author.profileUrl;return n("ul",{className:"siteHeader__personal"},void 0,n("li",{},void 0,n(_["default"],{notificationIconUrl:this.props.notificationIconUrl,preferences:this.props.preferences})),this.isFeatureEnabled("nav_bar_discussions_pane")?n("li",{},void 0,n(S["default"],{})):null,n("li",{},void 0,n("a",{href:this.props.messageIconUrl,title:"Messages",className:"headerPersonalNav"},void 0,r)),n("li",{},void 0,n("a",{href:this.props.friendIconUrl,title:"Friends",className:"headerPersonalNav"},void 0,s)),n("li",{},void 0,n(p["default"],{trigger:t,triggerEventType:p["default"].TriggerEventTypes.CLICK,hoverTriggerClickUrl:a,fallbackUrl:a,bemModifiers:"profileMenu",isInPersonalNav:"true"},void 0,i["default"].createElement(g["default"],o({},this.props,{profileUrl:a})))))}})},{"../dropdown":79,"../gr_component_factory":91,"../user/user_icon":150,"./discussions_pane":98,"./notifications":108,"./profile_menu":111,lodash:"lodash",react:"react"}],110:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("./community_menu"),d=s(u),c=e("./browse_menu"),f=s(c);r["default"]=l["default"].createClass({displayName:"PrimaryNavMenus",propTypes:{adId:a["default"].PropTypes.string,browseUrl:a["default"].PropTypes.string,choiceAwardsUrl:a["default"].PropTypes.string,communityUrl:a["default"].PropTypes.string,discussionsUrl:a["default"].PropTypes.string,editorsPicksUrl:a["default"].PropTypes.string,eventUrl:a["default"].PropTypes.string,favoriteGenres:a["default"].PropTypes.array,sponsoredGenres:a["default"].PropTypes.array,featuredAskAuthorUrl:a["default"].PropTypes.string,genres:a["default"].PropTypes.array.isRequired,giveawayUrl:a["default"].PropTypes.string,groupsUrl:a["default"].PropTypes.string,homeUrl:a["default"].PropTypes.string,listUrl:a["default"].PropTypes.string,myBooksUrl:a["default"].PropTypes.string,newReleasesUrl:a["default"].PropTypes.string,peopleUrl:a["default"].PropTypes.string,quizzesUrl:a["default"].PropTypes.string,quotesUrl:a["default"].PropTypes.string,recommendationsUrl:a["default"].PropTypes.string,signedIn:a["default"].PropTypes.bool,storiesUrl:a["default"].PropTypes.string,triviaUrl:a["default"].PropTypes.string},render:function(){return o("nav",{className:"primaryNav"},void 0,o("ul",{role:"menu"},void 0,o("li",{className:"siteHeader__topLevelItem"},void 0,o("a",{href:this.props.homeUrl,className:"siteHeader__topLevelLink"},void 0,"Home")),o("li",{className:"siteHeader__topLevelItem"},void 0,o("a",{href:this.props.myBooksUrl,className:"siteHeader__topLevelLink"},void 0,"My Books")),o("li",{className:"siteHeader__topLevelItem"},void 0,a["default"].createElement(f["default"],this.props)),o("li",{className:"siteHeader__topLevelItem"},void 0,a["default"].createElement(d["default"],this.props))))}})},{"../gr_component_factory":91,"./browse_menu":94,"./community_menu":95,react:"react"}],111:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("../menu_link"),f=s(c);r["default"]=d["default"].createClass({displayName:"ProfileMenu",propTypes:{author:a["default"].PropTypes.shape({id:a["default"].PropTypes.number,editProfileUrl:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string,dashboardUrl:a["default"].PropTypes.string}),commentsUrl:a["default"].PropTypes.string,discussionsUrl:a["default"].PropTypes.string,editFavGenresUrl:a["default"].PropTypes.string,groupInvitesCount:a["default"].PropTypes.number,helpUrl:a["default"].PropTypes.string,myFriendsUrl:a["default"].PropTypes.string,myGroupsUrl:a["default"].PropTypes.string,myQuotesUrl:a["default"].PropTypes.string,myReadingChallengeUrl:a["default"].PropTypes.string,myRecsUrl:a["default"].PropTypes.string,pendingRecsCount:a["default"].PropTypes.number,profileEditUrl:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string,signOutUrl:a["default"].PropTypes.string},isAuthor:function(){return!l["default"].isUndefined(this.props.author)},groupInvitesMessage:function(){var e=this.props.groupInvitesCount;return 0===e?"No invitations":1===e?"1 invitation":e+" invitations"},renderGroupInvites:function(){return this.props.groupInvitesCount>0?o("span",{className:"gr-smallAlert u-marginLeftXSmall"},void 0,this.groupInvitesMessage()):void 0},renderPendingRecs:function(){return this.props.pendingRecsCount>0?o("span",{className:"gr-smallAlert u-marginLeftXSmall"},void 0,this.props.pendingRecsCount+" new"):void 0},renderAuthorDashboardLink:function(){return this.isAuthor()?o(f["default"],{href:this.props.author.dashboardUrl,linkText:"Author Dashboard",linkClass:"siteHeader__subNavLink"}):void 0},render:function(){var e=this.isAuthor()?this.props.author.editProfileUrl:this.props.profileEditUrl;return o("ul",{className:"siteHeader__subNav siteHeader__subNav--profile gr-box gr-box--withShadowLarge"},void 0,o(f["default"],{},void 0,o("a",{href:this.props.profileUrl,className:"siteHeader__subNavLink"},void 0,"View Profile")),this.renderAuthorDashboardLink(),o(f["default"],{href:this.props.myFriendsUrl,linkText:"Friends",linkClass:"siteHeader__subNavLink"}),o(f["default"],{href:this.props.myQuotesUrl,linkText:"My Quotes",linkClass:"siteHeader__subNavLink"}),o(f["default"],{href:this.props.commentsUrl,linkText:"My Comments",linkClass:"siteHeader__subNavLink"}),o(f["default"],{href:this.props.discussionsUrl,linkText:"My Discussions",linkClass:"siteHeader__subNavLink"}),o(f["default"],{},void 0,o("a",{href:this.props.myGroupsUrl,className:"siteHeader__subNavLink"},void 0,"My Groups",this.renderGroupInvites())),o(f["default"],{href:this.props.myReadingChallengeUrl,linkText:"My Reading Challenge",linkClass:"siteHeader__subNavLink"}),o(f["default"],{href:this.props.editFavGenresUrl,linkText:"My Favorite Genres",linkClass:"siteHeader__subNavLink"}),o(f["default"],{},void 0,o("a",{href:this.props.myRecsUrl,className:"siteHeader__subNavLink"},void 0,"Friends’ Recommendations",this.renderPendingRecs())),o(f["default"],{href:e,linkText:"Account Settings",linkClass:"siteHeader__subNavLink"}),o(f["default"],{href:this.props.helpUrl,linkText:"Help",linkClass:"siteHeader__subNavLink"}),o(f["default"],{href:this.props.signOutUrl,linkText:"Sign Out",linkClass:"siteHeader__subNavLink",method:"POST"}))}})},{"../gr_component_factory":91,"../menu_link":116,lodash:"lodash",react:"react"}],112:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("../../react_mixins/gr_reflux"),d=e("../../react_actions/like_actions"),c=s(d),f=e("../../react_stores/like_store"),p=s(f),m=e("../spinner"),_=s(m),h=e("classnames"),g=s(h);r["default"]=l["default"].createClass({displayName:"LikeButton",mixins:[(0,u.connectToLazyStore)(p["default"],"resourceKey")],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired,resourceLabel:a["default"].PropTypes.string.isRequired,showAsLink:a["default"].PropTypes.bool},getDefaultProps:function(){return{showAsLink:!0}},componentDidUpdate:function(){this.likeFocused&&!this.state.showLoadingSpinner&&(this.refs.likeButton.focus(),this.likeFocused=!1)},buttonClicked:function(){this.state.isLiked?c["default"].unLike(this.props.resourceKey):c["default"].like(this.props.resourceKey)},render:function(){var e=this,t=this.state.isLiked?"Unlike":"Like",r=(0,g["default"])({"gr-buttonAsLink gr-buttonAsLink--teal":this.props.showAsLink},{"gr-button gr-button--small":!this.props.showAsLink});return o("span",{"aria-live":"polite"},void 0,this.state.showLoadingSpinner?o(_["default"],{}):a["default"].createElement("button",{"aria-label":t+" "+this.props.resourceLabel,ref:"likeButton",className:r,onClick:this.buttonClicked,onFocus:function(){e.likeFocused=!0}},t))}})},{"../../react_actions/like_actions":32,"../../react_mixins/gr_reflux":171,"../../react_stores/like_store":184,"../gr_component_factory":91,"../spinner":142,classnames:"classnames",react:"react"}],113:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("../../react_stores/like_store"),d=s(u),c=e("../../react_mixins/gr_reflux");r["default"]=l["default"].createClass({displayName:"LikeCount",mixins:[(0,c.connectToLazyStore)(d["default"],"resourceKey")],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired},getPluralLike:function(e){return 1===e?"like":"likes"},render:function(){return this.state.likeCount>0?o("span",{},void 0,o("a",{className:"gr-hyperlink--quiet",href:this.state.likersListUrl},void 0,this.state.likeCount," ",this.getPluralLike(this.state.likeCount))," · "):null}})},{"../../react_mixins/gr_reflux":171,"../../react_stores/like_store":184,"../gr_component_factory":91,react:"react"}],114:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("reflux"),f=s(c),p=e("../../react_stores/like_store"),m=s(p);r["default"]=d["default"].createClass({displayName:"LikeInformation",mixins:[f["default"].connectFilter(m["default"],"likeStore",function(e){return e[this.props.resourceKey]})],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired},getNameLink:function(){var e=this.state.likeStore.likedBy,t=l["default"].isUndefined(e.friends)?e.others[0]:e.friends[0];return o("a",{href:t.profile_url,className:"gr-hyperlink gr-hyperlink--bold likeInformation__name"},void 0,t.name)},getPluralPerson:function(e){return e>1?"people":"person"},getYouLikeMessage:function(){return o("span",{className:"likeInformation__name"},void 0,"You")},getYouAndAnotherPersonLikeMessage:function(){return o("span",{},void 0,this.getYouLikeMessage()," and ",this.getNameLink())},getYouAndManyPeopleLikeMessage:function(){var e=this.state.likeStore,t=e.likeCount-2;return o("span",{},void 0,this.getYouLikeMessage(),", ",this.getNameLink(),","," and ",o("a",{className:"gr-hyperlink gr-hyperlink--bold",href:e.likersListUrl},void 0,t," other ",this.getPluralPerson(t)))},getSomeoneLikeMessage:function(){return o("span",{},void 0,this.getNameLink())},getManyPeopleLikeMessage:function(){var e=this.state.likeStore,t=e.likeCount-1;return o("span",{},void 0,this.getNameLink()," and ",o("a",{className:"gr-hyperlink gr-hyperlink--bold",href:e.likersListUrl},void 0,t," other ",this.getPluralPerson(t)))},getLikeMessage:function(){var e=this.state.likeStore;if(e.isLiked)switch(e.likeCount){case 1:return this.getYouLikeMessage();case 2:return this.getYouAndAnotherPersonLikeMessage();default:return this.getYouAndManyPeopleLikeMessage()}else switch(e.likeCount){case 1:return this.getSomeoneLikeMessage();default:return this.getManyPeopleLikeMessage()}},render:function(){var e=this.state.likeStore;return!e.isLiked&&l["default"].isEmpty(e.likedBy)?null:o("div",{className:"likeInformation u-defaultType"},void 0,this.getLikeMessage()," liked this")}})},{"../../react_stores/like_store":184,"../gr_component_factory":91,lodash:"lodash",react:"react",reflux:"reflux"}],115:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("./like_count"),d=s(u),c=e("./like_button"),f=s(c);r["default"]=l["default"].createClass({displayName:"LikeSimpleFooter",propTypes:{resourceKey:a["default"].PropTypes.string.isRequired,resourceLabel:a["default"].PropTypes.string.isRequired,isLikeable:a["default"].PropTypes.bool.isRequired,showAsLink:a["default"].PropTypes.bool},render:function(){return o("span",{},void 0,o(d["default"],{resourceKey:this.props.resourceKey}),this.props.isLikeable?o(f["default"],{resourceKey:this.props.resourceKey,resourceLabel:this.props.resourceLabel,showAsLink:this.props.showAsLink}):null)}})},{"../gr_component_factory":91,"./like_button":112,"./like_count":113,react:"react"}],116:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./gr_component_factory"),l=s(i);r["default"]=l["default"].createClass({displayName:"MenuLink",propTypes:{href:a["default"].PropTypes.string,linkText:a["default"].PropTypes.any,linkClass:a["default"].PropTypes.string,method:a["default"].PropTypes.oneOf(["POST","PUT","DELETE"])},render:function(){return o("li",{role:"menuitem",className:"menuLink"},void 0,this.props.children?o("span",{},void 0,this.props.children):o("a",{href:this.props.href,className:this.props.linkClass,"data-method":this.props.method},void 0,this.props.linkText))}})},{"./gr_component_factory":91,react:"react"}],117:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./gr_component_factory"),l=s(i),u=e("reflux"),d=s(u),c=e("classnames"),f=s(c),p=e("../react_stores/modal_store"),m=s(p),_=e("../react_actions/modal_actions"),h=s(_),g=e("./close_button"),v=s(g),y=e("../modules/keys"),b=s(y);r["default"]=l["default"].createClass({displayName:"Modal",mixins:[d["default"].connect(m["default"],"modalStore")],propTypes:{id:a["default"].PropTypes.string.isRequired,centered:a["default"].PropTypes.bool,onCloseHandler:a["default"].PropTypes.func},getDefaultProps:function(){return{centered:!1}},hide:function(){this.props.onCloseHandler&&"function"==typeof this.props.onCloseHandler&&this.props.onCloseHandler(),h["default"].closeModal()},isActive:function(){return this.state.modalStore.currentActiveModal===this.props.id},hideOnOverlayClick:function(e){e.target.className.indexOf("modal--overlay")>-1&&this.hide()},hideOnEscape:function(e){b["default"].isDefaultCloserKey(e.keyCode)&&this.hide()},render:function(){var e=(0,f["default"])("modal","modal--overlay",{"modal--show":this.isActive(),"modal--centered":this.isActive()&&this.props.centered});return a["default"].createElement("div",{className:e,ref:"modalContent",tabIndex:"0",onClick:this.hideOnOverlayClick,onKeyDown:this.hideOnEscape},o("div",{className:this.withBemModifiers("modal__content")},void 0,o("div",{className:"modal__close"},void 0,o(v["default"],{action:this.hide})),this.props.children))}})},{"../modules/keys":16,"../react_actions/modal_actions":33,"../react_stores/modal_store":185,"./close_button":55,"./gr_component_factory":91,classnames:"classnames",react:"react",reflux:"reflux"}],118:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./gr_component_factory"),l=s(i),u=e("../react_actions/modal_actions"),d=s(u);r["default"]=l["default"].createClass({displayName:"ModalTrigger",propTypes:{id:a["default"].PropTypes.string.isRequired,clickHandler:a["default"].PropTypes.func},openModal:function(){this.props.clickHandler&&this.props.clickHandler(),d["default"].openModal(this.props.id)},render:function(){return o("a",{className:this.withBemModifiers("modalTrigger"),onClick:this.openModal},void 0,this.props.children)}})},{"../react_actions/modal_actions":33,"./gr_component_factory":91,react:"react"}],119:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=s(i),u=e("./gr_component_factory"),d=s(u),c=e("./pagination_single_page_link"),f=s(c),p=e("./shared/gr_prop_types"),m=s(p);r["default"]=d["default"].createClass({displayName:"PaginationLinks",propTypes:{totalSize:m["default"].naturalNumber.isRequired,currentPageNumber:a["default"].PropTypes.number.isRequired,className:a["default"].PropTypes.string,perPage:m["default"].naturalNumber.isRequired,changePageAction:a["default"].PropTypes.func.isRequired},maxPageNumber:function(){return Math.ceil(this.props.totalSize/this.props.perPage)},renderPageLinks:function(){var e=this,t=this.maxPageNumber();return 1!==t?l["default"].times(t,function(t){return o(f["default"],{pageNumber:t+1,currentPageNumber:e.props.currentPageNumber,changePageAction:e.props.changePageAction},t+1)}):void 0},renderPrevLink:function(){return 1===this.maxPageNumber()?null:o("button",{className:"gr-paginationLinks__previousLink gr-buttonAsLink gr-buttonAsLink--black",onClick:this.moveToPrevPage,disabled:1===this.props.currentPageNumber},void 0,"← Previous")},renderNextLink:function(){return 1===this.maxPageNumber()?null:o("button",{className:"gr-paginationLinks__nextLink gr-buttonAsLink gr-buttonAsLink--black",onClick:this.moveToNextPage,disabled:this.props.currentPageNumber===this.maxPageNumber()},void 0,"Next →")},moveToNextPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.currentPageNumber+1)},moveToPrevPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.currentPageNumber-1)},render:function(){return o("div",{className:"gr-paginationLinks "+(this.props.className||"")},void 0,this.renderPrevLink(),this.renderPageLinks(),this.renderNextLink())}})},{"./gr_component_factory":91,"./pagination_single_page_link":120,"./shared/gr_prop_types":133,lodash:"lodash",react:"react"}],120:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./gr_component_factory"),l=s(i);r["default"]=l["default"].createClass({displayName:"PaginationSinglePageLink",propTypes:{pageNumber:a["default"].PropTypes.number,currentPageNumber:a["default"].PropTypes.number,changePageAction:a["default"].PropTypes.func.isRequired},render:function(){return this.props.pageNumber===this.props.currentPageNumber?o("span",{className:"gr-paginationLinks__pageNumLink\n                         gr-paginationLinks__pageNumLink--selected"},void 0,this.props.pageNumber):o("button",{className:"gr-buttonAsLink\n                           gr-buttonAsLink--black\n                           gr-paginationLinks__pageNumLink",onClick:this.jumpToPage},void 0,this.props.pageNumber)},jumpToPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.pageNumber)}})},{"./gr_component_factory":91,react:"react"}],121:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=e("../shared/gr_prop_types"),i=s(a),l=e("../../modules/reading_notes/reading_notes_helper"),u=e("../../modules/env_utils"),d=s(u),c=function(e){return function(){d["default"].setLocationUrl(e)}},f=function(e){return o("div",{className:"annotatedBookItem",onClick:c(e.readingNotesUrl)},void 0,o("div",{className:"annotatedBookItem__mobileColumn"},void 0,o("img",{src:e.imageUrl}),o("div",{className:"annotatedBookItem__bookInfo"},void 0,o("div",{className:"annotatedBookItem__bookInfo__bookTitle"},void 0,e.title),o("div",{className:"annotatedBookItem__bookInfo__bookAuthor"},void 0,"By ",e.authorName),o("a",{className:"annotatedBookItem__bookInfo__bookLink",href:e.readingNotesUrl},void 0,e.linkText))))},p=function(e){return o("div",{className:"annotatedBookItem",onClick:c(e.readingNotesUrl)},void 0,o("div",{className:"annotatedBookItem__imageColumn"},void 0,o("img",{src:e.imageUrl})),o("div",{className:"annotatedBookItem__mainColumn"},void 0,o("div",{className:"annotatedBookItem__bookInfo"},void 0,o("div",{className:"annotatedBookItem__bookInfo__bookTitle"},void 0,e.title),o("div",{className:"annotatedBookItem__bookInfo__bookAuthor"},void 0,"By ",e.authorName),o("a",{className:"annotatedBookItem__bookInfo__bookLink",href:e.readingNotesUrl},void 0,e.linkText))))},m=function(e){var t=e.annotatedBookData,r=e.size;return r===l.LAYOUT_SIZE.WIDE?p(t):f(t)};m.propTypes={annotatedBookData:i["default"].readingNotesAnnotatedBookItem().isRequired,size:n.PropTypes.string.isRequired},r["default"]=m},{"../../modules/env_utils":13,"../../modules/reading_notes/reading_notes_helper":17,"../shared/gr_prop_types":133,react:"react"}],122:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=e("../shared/gr_prop_types"),i=s(a),l=e("../../modules/reading_notes/reading_notes_helper"),u=e("./reading_notes_header"),d=s(u),c=e("./annotated_books_page"),f=s(c),p=function(e,t){return o("div",{},void 0,o(d["default"],{user:e.user,headline:e.headline}),o(f["default"],{annotatedBooksCollection:e.annotatedBooksCollection,nextToken:e.nextToken,user:e.user,viewerIsOwner:e.viewerIsOwner,ownerHasLinkedAmazonAccount:e.ownerHasLinkedAmazonAccount,createLinking:e.createLinking,updateLinking:e.updateLinking,learnMore:e.learnMore,contactUs:e.contactUs,size:t}))},m=function(e){return o("div",{className:"gr-annotatedBooksPage"},void 0,o("div",{className:"gr-annotatedBooksPage--wide"},void 0,p(e,l.LAYOUT_SIZE.WIDE)),o("div",{className:"gr-annotatedBooksPage--narrow"},void 0,p(e,l.LAYOUT_SIZE.NARROW)))};m.propTypes={user:i["default"].user().isRequired,headline:n.PropTypes.string.isRequired,annotatedBooksCollection:n.PropTypes.array,nextToken:n.PropTypes.string,viewerIsOwner:n.PropTypes.bool.isRequired,ownerHasLinkedAmazonAccount:n.PropTypes.bool.isRequired,createLinking:n.PropTypes.string,updateLinking:n.PropTypes.string,learnMore:n.PropTypes.string,
contactUs:n.PropTypes.string},r["default"]=m},{"../../modules/reading_notes/reading_notes_helper":17,"../shared/gr_prop_types":133,"./annotated_books_page":124,"./reading_notes_header":125,react:"react"}],123:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n),i=e("react"),l=e("../shared/gr_prop_types"),u=s(l),d=e("lodash"),c=e("./annotated_book_item"),f=s(c);r["default"]=a["default"].createClass({displayName:"AnnotatedBooksList",propTypes:{annotatedBooksCollection:i.PropTypes.array.isRequired,nextToken:i.PropTypes.string,user:u["default"].user().isRequired,size:i.PropTypes.string.isRequired},render:function(){var e=this;return o("div",{className:"annotatedBooksList"},void 0,(0,d.map)(this.props.annotatedBooksCollection,function(t){return o(f["default"],{annotatedBookData:t,size:e.props.size},t.asin)}),this.props.nextToken?o("div",{className:"annotatedBooksList__loadMoreContainer"},void 0,o("button",{className:"annotatedBooksList__loadMoreButton gr-button gr-button--dark"},void 0,"Load More")):null)}})},{"../gr_component_factory":91,"../shared/gr_prop_types":133,"./annotated_book_item":121,lodash:"lodash",react:"react"}],124:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n),i=e("react"),l=e("../shared/gr_prop_types"),u=s(l),d=e("lodash"),c=e("./annotated_books_list"),f=s(c);r["default"]=a["default"].createClass({displayName:"AnnotatedBooksPage",propTypes:{annotatedBooksCollection:i.PropTypes.array,nextToken:i.PropTypes.string,user:u["default"].user().isRequired,viewerIsOwner:i.PropTypes.bool.isRequired,ownerHasLinkedAmazonAccount:i.PropTypes.bool.isRequired,createLinking:i.PropTypes.string,updateLinking:i.PropTypes.string,learnMore:i.PropTypes.string,contactUs:i.PropTypes.string,size:i.PropTypes.string.isRequired},createLinkHandler:function(e){e.preventDefault(),GR_Amazon.askToConnect(this.props.createLinking)},render:function(){var e=this.props.annotatedBooksCollection,t=this.props.ownerHasLinkedAmazonAccount,r=this.props.viewerIsOwner,s=void 0;return s=!t&&r?this.renderUnlinkedView():(0,d.isEmpty)(e)&&r?this.renderFirstPersonEmptyView():this.renderCollection(),o("div",{className:"annotatedBooksPage"},void 0,s)},renderUnlinkedView:function(){return o("div",{className:"annotatedBooksPage__unlinked"},void 0,o("div",{className:"annotatedBooksPage__unlinked__gkLogo"},void 0),o("p",{className:"annotatedBooksPage__unlinked__description"},void 0,"Link your Goodreads and Amazon accounts to access your Kindle notes and highlights on Goodreads."),o("p",{className:"annotatedBooksPage__unlinked__learnMore"},void 0,o("a",{href:this.props.learnMore},void 0,"Learn More about Kindle Notes & Highlights")),o("div",{className:"annotatedBooksPage__unlinked__linkBtn"},void 0,o("button",{className:"gr-button gr-button--dark gr-button--fullWidth",onClick:this.createLinkHandler},void 0,"Connect your accounts")))},renderFirstPersonEmptyView:function(){return o("div",{className:"annotatedBooksPage__firstPersonEmpty"},void 0,o("div",{className:"annotatedBooksPage__firstPersonEmpty__description"},void 0,"It looks like you don’t have any Kindle ebooks with notes or highlights.",o("a",{className:"annotatedBooksPage__firstPersonEmpty__description__link",href:this.props.learnMore},void 0,"Learn More"),"about Kindle Notes & Highlights and",o("a",{className:"annotatedBooksPage__firstPersonEmpty__description__link",href:this.props.contactUs},void 0,"contact us"),"if you have any questions."),o("div",{className:"annotatedBooksPage__firstPersonEmpty__content"},void 0,o("div",{className:"annotatedBooksPage__firstPersonEmpty__gkLogo"},void 0),o("p",{className:"annotatedBooksPage__firstPersonEmpty__status"},void 0,"Your Goodreads account is connected to your Amazon account."),o("div",{className:"annotatedBooksPage__firstPersonEmpty__updateLink"},void 0,o("a",{href:this.props.updateLinking},void 0,"Update account linking"))))},renderCollection:function(){return o("div",{className:"annotatedBooksPage__collection"},void 0,o("div",{className:"annotatedBooksPage__collection__description"},void 0,this.props.viewerIsOwner?o("span",{},void 0,"Below are all of the books in your Kindle Library with highlights, starting with the most recently updated."):o("span",{},void 0,"Join in the conversation. View, like and comment on ",this.props.user.firstName,"'s notes and highlights.")),o(f["default"],{annotatedBooksCollection:this.props.annotatedBooksCollection,nextToken:this.props.nextToken,user:this.props.user,size:this.props.size}))}})},{"../gr_component_factory":91,"../shared/gr_prop_types":133,"./annotated_books_list":123,lodash:"lodash",react:"react"}],125:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n),i=e("react"),l=e("../shared/gr_prop_types"),u=s(l),d=e("../../modules/shape_icon_values"),c=e("../user/user_icon"),f=s(c);r["default"]=a["default"].createClass({displayName:"ReadingNotesHeader",propTypes:{user:u["default"].user().isRequired,headline:i.PropTypes.string.isRequired},render:function(){return o("div",{className:"readingNotesHeader"},void 0,o("div",{className:"readingNotesHeader__userIcon"},void 0,o(f["default"],{user:this.props.user,size:d.ICON_SIZES.LARGE})),o("span",{className:"readingNotesHeader__headline"},void 0,this.props.headline))}})},{"../../modules/shape_icon_values":18,"../gr_component_factory":91,"../shared/gr_prop_types":133,"../user/user_icon":150,react:"react"}],126:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("lodash"),u=s(l),d=e("../gr_component_factory"),c=s(d),f=e("reflux"),p=s(f),m=e("react-onclickoutside"),_=s(m),h=e("classnames"),g=s(h),v=e("../../modules/keys"),y=s(v),b=e("../../react_stores/book_search_store_factory"),S=s(b),T=e("./book_search_results"),k=s(T),P=e("../spinner"),N=s(P),w=e("../../react_mixins/factory_store_mixin"),R=s(w),x=300;r["default"]=c["default"].createClass({displayName:"BookSearch",mixins:[_["default"],p["default"].ListenerMixin,(0,R["default"])(S["default"])],propTypes:{onChooseResult:i["default"].PropTypes.func.isRequired,maxResults:i["default"].PropTypes.number,shelfName:i["default"].PropTypes.string,searchPath:i["default"].PropTypes.string.isRequired,closeAfterResultChosen:i["default"].PropTypes.bool,autocompleteUrl:i["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{maxResults:5,closeAfterResultChosen:!1}},componentDidMount:function(){var e=this;this.delayedSearch=u["default"].debounce(function(t){e.actions.search(t.target.value,e.props.autocompleteUrl)},x)},hide:function(){this.actions.setShowResultsContainer(!1)},handleClickOutside:function(){this.hide()},handleSearch:function(e){u["default"].isEmpty(e.target.value)?this.hide():(e.persist(),this.delayedSearch(e))},handleClick:function(e){u["default"].isEmpty(this.state.query)||this.handleSearch(e)},handleChoice:function(e){this.props.onChooseResult(e),this.props.closeAfterResultChosen&&this.hide()},handleKeyPress:function(e){var t=Math.min(this.props.maxResults,this.state.results.length);y["default"].isEnter(e.keyCode)&&null!==this.state.activeResult?(this.handleChoice(this.state.activeResult),e.preventDefault()):y["default"].isArrowDown(e.keyCode)?this.actions.selectNextResult(t):y["default"].isArrowUp(e.keyCode)?this.actions.selectPreviousResult(t):y["default"].isEscape(e.keyCode)&&this.hide()},renderInputIcon:function(){var e=(0,g["default"])("searchBox__icon",{"searchBox__icon--loadingSpinner":this.state.showLoadingSpinner,"searchBox__icon--magnifyingGlass gr-iconButton":!this.state.showLoadingSpinner});return this.state.showLoadingSpinner?n("span",{className:e},void 0,n(N["default"],{})):n("button",{type:"submit",className:e,"aria-label":"Search"})},render:function(){var e=(0,g["default"])(this.withBemModifiers("searchBox")),t=(0,g["default"])(this.withBemModifiers("searchBox__input"));return n("div",{acceptCharset:"UTF-8",className:e,onKeyDown:this.handleKeyPress},void 0,n("form",{autoComplete:"off",action:this.props.searchPath,role:"search","aria-label":"Search for books to add to your shelves"},void 0,n("input",{className:t,autoComplete:"off",name:"q",type:"text",placeholder:"Search books","aria-label":"Search books",onClick:this.handleClick,onChange:this.handleSearch,"aria-controls":"searchResults"}),this.renderInputIcon(),this.state.showResultsContainer?i["default"].createElement(k["default"],o({},this.props,this.state,{onChooseResult:this.handleChoice,mouseoverAction:this.actions.selectSpecificResult})):null))}})},{"../../modules/keys":16,"../../react_mixins/factory_store_mixin":170,"../../react_stores/book_search_store_factory":174,"../gr_component_factory":91,"../spinner":142,"./book_search_results":128,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],127:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("../shared/gr_prop_types"),d=s(u),c=e("classnames"),f=s(c),p=e("../author/author_badge"),m=s(p);r["default"]=l["default"].createClass({displayName:"BookSearchResult",propTypes:{book:d["default"].book().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,f["default"])("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","searchResults__result");return o("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.book)}},void 0,o("img",{className:"gr-mediaBox__media",src:this.props.book.imageUrl,alt:""}),o("div",{className:"gr-mediaBox__desc"},void 0,o("div",{className:"gr-book__title gr-book__title--navbar u-defaultType"},void 0,this.props.book.title),o("div",{className:"gr-book__author gr-book__author--navbar"},void 0,"by ",this.props.book.author.name,a["default"].createElement(m["default"],this.props.book.author))))}})},{"../author/author_badge":52,"../gr_component_factory":91,"../shared/gr_prop_types":133,classnames:"classnames",react:"react"}],128:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=s(i),u=e("classnames"),d=s(u),c=e("../drop_down_list"),f=s(c),p=e("./book_search_result"),m=s(p),_=e("../gr_component_factory"),h=s(_);r["default"]=h["default"].createClass({displayName:"BookSearchResults",propTypes:{maxResults:a["default"].PropTypes.number.isRequired,query:a["default"].PropTypes.string,results:a["default"].PropTypes.array.isRequired,shelfName:a["default"].PropTypes.string,searchPath:a["default"].PropTypes.string,onChooseResult:a["default"].PropTypes.func.isRequired,mouseoverAction:a["default"].PropTypes.func.isRequired,activeResult:a["default"].PropTypes.shape({title:a["default"].PropTypes.string.isRequired,bookId:a["default"].PropTypes.string.isRequired})},renderLastSearchResultItem:function(e){var t=(0,d["default"])("gr-buttonAsLink","searchResults__lastItem",this.withBemElement("searchResults","lastItem"));return o("button",{className:t,type:"submit"},void 0,e)},render:function(){var e=this,t=(0,d["default"])(this.withBemModifiers("searchResults"),"gr-box","gr-box--withShadow");return o("div",{className:t,id:"bookSearchResults"+this.props.query+this.props.results.length,"aria-live":"polite","aria-label":"Book search results"},void 0,o(f["default"],{maxListItems:this.props.maxResults},void 0,this.props.results.length>0?l["default"].map(l["default"].slice(this.props.results,0,this.props.maxResults),function(t){return o("div",{className:(0,d["default"])("searchResults__item",{"searchResults__item--active":t===e.props.activeResult}),onMouseOver:function(){e.props.mouseoverAction(t.bookId)}},t.bookId,o(m["default"],{book:t,onChooseResult:e.props.onChooseResult}))}):this.renderLastSearchResultItem('Search for "'+this.props.query+'"…'),this.props.results.length>0?this.renderLastSearchResultItem('See all results for "'+this.props.query+'"'):null))}})},{"../drop_down_list":78,"../gr_component_factory":91,"./book_search_result":127,classnames:"classnames",lodash:"lodash",react:"react"}],129:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("./gr_component_factory"),u=s(l),d=e("classnames"),c=s(d),f=e("../modules/shape_icon_values"),p=e("lodash");r["default"]=u["default"].createClass({displayName:"ShapeIcon",propTypes:{imageUrl:i["default"].PropTypes.string.isRequired,imageAlt:i["default"].PropTypes.string.isRequired,includeLink:i["default"].PropTypes.bool,linkUrl:i["default"].PropTypes.string,size:i["default"].PropTypes.oneOf((0,p.values)(f.ICON_SIZES)),shape:i["default"].PropTypes.oneOf((0,p.values)(f.ICON_SHAPES)),border:i["default"].PropTypes.bool},getShapeClass:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=this.props.shape+"Icon";return e&&(t+="--"+e),t},getDefaultProps:function(){return{includeLink:!1,size:f.ICON_SIZES.SMALL,shape:f.ICON_SHAPES.CIRCLE,border:!1}},render:function(){var e,t=(0,c["default"])(this.props.className,(e={},o(e,""+this.getShapeClass(),!0),o(e,""+this.getShapeClass("medium"),this.props.size===f.ICON_SIZES.MEDIUM),o(e,""+this.getShapeClass("large"),this.props.size===f.ICON_SIZES.LARGE),o(e,""+this.getShapeClass("border"),this.props.border),e));return this.props.includeLink&&this.props.linkUrl?n("a",{href:this.props.linkUrl},void 0,n("img",{className:t,src:this.props.imageUrl,alt:this.props.imageAlt})):n("img",{className:t,src:this.props.imageUrl,alt:this.props.imageAlt})}})},{"../modules/shape_icon_values":18,"./gr_component_factory":91,classnames:"classnames",lodash:"lodash",react:"react"}],130:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./gr_component_factory"),l=s(i);r["default"]=l["default"].createClass({displayName:"ShareButton",propTypes:{textLabel:a["default"].PropTypes.string},getDefaultProps:function(){return{textLabel:"Share"}},render:function(){return o("button",{className:"gr-shareButton",type:"button"},void 0,o("span",{className:"gr-shareButton__innerWrapper"},void 0,o("span",{className:"gr-shareButton__icon"}),o("span",{className:"gr-shareButton__textLabel"},void 0,this.props.textLabel)))}})},{"./gr_component_factory":91,react:"react"}],131:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("./gr_component_factory"),u=s(l),d=e("reflux"),c=s(d),f=e("./modal_trigger"),p=s(f),m=e("./share_button"),_=s(m),h=e("./modal"),g=s(h),v=e("./share_social"),y=s(v),b=e("../react_stores/share_dialog_store"),S=s(b),T=e("../react_actions/share_dialog_actions"),k=s(T),P=e("classnames"),N=s(P);r["default"]=u["default"].createClass({displayName:"ShareDialog",mixins:[c["default"].connect(S["default"],"sharingDialog")],propTypes:{includePreview:i["default"].PropTypes.bool,social:i["default"].PropTypes.shape({inModal:i["default"].PropTypes.shape({facebook:i["default"].PropTypes.bool.isRequired,twitter:i["default"].PropTypes.bool.isRequired,pinterest:i["default"].PropTypes.bool.isRequired,copyLink:i["default"].PropTypes.bool.isRequired}).isRequired,outsideModal:i["default"].PropTypes.shape({facebook:i["default"].PropTypes.bool.isRequired,twitter:i["default"].PropTypes.bool.isRequired,pinterest:i["default"].PropTypes.bool.isRequired,copyLink:i["default"].PropTypes.bool.isRequired}).isRequired,fbOptions:i["default"].PropTypes.object,twitterOptions:i["default"].PropTypes.object,pinterestOptions:i["default"].PropTypes.object}).isRequired,sharingData:i["default"].PropTypes.shape({resourceTypeFriendlyText:i["default"].PropTypes.string.isRequired,resourceId:i["default"].PropTypes.number.isRequired,sharerUserId:i["default"].PropTypes.number}).isRequired},getDefaultProps:function(){return{includePreview:!1}},getInitialState:function(){return{uniqueId:Math.random(1e6)}},getResourceTypeIdentifier:function(){return this.props.sharingData.resourceTypeFriendlyText.replace(/\s/g,"").toLowerCase()},getShareModalId:function(){return"share-"+this.getResourceTypeIdentifier()+"-modal"+this.state.uniqueId},socialExists:function(e){return this.props.social[e].facebook||this.props.social[e].twitter||this.props.social[e].pinterest||this.props.social[e].copyLink},renderPreview:function(){return this.props.includePreview?n("div",{className:"shareModal__previewContainer"},void 0,n("h4",{},void 0,"Preview Comp")):null},renderSocialInModal:function(e){return this.socialExists("inModal")?n("div",{className:"shareModal__socialContainer"},void 0,n("div",{className:"shareModal__socialPrompt"},void 0,e," share on:"),i["default"].createElement(y["default"],o({},this.props.social.inModal,{fbOptions:this.props.social.fbOptions,twitterOptions:this.props.social.twitterOptions,pinterestOptions:this.props.social.pinterestOptions,metricName:this.getResourceTypeIdentifier()+"_sharingModal"}))):null},renderErrorMessaging:function(){return this.state.sharingDialog.textTooLong?n("span",{className:"gr-smallAlert",role:"alert"},void 0,"Text exceeds limit of 420 characters"):null},renderModalContent:function(){var e=this;return this.state.sharingDialog.shared?n("span",{className:"shareModal"},void 0,n("h2",{className:"gr-h2 shareModal__heading"},void 0,"Shared!"),n("div",{className:"shareModal__bottomContainer--shared"},void 0,this.renderSocialInModal("Also"))):n("span",{className:"shareModal"},void 0,n("h2",{className:"gr-h2 shareModal__heading"},void 0,"Share this ",this.props.sharingData.resourceTypeFriendlyText," on Goodreads"),n("input",{type:"text","aria-label":"Enter share text",placeholder:"Say something about this "+this.props.sharingData.resourceTypeFriendlyText+"...",value:this.state.sharingDialog.sharingTextInputValue,onChange:function(e){k["default"].updateSharingTextInputValue(e.target.value)},className:"gr-textInput shareModal__textInput"}),this.renderErrorMessaging(),this.renderPreview(),n("div",{className:(0,N["default"])("shareModal__bottomContainer",{"shareModal__bottomContainer--noSocial":!this.socialExists("inModal")})},void 0,this.renderSocialInModal("Or"),n("button",{className:"gr-button gr-button--extraLarge shareModal__button",onClick:function(){return k["default"].submitShare(e.props.sharingData,e.state.sharingDialog.sharingTextInputValue)},type:"button",disabled:this.state.sharingDialog.shareModalButtonDisabled},void 0,"Share")))},renderSocialOutsideModal:function(){return this.socialExists("outsideModal")?i["default"].createElement(y["default"],o({},this.props.social.outsideModal,{fbOptions:this.props.social.fbOptions,twitterOptions:this.props.social.twitterOptions,pinterestOptions:this.props.social.pinterestOptions,metricName:this.getResourceTypeIdentifier()+"_shareModuleBar",bemModifiers:"shareBar"})):null},render:function(){var e=this,t=this.getShareModalId();return n("div",{},void 0,n(g["default"],{id:t,bemModifiers:["small","share"]},void 0,this.renderModalContent()),n("div",{className:"shareModuleBar"},void 0,n(p["default"],{id:t,clickHandler:function(){return k["default"].openShareModal(e.getResourceTypeIdentifier())},bemModifiers:"shareModule"},void 0,n(_["default"],{})),this.renderSocialOutsideModal()))}})},{"../react_actions/share_dialog_actions":37,"../react_stores/share_dialog_store":187,"./gr_component_factory":91,"./modal":117,"./modal_trigger":118,"./share_button":130,"./share_social":132,classnames:"classnames",react:"react",reflux:"reflux"}],132:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./gr_component_factory"),l=s(i),u=(e("../modules/ajax/ajax_helper"),e("./sharing/facebook_share")),d=s(u),c=e("./sharing/twitter_share"),f=s(c),p=e("./sharing/pinterest_share"),m=s(p);r["default"]=l["default"].createClass({displayName:"ShareSocial",propTypes:{facebook:a["default"].PropTypes.bool,twitter:a["default"].PropTypes.bool,pinterest:a["default"].PropTypes.bool,copyLink:a["default"].PropTypes.bool,fbOptions:a["default"].PropTypes.object,twitterOptions:a["default"].PropTypes.object,pinterestOptions:a["default"].PropTypes.object,metricName:a["default"].PropTypes.string},getDefaultProps:function(){return{facebook:!1,twitter:!1,pinterest:!1,copyLink:!1,metricName:""}},renderSocialPlatform:function(e){if(!this.props[e])return null;var t="SocialSharing_"+this.props.metricName+"_"+e;switch(e){case"facebook":return o(d["default"],{options:this.props.fbOptions,metricName:t,bemModifiers:this.props.bemModifiers});case"twitter":return o(f["default"],{options:this.props.twitterOptions,metricName:t,bemModifiers:this.props.bemModifiers});case"pinterest":return o(m["default"],{options:this.props.pinterestOptions,metricName:t,bemModifiers:this.props.bemModifiers})}},render:function(){return o("div",{className:this.withBemModifiers("shareSocialButtons")},void 0,this.renderSocialPlatform("facebook"),this.renderSocialPlatform("twitter"),this.renderSocialPlatform("pinterest"))}})},{"../modules/ajax/ajax_helper":5,"./gr_component_factory":91,"./sharing/facebook_share":135,"./sharing/pinterest_share":136,"./sharing/twitter_share":137,react:"react"}],133:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e){function t(t,r,s,o){return o||(o="<<anonymous>>"),l["default"].isNull(r[s])||l["default"].isUndefined(r[s])?t?new Error("Required property `"+s+"` was not specified in "+("`"+o+"`.")):null:e(r,s,o)}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=s(i),u=function(e,t,r){var s=e[t],o=l["default"].isString(s)?new Date(s):s;return!l["default"].isDate(o)||l["default"].isNaN(o.getTime())?new Error("Property '"+t+"' must be a Date. "+r+" was supplied: '"+s+"'."):void 0},d=function(e,t,r){var s=e[t];return 0>=s?new Error("Property '"+t+"' must be > 0. "+r+" was supplied: '"+s+"'."):void 0},c=function(e,t){return l["default"].merge({},e,t)},f=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={viewableName:a["default"].PropTypes.string.isRequired,profileImage:a["default"].PropTypes.string.isRequired,profileUrl:a["default"].PropTypes.string,informalName:a["default"].PropTypes.string};return a["default"].PropTypes.shape(c(t,e))},p=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={bookId:a["default"].PropTypes.string,workId:a["default"].PropTypes.string,bookUrl:a["default"].PropTypes.string,authorName:a["default"].PropTypes.string,title:a["default"].PropTypes.string,imageUrl:a["default"].PropTypes.string,numPages:a["default"].PropTypes.number};return a["default"].PropTypes.shape(c(t,e))},m=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=g();return a["default"].PropTypes.shape(c(t,e))},_=function(){return a["default"].PropTypes.shape({id:a["default"].PropTypes.number.isRequired,name:a["default"].PropTypes.string.isRequired,isGoodreadsAuthor:a["default"].PropTypes.bool,profileImage:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string.isRequired})},h=function(){return{html:a["default"].PropTypes.string.isRequired,truncatedHtml:a["default"].PropTypes.string}},g=function(){return{html:a["default"].PropTypes.string,fullContentUrl:a["default"].PropTypes.string,fullContentText:a["default"].PropTypes.string,truncated:a["default"].PropTypes.bool.isRequired,className:a["default"].PropTypes.string,bookDescriptionTargetingData:a["default"].PropTypes.object}},v=function(){return a["default"].PropTypes.shape({user:f().isRequired,friendUser:f().isRequired,isMyFriend:a["default"].PropTypes.bool.isRequired,addFriendUrl:a["default"].PropTypes.string,compareBooksUrl:a["default"].PropTypes.string,ratingDetailsText:a["default"].PropTypes.string,currentlyReadingBook:p()})},y=function(){return a["default"].PropTypes.shape({user:f().isRequired,followingUser:f().isRequired,ratingDetailsText:a["default"].PropTypes.string,currentlyReadingBook:p()})},b=function(){return a["default"].PropTypes.shape({type:a["default"].PropTypes.string,id:a["default"].PropTypes.number,uri:a["default"].PropTypes.string})},S=function(){return a["default"].PropTypes.shape({canComment:a["default"].PropTypes.bool.isRequired,commentable:a["default"].PropTypes.bool.isRequired,subjectKey:a["default"].PropTypes.string.isRequired,subject:b(),subjectUrl:a["default"].PropTypes.string})},T=function(){return a["default"].PropTypes.shape({key:a["default"].PropTypes.string.isRequired,label:a["default"].PropTypes.string.isRequired,isLikeable:a["default"].PropTypes.bool.isRequired})},k=function(){return a["default"].PropTypes.shape({author:_().isRequred,title:a["default"].PropTypes.string,url:a["default"].PropTypes.string})},P=function(){return a["default"].PropTypes.shape({title:a["default"].PropTypes.string,body:a["default"].PropTypes.object.isRequired,url:a["default"].PropTypes.string,imageUrl:a["default"].PropTypes.string,typeDisplayName:a["default"].PropTypes.string})},N=function(){return a["default"].PropTypes.shape({user:f().isRequired,author:_().isRequred,userAuthorFollowingsUrl:a["default"].PropTypes.string})},w=function(){return a["default"].PropTypes.shape({author:_().isRequired,message:a["default"].PropTypes.string,url:a["default"].PropTypes.string.isRequired})},R=function(){return a["default"].PropTypes.shape({author:_().isRequired,body:a["default"].PropTypes.object.isRequired,url:a["default"].PropTypes.string.isRequired,quotesAuthorUrl:a["default"].PropTypes.string.isRequired})},x=function(){return a["default"].PropTypes.shape({name:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired,iconUrl:a["default"].PropTypes.string.isRequired,id:a["default"].PropTypes.number.isRequired,lastActiveAt:o(u)})},A=function(){return a["default"].PropTypes.shape({id:a["default"].PropTypes.number.isRequired,title:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired,totalPosts:a["default"].PropTypes.string.isRequired,newPosts:a["default"].PropTypes.string,newCommentsUrl:a["default"].PropTypes.string,updatedAt:o(u),folder:a["default"].PropTypes.shape({name:a["default"].PropTypes.string,url:a["default"].PropTypes.string})})},C={user:f().isRequired,pollName:a["default"].PropTypes.string.isRequired,answer:a["default"].PropTypes.object.isRequired,url:a["default"].PropTypes.string.isRequired,imageUrl:a["default"].PropTypes.string.isRequired,isGroupPoll:a["default"].PropTypes.bool.isRequired,
isChoicePoll:a["default"].PropTypes.bool.isRequired,groupName:a["default"].PropTypes.string,groupUrl:a["default"].PropTypes.string},E=function(){return a["default"].PropTypes.shape(C)},M=function(){return a["default"].PropTypes.shape(c(C,{choiceYear:a["default"].PropTypes.string.isRequired,choiceUrl:a["default"].PropTypes.string.isRequired,badgeUrl:a["default"].PropTypes.string.isRequired,votedBook:p().isRequired}))},L=function(){return{category:a["default"].PropTypes.number.isRequired,questionText:a["default"].PropTypes.string.isRequired,isSpoiler:a["default"].PropTypes.bool.isRequired,questionUrl:a["default"].PropTypes.string.isRequired,user:f().isRequired,authorQuestionsUrl:a["default"].PropTypes.string,book:p()}},U=function(){return{user:f().isRequired,answerText:a["default"].PropTypes.shape(g()),isSpoiler:a["default"].PropTypes.bool.isRequired,communityQuestion:a["default"].PropTypes.shape(L()).isRequired}},I=function(){return a["default"].PropTypes.shape({book:p(),customText:a["default"].PropTypes.object,helpLink:a["default"].PropTypes.string,defaultIcon:a["default"].PropTypes.string,numAdditionalFriends:a["default"].PropTypes.number,friendActionText:a["default"].PropTypes.string,firstFriend:f(),customTextReview:a["default"].PropTypes.object,similarBook:p(),similarBookShelf:a["default"].PropTypes.string,similarBookShelfUrl:a["default"].PropTypes.string,genres:a["default"].PropTypes.array})},O=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={actor:a["default"].PropTypes.shape({viewableName:a["default"].PropTypes.string,profileImage:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string}),actors:a["default"].PropTypes.array,createdAt:a["default"].PropTypes.string,body:a["default"].PropTypes.string,resource:a["default"].PropTypes.shape({text:a["default"].PropTypes.string,url:a["default"].PropTypes.string}),viewed:a["default"].PropTypes["boolean"],moreActors:a["default"].PropTypes["boolean"]};return a["default"].PropTypes.shape(c(t,e))},D=a["default"].PropTypes.shape({label:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired}),j=function(){return a["default"].PropTypes.shape({uri:a["default"].PropTypes.string,book:p(),description:a["default"].PropTypes.shape(h()),dealPrice:a["default"].PropTypes.string,listPrice:a["default"].PropTypes.string,expirationDate:a["default"].PropTypes.string,genres:a["default"].PropTypes.array,tags:a["default"].PropTypes.array,retailerLinks:a["default"].PropTypes.shape({preferred:D.isRequired,additional:a["default"].PropTypes.arrayOf(D)})})},B=function(e){return a["default"].PropTypes.shape({destination:a["default"].PropTypes.string.isRequired,type:a["default"].PropTypes.string.isRequired,object:e})},q=function(){return B(a["default"].PropTypes.shape({id:a["default"].PropTypes.string.isRequired,name:a["default"].PropTypes.string.isRequired,isGoodreadsAuthor:a["default"].PropTypes.bool,profileImage:a["default"].PropTypes.string}))},F=function(){return B(a["default"].PropTypes.shape({id:a["default"].PropTypes.string.isRequired,authorName:a["default"].PropTypes.string.isRequired,isGoodreadsAuthor:a["default"].PropTypes.bool,title:a["default"].PropTypes.string.isRequired,imageUrl:a["default"].PropTypes.string}))},G=function(){return B(a["default"].PropTypes.shape({id:a["default"].PropTypes.string.isRequired,name:a["default"].PropTypes.string.isRequired,profileImage:a["default"].PropTypes.string}))},H=function(){return a["default"].PropTypes.shape({asin:a["default"].PropTypes.string.isRequired,imageUrl:a["default"].PropTypes.string.isRequired,title:a["default"].PropTypes.string.isRequired,authorName:a["default"].PropTypes.string.isRequired,sharedCount:a["default"].PropTypes.number.isRequired,highlightCount:a["default"].PropTypes.number,noteCount:a["default"].PropTypes.number,readingNotesUrl:a["default"].PropTypes.string.isRequired})};r["default"]={user:f,author:_,blogNewsfeedResource:P,book:p,bookDescription:m,quote:R,commentSubject:b,comment:S,like:T,group:x,topic:A,authorBlogPostNewsfeedResource:k,authorFollowNewsfeedResource:N,authorQaSettingNewsfeedResource:w,communityQuestion:L,communityAnswer:U,friendNewsfeedResource:v,userFollowingNewsfeedResource:y,pollVoteNewsfeedResource:E,expandableHtml:h,truncatedHtml:g,choicePollVoteNewsfeedResource:M,date:o(u),naturalNumber:o(d),creative:I,notification:O,deal:j,searchResults:{book:F,author:q,user:G},readingNotesAnnotatedBookItem:H}},{lodash:"lodash",react:"react"}],134:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),n=s(o),a=e("react-dom"),i=s(a),l=e("lodash"),u=s(l),d=e("../user_content/spoiler"),c=s(d);r["default"]={replaceSpoilerHTMLWithReactComponents:function(e,t){var r=t||window.$j,s=r(".jsShowSpoiler",e);u["default"].each(s,function(e){var t=r(e),s=t.next(".spoilerContainer");if(s){var o=s.text().replace("(hide spoiler)",""),a=n["default"].createElement(c["default"],{html:o}),l=r("<span></span>");t.replaceWith(l),i["default"].render(a,r(l)[0])}})}}},{"../user_content/spoiler":154,lodash:"lodash",react:"react","react-dom":"react-dom"}],135:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./../gr_component_factory"),l=s(i),u=e("../../modules/ajax/ajax_helper");r["default"]=l["default"].createClass({displayName:"FacebookShare",propTypes:{options:a["default"].PropTypes.shape({name:a["default"].PropTypes.string,link:a["default"].PropTypes.string,description:a["default"].PropTypes.string,caption:a["default"].PropTypes.string,picture:a["default"].PropTypes.string,properties:a["default"].PropTypes.object,action_link_text:a["default"].PropTypes.string,resource_type:a["default"].PropTypes.string}).isRequired,metricName:a["default"].PropTypes.string},onFacebookButtonClick:function(){this.props.metricName&&(0,u.httpPost)("/track/track_click",{data:{feature:this.props.metricName}}),$grfb.feedDialog(this.props.options)},render:function(){var e=this;return o("button",{className:this.withBemModifiers("shareSocialButtons__button")+" shareSocialButtons__button--facebook","aria-label":"Share to Facebook",type:"button",onClick:function(){return e.onFacebookButtonClick()}})}})},{"../../modules/ajax/ajax_helper":5,"./../gr_component_factory":91,react:"react"}],136:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./../gr_component_factory"),l=s(i),u=e("../../modules/ajax/ajax_helper"),d=e("../../modules/child_window_helper"),c=s(d);r["default"]=l["default"].createClass({displayName:"PinterestShare",propTypes:{options:a["default"].PropTypes.shape({desription:a["default"].PropTypes.string,url:a["default"].PropTypes.string,media:a["default"].PropTypes.string}).isRequired,metricName:a["default"].PropTypes.string,windowSpecs:a["default"].PropTypes.object},getDefaultProps:function(){return{windowSpecs:{left:400,top:200,width:700,height:800}}},onPinterestButtonClick:function(){this.props.metricName&&(0,u.httpPost)("/track/track_click",{data:{feature:this.props.metricName}}),c["default"].openSocialShareWindow("https://pinterest.com/pin/create/link/",this.props.options,this.props.windowSpecs)},render:function(){var e=this;return o("button",{className:this.withBemModifiers("shareSocialButtons__button")+" shareSocialButtons__button--pinterest","aria-label":"Share to Pinterest",type:"button",onClick:function(){return e.onPinterestButtonClick()}})}})},{"../../modules/ajax/ajax_helper":5,"../../modules/child_window_helper":8,"./../gr_component_factory":91,react:"react"}],137:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./../gr_component_factory"),l=s(i),u=e("../../modules/ajax/ajax_helper"),d=e("../../modules/child_window_helper"),c=s(d);r["default"]=l["default"].createClass({displayName:"TwitterShare",propTypes:{options:a["default"].PropTypes.shape({text:a["default"].PropTypes.string,url:a["default"].PropTypes.string,via:a["default"].PropTypes.string}).isRequired,metricName:a["default"].PropTypes.string,windowSpecs:a["default"].PropTypes.object},getDefaultProps:function(){return{windowSpecs:{left:400,top:200,width:600,height:500}}},onTwitterButtonClick:function(){this.props.metricName&&(0,u.httpPost)("/track/track_click",{data:{feature:this.props.metricName}}),c["default"].openSocialShareWindow("https://twitter.com/intent/tweet/",this.props.options,this.props.windowSpecs)},render:function(){var e=this;return o("button",{className:this.withBemModifiers("shareSocialButtons__button")+" shareSocialButtons__button--twitter","aria-label":"Share to Twitter",type:"button",onClick:function(){return e.onTwitterButtonClick()}})}})},{"../../modules/ajax/ajax_helper":5,"../../modules/child_window_helper":8,"./../gr_component_factory":91,react:"react"}],138:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n),i=e("lodash"),l=s(i),u=e("classnames"),d=s(u);r["default"]=a["default"].createClass({displayName:"ChoiceSiteAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired,announcementText:React.PropTypes.string.isRequired,targetUrl:React.PropTypes.string,totalVotes:React.PropTypes.number.isRequired},getAriaLabel:function(){return"Read more "+this.props.announcementText},hasTargetUrl:function(){return!l["default"].isEmpty(this.props.targetUrl)},renderAnnouncementTitle:function(){var e=this.hasTargetUrl(),t="siteAnnouncement__title";return e?o("a",{className:(0,d["default"])(t,"gr-hyperlink"),"aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,this.props.announcementText):o("span",{className:t},void 0,this.props.announcementText)},render:function(){return o("div",{className:"siteAnnouncement gr-mediaFlexbox gr-mediaFlexbox--columnDirection"},void 0,o("a",{className:"gr-mediaFlexbox__media siteAnnouncement__masthead",href:this.props.targetUrl},void 0,o("img",{src:this.props.imageUrl,alt:this.props.imageAlt})),o("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__body"},void 0,this.renderAnnouncementTitle(),o("div",{className:"siteAnnouncement__description"},void 0,"See the Nominees"),o("div",{className:"siteAnnouncement__choiceVoteCount"},void 0,this.props.totalVotes.toLocaleString()," votes")))}})},{"../gr_component_factory":91,classnames:"classnames",lodash:"lodash"}],139:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n),i=e("../shape_icon"),l=s(i),u=e("../../modules/shape_icon_values"),d=e("lodash"),c=s(d),f=e("classnames"),p=s(f);r["default"]=a["default"].createClass({displayName:"SimpleSiteAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired,announcementText:React.PropTypes.string.isRequired,targetUrl:React.PropTypes.string},getAriaLabel:function(){return"Read more "+this.props.announcementText},hasTargetUrl:function(){return!c["default"].isEmpty(this.props.targetUrl)},renderIcon:function(){return o(l["default"],{imageUrl:this.props.imageUrl,size:u.ICON_SIZES.MEDIUM,imageAlt:"Site Announcement",border:!0})},renderAnnouncementText:function(){var e=this.hasTargetUrl(),t="siteAnnouncement__simpleText";return e?o("a",{className:(0,p["default"])(t,"gr-hyperlink"),"aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,this.props.announcementText):o("span",{className:t},void 0,this.props.announcementText)},renderSecondaryLinkSection:function(){return this.hasTargetUrl()?o("span",{className:"siteAnnouncement__simpleSecondaryLinkSection"},void 0,o("a",{className:"gr-button gr-button--quiet","aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,"Read more")):null},render:function(){return o("div",{className:"siteAnnouncement\n                      siteAnnouncement--simple\n                      gr-mediaFlexbox\n                      gr-mediaFlexbox--alignItemsCenter"},void 0,o("div",{className:"gr-mediaFlexbox__media"},void 0,this.renderIcon()),o("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__simpleBody"},void 0,o("h5",{className:"gr-h5 gr-h5--noMargin siteAnnouncement__simpleHeader"},void 0,"Goodreads news"),this.renderAnnouncementText()),this.renderSecondaryLinkSection())}})},{"../../modules/shape_icon_values":18,"../gr_component_factory":91,"../shape_icon":129,classnames:"classnames",lodash:"lodash"}],140:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=e("../gr_component_factory"),i=s(a),l=e("./simple_site_announcement"),u=s(l);r["default"]=i["default"].createClass({displayName:"SiteAnnouncement",propTypes:{title:n.PropTypes.string.isRequired,targetUrl:n.PropTypes.string,displayData:n.PropTypes.shape({description:n.PropTypes.string,mastheadUrl:n.PropTypes.string,imageUrl:n.PropTypes.string}).isRequired},shouldRenderLargeAnnouncement:function(){var e=this.props.displayData;return e&&e.description&&e.mastheadUrl},renderLargeAnnouncement:function(){return o("div",{className:"siteAnnouncement gr-mediaFlexbox gr-mediaFlexbox--columnDirection"},void 0,o("a",{className:"gr-mediaFlexbox__media siteAnnouncement__masthead",href:this.props.targetUrl,"aria-label":this.props.title},void 0,o("img",{src:this.props.displayData.mastheadUrl,alt:this.props.title})),o("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__body"},void 0,o("a",{className:"siteAnnouncement__title gr-hyperlink",href:this.props.targetUrl},void 0,this.props.title),o("div",{className:"siteAnnouncement__description"},void 0,this.props.displayData.description)))},render:function(){return this.shouldRenderLargeAnnouncement()?this.renderLargeAnnouncement():o(u["default"],{imageUrl:this.props.displayData.imageUrl,announcementText:this.props.title,targetUrl:this.props.targetUrl})}})},{"../gr_component_factory":91,"./simple_site_announcement":139,react:"react"}],141:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n),i=e("../shape_icon"),l=s(i),u=e("../../modules/shape_icon_values");r["default"]=a["default"].createClass({displayName:"WelcomeAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired},renderIcon:function(){return o(l["default"],{imageUrl:this.props.imageUrl,size:u.ICON_SIZES.MEDIUM,imageAlt:"Welcome to Goodreads",border:!0})},render:function(){return o("div",{className:"siteAnnouncement siteAnnouncement--welcome"},void 0,o("div",{className:"siteAnnouncement__welcomeIcon"},void 0,this.renderIcon()),o("div",{className:"siteAnnouncement__welcomeBody"},void 0,o("h5",{className:"siteAnnouncement__announcementText"},void 0,"Welcome to Goodreads"),o("span",{},void 0,"Meet your favorite book, find your reading community, and manage your reading life.")))}})},{"../../modules/shape_icon_values":18,"../gr_component_factory":91,"../shape_icon":129}],142:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("./gr_component_factory"),a=s(n),i=e("classnames"),l=s(i);r["default"]=a["default"].createClass({displayName:"Spinner",propTypes:{isSmall:React.PropTypes.bool},getDefaultProps:function(){return{isSmall:!1}},render:function(){var e=(0,l["default"])("spinnerContainer",this.props.className),t=this.props.isSmall?"small":null;return o("div",{className:e},void 0,o("div",{className:this.withBemModifiers("spinner",t)},void 0,o("div",{className:this.withBemModifiers("spinner__mask",t)},void 0,o("div",{className:this.withBemModifiers("spinner__maskedCircle",t)},void 0))),o("div",{className:"spinnerFallbackText"},void 0,"Loading…"))}})},{"./gr_component_factory":91,classnames:"classnames"}],143:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),n=s(o),a=e("./gr_component_factory"),i=s(a),l=e("../react_actions/tab_actions"),u=s(l),d={CLICK:"click",HOVER:"hover"};r["default"]=i["default"].createClass({displayName:"Tab",propTypes:{group:n["default"].PropTypes.string.isRequired,name:n["default"].PropTypes.string.isRequired,initiallySelected:n["default"].PropTypes.bool,triggerEventType:n["default"].PropTypes.string},getDefaultProps:function(){return{initiallySelected:!1,triggerEventType:d.CLICK}},componentDidMount:function(){this.props.initiallySelected&&this.selectTab()},selectTab:function(){u["default"].selectTab(this.props.name,this.props.group)},render:function(){var e={};switch(this.props.triggerEventType){case d.CLICK:e.onClick=this.selectTab;break;case d.HOVER:e.onMouseOver=this.selectTab}return n["default"].createElement("span",e,this.props.children)}})},{"../react_actions/tab_actions":39,"./gr_component_factory":91,react:"react"}],144:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./gr_component_factory"),l=s(i),u=e("reflux"),d=s(u),c=e("../react_stores/tabs_store"),f=s(c);r["default"]=l["default"].createClass({displayName:"TabContent",mixins:[d["default"].connect(f["default"],"tabsStore")],propTypes:{group:a["default"].PropTypes.string.isRequired,name:a["default"].PropTypes.string.isRequired},isActive:function(){return this.props.name===this.state.tabsStore[this.props.group]},render:function(){return o("div",{},void 0,this.isActive()?this.props.children:null)}})},{"../react_stores/tabs_store":190,"./gr_component_factory":91,react:"react",reflux:"reflux"}],145:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("../shared/gr_prop_types"),d=s(u),c=e("moment"),f=s(c),p=e("../../modules/date_utils");r["default"]=l["default"].createClass({displayName:"RelativeTime",propTypes:{time:d["default"].date.isRequired,longFormat:a["default"].PropTypes.bool},getDefaultProps:function(){return{longFormat:!1}},getRelativeTime:function(){return this.props.longFormat?(0,f["default"])(new Date(this.props.time)).fromNow():(0,p.fromNow)(this.props.time)},render:function(){return o("time",{dateTime:this.props.time,"aria-label":(0,f["default"])(new Date(this.props.time)).fromNow()},void 0,this.getRelativeTime())}})},{"../../modules/date_utils":10,"../gr_component_factory":91,"../shared/gr_prop_types":133,moment:"moment",react:"react"}],146:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("./gr_component_factory"),l=s(i),u=e("./spinner"),d=s(u),c=e("classnames"),f=s(c);r["default"]=l["default"].createClass({displayName:"ToggleSwitch",propTypes:{switchId:a["default"].PropTypes.string.isRequired,changeHandler:a["default"].PropTypes.func.isRequired,isChecked:a["default"].PropTypes.bool,isDisabled:a["default"].PropTypes.bool,isWaiting:a["default"].PropTypes.bool,labelText:a["default"].PropTypes.string},getDefaultProps:function(){return{isChecked:!1,isDisabled:!1,isWaiting:!1,labelText:""}},render:function(){if(this.props.isWaiting)return o(d["default"],{});var e=(0,f["default"])("toggleSwitch",{"toggleSwitch--disabled":this.props.isDisabled});return o("div",{className:e},void 0,o("label",{className:"toggleSwitch__container"},void 0,o("input",{type:"checkbox",className:"toggleSwitch__checkbox u-visuallyHidden",id:this.props.switchId,checked:this.props.isChecked,onChange:this.props.changeHandler,disabled:this.props.isDisabled,"aria-label":this.props.labelText}),o("div",{className:"toggleSwitch__label"},void 0,o("span",{className:"toggleSwitch__labelInner","aria-hidden":!0}),o("span",{className:"toggleSwitch__labelSwitch"}))))}})},{"./gr_component_factory":91,"./spinner":142,classnames:"classnames",react:"react"}],147:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=e("classnames"),u=s(l),d=e("../../gr_component_factory"),c=s(d),f=c["default"].createClass({displayName:"MenuListGroup",propTypes:{className:a["default"].PropTypes.string},render:function(){var e=(0,u["default"])(this.withBemModifiers("gr-menuListGroup"),this.props.className),t=(0,u["default"])(this.withBemModifiers("gr-menuListGroup__listItem"));return o("ul",{className:e},void 0,(0,i.map)(a["default"].Children.toArray(this.props.children),function(e,r){return o("li",{className:t},r,e)}))}});r["default"]=f},{"../../gr_component_factory":91,classnames:"classnames",lodash:"lodash",react:"react"}],148:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../../gr_component_factory"),l=s(i),u=l["default"].createClass({displayName:"MenuListItem",propTypes:{primaryText:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]),secondaryText:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]),actionLabel:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element])},getDefaultProps:function(){return{bemModifiers:"default"}},render:function(){return o("div",{className:"gr-actionMenuItem"},void 0,o("div",{className:"gr-actionMenuItem__label"},void 0,o("div",{className:this.withBemModifiers("gr-actionMenuItem__primaryText")},void 0,this.props.primaryText),o("div",{className:this.withBemModifiers("gr-actionMenuItem__secondaryText")},void 0,this.props.secondaryText)),o("div",{className:this.withBemModifiers("gr-actionMenuItem__action")},void 0,this.props.actionLabel))}});r["default"]=u},{"../../gr_component_factory":91,react:"react"}],149:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../gr_component_factory"),a=s(n),i=e("../../../react_stores/user/preferences/user_preferences_store"),l=s(i),u=e("../../toggle_switch"),d=s(u),c=e("../mobile/menu_list_group"),f=s(c),p=e("../mobile/menu_list_item"),m=s(p),_=e("lodash"),h=s(_),g=e("reflux"),v=s(g),y=e("../../../react_actions/user/preferences/user_preferences_actions"),b=s(y);r["default"]=a["default"].createClass({displayName:"UserPreferencesDeals",mixins:[v["default"].connect(l["default"],"userPreferencesStore")],propTypes:{dealsOptions:React.PropTypes.object.isRequired,enableFeatureExcludeShelves:React.PropTypes.bool},getDefaultProps:function(){return{enableFeatureExcludeShelves:!1}},togglePreference:function(e,t,r,s){var o=this.state.userPreferencesStore,n=h["default"].merge({},o.preferences.deals),a=n[e],l=e==i.DEAL_PREF_TYPES.EXCLUDE_SHELVES?!s.target.checked:s.target.checked;l?(h["default"].includes(a,t)||(h["default"].isEmpty(a)?a=[t]:a.push(t)),n[e]=a):h["default"].pull(a,t),b["default"].updatePreferences(n,i.PREF_TYPES.DEALS,r)},toggleEventsSubscription:function(e,t){var r=this.state.userPreferencesStore,s=h["default"].merge({},r.preferences.deals);s[i.DEAL_PREF_TYPES.EVENTS]=t.target.checked,b["default"].updatePreferences(s,i.PREF_TYPES.DEALS,e)},toggleWTRDealType:function(e,t){this.togglePreference(i.DEAL_PREF_TYPES.DEAL_TYPES,i.DEAL_TYPES.WTR,e,t)},toggleAuthorsDealType:function(e,t){this.togglePreference(i.DEAL_PREF_TYPES.DEAL_TYPES,i.DEAL_TYPES.AUTHOR,e,t)},toggleGenresDealType:function(e,t){this.togglePreference(i.DEAL_PREF_TYPES.DEAL_TYPES,i.DEAL_TYPES.GENRE,e,t)},toggleGenre:function(e,t,r){this.togglePreference(i.DEAL_PREF_TYPES.GENRE_URIS,e,t,r)},toggleExcludeShelves:function(e,t,r){this.togglePreference(i.DEAL_PREF_TYPES.EXCLUDE_SHELVES,e,t,r)},toggleRetailer:function(e,t,r){this.togglePreference(i.DEAL_PREF_TYPES.RETAILERS,e,t,r)},isDisabled:function(e){return h["default"].include(this.state.userPreferencesStore.status.deals.disabledPreferences,e)},isWaiting:function(e){return h["default"].contains(this.state.userPreferencesStore.status.deals.waiting,e)},buildGenres:function(e){var t=this,r=h["default"].map(e,function(e){var r=h["default"].includes(t.state.userPreferencesStore.preferences.deals.deal_genre_uris,e.uri),s=e.name.text,n="genre-"+h["default"].last(e.uri.split(".")),a=o(d["default"],{isChecked:r,changeHandler:function(r){t.toggleGenre(e.uri,n,r)},isDisabled:t.isDisabled(i.DEAL_PREF_TYPES.GENRE_URIS),labelText:s,switchId:n});return o(m["default"],{primaryText:s,actionLabel:a},e.uri)});return h["default"].isEmpty(r)||r.push(o(m["default"],{secondaryText:"More genres coming soon!"},"genre-moreGenresSoon")),o(f["default"],{className:"u-noTopPadding u-noBottomPadding"},"genre-toggles",r)},buildEventsSubscription:function(){var e=this,t=this.state.userPreferencesStore.preferences.deals.subscribed_to_events_emails,r="events",s=o(d["default"],{isChecked:t,changeHandler:function(t){e.toggleEventsSubscription(r,t)},labelText:"Toggle events",switchId:r});return o(m["default"],{primaryText:"Deals Events",secondaryText:"Email me deals on top-rated ebooks",actionLabel:s},r)},buildRetailers:function(e){var t=this,r=this.state.userPreferencesStore,s=h["default"].map(e,function(e){var s=h["default"].includes(r.preferences.deals.retailers,e.id),n=e.title,a="retailer-"+e.id,l=o(d["default"],{isChecked:s,changeHandler:function(r){t.toggleRetailer(e.id,a,r)},isDisabled:t.isDisabled(i.DEAL_PREF_TYPES.RETAILERS),labelText:n,switchId:a});
return o(m["default"],{primaryText:n,actionLabel:l},e.id)});return h["default"].isEmpty(s)?null:[o(m["default"],{primaryText:"Retailers",secondaryText:"Send me deals from the following retailers:"},"retailers"),o(f["default"],{className:"u-noTopPadding u-noBottomPadding"},"retailers-group",s)]},buildExcludeShelves:function(e){var t=this,r=this.state.userPreferencesStore;return this.props.enableFeatureExcludeShelves?h["default"].map(e,function(e){var s=!h["default"].includes(r.preferences.deals.exclude_shelves,e.id),n=e.title,a="shelf-"+e.id,l=o(d["default"],{isChecked:s,changeHandler:function(r){t.toggleExcludeShelves(e.id,a,r)},isDisabled:t.isDisabled(i.DEAL_PREF_TYPES.EXCLUDE_SHELVES),labelText:n,switchId:a});return o(m["default"],{primaryText:n,secondaryText:e.blurb,actionLabel:l},e.id)}):void 0},buildDealTypes:function(e){var t=this,r=this.state.userPreferencesStore;return h["default"].map(e,function(e){var s=void 0,n=void 0,a=void 0;if(e.id===i.DEAL_TYPES.GENRE){var l=h["default"].includes(r.preferences.deals.deal_types,i.DEAL_TYPES.GENRE);s=e.title,a="dealType-"+i.DEAL_TYPES.GENRE,n=o(d["default"],{isChecked:l,changeHandler:function(e){t.toggleGenresDealType(a,e)},isDisabled:t.isDisabled(i.DEAL_TYPES.GENRE),labelText:s,switchId:a})}else if(e.id===i.DEAL_TYPES.WTR){var l=h["default"].includes(r.preferences.deals.deal_types,i.DEAL_TYPES.WTR);s=e.title,a="dealType-"+i.DEAL_TYPES.WTR,n=o(d["default"],{isChecked:l,changeHandler:function(e){t.toggleWTRDealType(a,e)},isDisabled:t.isDisabled(i.DEAL_TYPES.WTR),labelText:s,switchId:a})}else if(e.id===i.DEAL_TYPES.AUTHOR){var l=h["default"].includes(r.preferences.deals.deal_types,i.DEAL_TYPES.AUTHOR);s=e.title,a="dealType-"+i.DEAL_TYPES.AUTHOR,n=o(d["default"],{isChecked:l,changeHandler:function(e){t.toggleAuthorsDealType(a,e)},isDisabled:t.isDisabled(i.DEAL_TYPES.AUTHOR),labelText:s,switchId:a})}return o(m["default"],{primaryText:s,secondaryText:e.blurb,actionLabel:n},e.id)})},render:function(){return o("div",{className:"accountSettingsPage__section"},void 0,o(f["default"],{},void 0,this.buildDealTypes(this.props.dealsOptions.types),this.buildGenres(this.props.dealsOptions.genres),this.buildEventsSubscription(),this.buildExcludeShelves(this.props.dealsOptions.shelves),this.buildRetailers(this.props.dealsOptions.retailers)))}})},{"../../../react_actions/user/preferences/user_preferences_actions":40,"../../../react_stores/user/preferences/user_preferences_store":191,"../../gr_component_factory":91,"../../toggle_switch":146,"../mobile/menu_list_group":147,"../mobile/menu_list_item":148,lodash:"lodash",reflux:"reflux"}],150:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e};Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("../shape_icon"),d=s(u),c=e("../../modules/shape_icon_values");r["default"]=l["default"].createClass({displayName:"UserIcon",propTypes:{user:a["default"].PropTypes.shape({viewableName:a["default"].PropTypes.string.isRequired,profileImage:a["default"].PropTypes.string.isRequired,profileUrl:a["default"].PropTypes.string}).isRequired,includeLink:a["default"].PropTypes.bool,size:a["default"].PropTypes.oneOf([c.ICON_SIZES.SMALL,c.ICON_SIZES.MEDIUM,c.ICON_SIZES.LARGE])},getDefaultProps:function(){return{includeLink:!0,size:c.ICON_SIZES.SMALL}},render:function(){var e=this.props.user;return a["default"].createElement(d["default"],o({imageUrl:e.profileImage,imageAlt:e.viewableName,linkUrl:e.profileUrl,border:!0},this.props))}})},{"../../modules/shape_icon_values":18,"../gr_component_factory":91,"../shape_icon":129,react:"react"}],151:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("classnames"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("../shared/gr_prop_types"),f=s(c),p=e("../click_tracking_wrapper"),m=s(p),_=e("../../modules/ads/click_tracking_helper");r["default"]=d["default"].createClass({displayName:"UserProfileLink",propTypes:{user:f["default"].user().isRequired,className:a["default"].PropTypes.string},userName:function(){return{__html:this.props.user.viewableName}},render:function(){var e=(0,l["default"])("gr-hyperlink","gr-hyperlink--bold","gr-user__profileLink",this.props.className),t=o("a",{className:e,href:this.props.user.profileUrl,dangerouslySetInnerHTML:this.userName()});return this.props.user.profileUrl?o(m["default"],{children:t,trackingOptions:_.TRACKED_CLASSES.user_profile}):o("b",{},void 0,this.props.user.viewableName)}})},{"../../modules/ads/click_tracking_helper":3,"../click_tracking_wrapper":54,"../gr_component_factory":91,"../shared/gr_prop_types":133,classnames:"classnames",react:"react"}],152:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("../shared/gr_prop_types"),d=s(u),c=e("../shared/gr_spoiler_handler"),f=s(c),p=e("classnames"),m=s(p);r["default"]=l["default"].createClass({displayName:"ExpandableHtml",propTypes:d["default"].expandableHtml(),getInitialState:function(){return{expanded:!1}},collapse:function(){this.setState({expanded:!1})},expand:function(){this.setState({expanded:!0})},expandable:function(){return!a["default"].isEmpty(this.props.truncatedHtml)},visibleHtml:function(){return this.expandable()&&this.state.expanded!==!0?this.props.truncatedHtml:this.props.html},renderToggleButton:function(){if(!this.expandable())return null;var e=this.state.expanded?this.collapse:this.expand,t=this.state.expanded?"Less":"More",r=(0,m["default"])("gr-buttonAsLink","u-marginLeftTiny");return o("button",{className:r,onClick:e},void 0,t)},componentDidMount:function(){this.refs.rootNode&&f["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},componentDidUpdate:function(){this.refs.rootNode&&f["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},render:function(){if(a["default"].isEmpty(this.props.html))return null;var e=(0,m["default"])("expandableHtml",this.props.className);return React.createElement("div",{className:e,ref:"rootNode"},o("span",{dangerouslySetInnerHTML:{__html:this.visibleHtml()}}),this.renderToggleButton())}})},{"../gr_component_factory":91,"../shared/gr_prop_types":133,"../shared/gr_spoiler_handler":134,classnames:"classnames",lodash:"lodash"}],153:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n);r["default"]=a["default"].createClass({displayName:"HiddenHtml",propTypes:{unhideText:React.PropTypes.string},getDefaultProps:function(){return{unhideText:"unhide"}},getInitialState:function(){return{expanded:!1}},expand:function(){this.setState({expanded:!0})},renderUnhideButton:function(){return o("button",{className:"gr-buttonAsLink",onClick:this.expand},void 0,this.props.unhideText)},renderContent:function(){return this.state.expanded?this.props.children:o("span",{},void 0,this.renderUnhideButton())},render:function(){return o("div",{},void 0,this.renderContent())}})},{"../gr_component_factory":91}],154:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i);r["default"]=l["default"].createClass({displayName:"Spoiler",propTypes:{html:a["default"].PropTypes.string,spoilerWarning:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element])},componentWillMount:function(){if(null===this.props.html&&null===this.props.children)throw new Error("props.children and props.html cannot both be null")},getDefaultProps:function(){return{html:null,spoilerWarning:null}},getInitialState:function(){return{showSpoiler:!1}},onClickShowSpoiler:function(){this.setState({showSpoiler:!0})},onClickHideSpoiler:function(){this.setState({showSpoiler:!1})},getSpoilerHtml:function(){return{__html:this.props.html}},renderSpoiler:function(){return this.props.html?o("span",{className:"spoiler__text u-marginRightTiny",dangerouslySetInnerHTML:this.getSpoilerHtml()}):this.props.children},render:function(){return o("span",{},void 0,this.state.showSpoiler?o("span",{className:"spoiler__textContainer"},void 0,this.renderSpoiler(),o("button",{className:"gr-buttonAsLink",onClick:this.onClickHideSpoiler},void 0,"(hide spoiler)")):o("span",{},void 0,this.props.spoilerWarning,o("button",{className:"gr-buttonAsLink",onClick:this.onClickShowSpoiler},void 0,"(view spoiler)")))}})},{"../gr_component_factory":91,react:"react"}],155:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("../gr_component_factory"),a=s(n),i=e("../shared/gr_prop_types"),l=s(i),u=e("../shared/gr_spoiler_handler"),d=s(u),c=e("../click_tracking_wrapper"),f=s(c),p=e("../../modules/ads/click_tracking_helper");r["default"]=a["default"].createClass({displayName:"TruncatedHtml",propTypes:l["default"].truncatedHtml(),getDefaultProps:function(){return{fullContentText:"More",bookDescriptionTargetingData:p.TRACKED_CLASSES.full_content_link}},componentDidMount:function(){d["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},render:function(){var e=o("a",{className:"u-marginLeftTiny fullContentLink",href:this.props.fullContentUrl},void 0,this.props.fullContentText);return React.createElement("div",{ref:"rootNode",className:this.props.className},o("span",{dangerouslySetInnerHTML:{__html:this.props.html}}),this.props.truncated?o(f["default"],{children:e,trackingOptions:this.props.bookDescriptionTargetingData}):null)}})},{"../../modules/ads/click_tracking_helper":3,"../click_tracking_wrapper":54,"../gr_component_factory":91,"../shared/gr_prop_types":133,"../shared/gr_spoiler_handler":134}],156:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("lodash"),l=s(i),u=e("./gr_component_factory"),d=s(u),c=e("classnames"),f=s(c),p=e("../react_actions/shelvings_actions"),m=s(p),_=e("../react_stores/shelvings_store"),h=s(_),g=e("./click_tracking_wrapper"),v=s(g),y=e("../react_mixins/gr_reflux"),b=e("../modules/ads/click_tracking_helper");r["default"]=d["default"].createClass({displayName:"UserRating",mixins:[(0,y.connectToLazyStore)(h["default"],"bookId")],propTypes:{bookId:a["default"].PropTypes.string,bookTitle:a["default"].PropTypes.string,starsTrackingOptions:a["default"].PropTypes.object},getDefaultProps:function(){return{starsTrackingOptions:b.TRACKED_CLASSES.user_rating_star}},setHoverRating:function(e){this.setState({hoverRating:e})},removeHoverRating:function(){this.setState({hoverRating:null})},isShelved:function(){return null!==this.state.exclusiveShelfName},updateRating:function(e,t){t.preventDefault(),this.isShelved()?m["default"].rateBook(this.state.book.bookId,e,this.state.book.title):m["default"].rateBook(this.props.bookId,e,this.props.bookTitle),this.refs.ratingContainer.focus()},starLabel:function S(e){var S=void 0;return S=null!==this.state.exclusiveShelfName&&this.state.rating>0?"Change rating from "+this.state.rating+" to "+e+" ":"Rate "+e+" ",S+=1==e?"star":"stars"},renderStar:function(e){var t=e+1,r=null!==this.state.exclusiveShelfName?this.state.rating:0,s=this.state.hoverRating?this.state.hoverRating:r,n=(0,f["default"])({userRating__star:!0,"userRating__star--selected":s>=t}),a=o("button",{className:n,title:this.starLabel(t),onClick:this.updateRating.bind(this,t),onMouseEnter:this.setHoverRating.bind(this,t)},void 0);return o(v["default"],{children:a,trackingOptions:this.props.starsTrackingOptions},t)},renderTextLabel:function(){return o("small",{className:"userRating__label"},void 0,null!==this.state.exclusiveShelfName&&this.state.rating>0?"My rating:":"Rate it:")},render:function(){return o("div",{className:"userRating"},void 0,this.renderTextLabel(),a["default"].createElement("div",{className:"userRating__starsWrapper",tabIndex:"0",ref:"ratingContainer",role:"group",onMouseLeave:this.removeHoverRating},l["default"].times(5,function(e){return this.renderStar(e)},this)))}})},{"../modules/ads/click_tracking_helper":3,"../react_actions/shelvings_actions":38,"../react_mixins/gr_reflux":171,"../react_stores/shelvings_store":189,"./click_tracking_wrapper":54,"./gr_component_factory":91,classnames:"classnames",lodash:"lodash",react:"react"}],157:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("reflux"),d=s(u),c=e("../../react_mixins/gr_reflux"),f=e("../../modules/ads/click_tracking_helper"),p=e("classnames"),m=s(p),_=e("../../react_stores/shelvings_store"),h=s(_),g=e("../../react_stores/user_shelves_store"),v=s(g),y=e("../../react_stores/user_agent_capabilities_store"),b=s(y),S=e("../../react_actions/shelvings_actions"),T=s(S),k=e("../dropdown"),P=s(k),N=e("../want_to_read/want_to_read_menu"),w=s(N),R=e("../user_rating"),x=s(R),A="Saving…";r["default"]=l["default"].createClass({displayName:"WantToReadButton",propTypes:{bookId:a["default"].PropTypes.string.isRequired,bookTitle:a["default"].PropTypes.string.isRequired,uniqueId:a["default"].PropTypes.string.isRequired,showStars:a["default"].PropTypes.bool,showMenu:a["default"].PropTypes.bool,origin:a["default"].PropTypes.string,trackingOptions:a["default"].PropTypes.object,starsTrackingOptions:a["default"].PropTypes.object},mixins:[(0,c.connectToLazyStore)(h["default"],"bookId",{stateKey:"shelvings"}),d["default"].connect(v["default"],"userShelves"),d["default"].connect(b["default"],"userAgentCapabilities")],getDefaultProps:function(){return{showStars:!1,showMenu:!0,trackingOptions:f.TRACKED_CLASSES.want_to_read_button}},shelveBook:function(){T["default"].shelveBook(this.props.bookId,v["default"].defaultShelves().WANT_TO_READ,this.props.origin)},unshelveBook:function(){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&T["default"].unshelveBook(this.state.shelvings.book.bookId)},focusButton:function(e){e&&this.restoreFocusOnUpdate&&!this.state.isShelvingInProgress&&(this.forgetFocus(),e.focus())},rememberFocus:function(){this.restoreFocusOnUpdate=!0},forgetFocus:function(){this.restoreFocusOnUpdate=!1},checkmarkClass:function(){var e="wantToReadButton__checkIcon--",t=v["default"].defaultShelves(),r=(0,m["default"])({toRead:this.state.shelvings.exclusiveShelfName==t.WANT_TO_READ.name,currentlyReading:this.state.shelvings.exclusiveShelfName==t.CURRENTLY_READING.name,read:this.state.shelvings.exclusiveShelfName==t.READ.name,other:!this.unshelved()});return e+r},unshelved:function(){return null===this.state.shelvings.exclusiveShelfName},renderWantToReadLeftUnshelved:function(){var e=this.state.shelvings.isShelvingInProgress?A:"Want to Read",t=(0,m["default"])("wantToReadButton__leftUnshelvedButton",{"wantToReadButton__leftUnshelvedButton--noOutline":this.state.shelvings.isShelvingInProgress}),r="Add "+this.props.bookTitle+" to your want to read shelf";return a["default"].createElement("button",{"aria-label":r,ref:this.focusButton,className:t,onClick:this.shelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus},e)},renderWantToReadLeftShelved:function(){var e=(0,m["default"])("wantToReadButton__leftShelvedButton"),t=(0,m["default"])({wantToReadButton__checkIcon:!this.state.shelvings.isShelvingInProgress},this.checkmarkClass()),r="Remove "+this.state.shelvings.book.title+" from my shelves",s=this.state.shelvings.isShelvingInProgress?A:this.state.shelvings.exclusiveShelfDisplayName;return this.state.userAgentCapabilities.touch?a["default"].createElement("button",{"aria-label":r,onClick:this.unshelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus,ref:this.focusButton,className:e},o("span",{className:t+" u-inlineBlock"}),o("div",{className:"wantToReadButton__shelvedButtonText"},void 0,s)):o("span",{},void 0,a["default"].createElement("button",{"aria-label":r,ref:this.focusButton,onClick:this.unshelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus,className:e+" "+t}),o("div",{className:"wantToReadButton__shelvedButtonText"},void 0,s))},renderWantToReadRight:function(){var e=this.unshelved()?this.props.bookId:this.state.shelvings.book.bookId,t=this.unshelved()?this.props.bookTitle:this.state.shelvings.book.title;return this.props.showMenu?o(P["default"],{trigger:this.renderWantToReadRightButtonContents(),triggerEventType:P["default"].TriggerEventTypes.HOVER,bemModifiers:"wantToReadMenu"},void 0,o(w["default"],{uniqueId:this.props.uniqueId,bookId:e,bookTitle:t,userShelves:this.state.userShelves,shelvings:this.state.shelvings})):null},renderWantToReadRightButtonContents:function(){return o("div",{className:"wantToReadButton__right"},void 0,o("span",{className:"u-visuallyHidden"},void 0,"Shelving menu"))},render:function(){var e="",t=(0,m["default"])("wantToReadButton__left",{"wantToReadButton__left--standalone":!this.props.showMenu},{wantToReadButton__leftUnshelved:this.unshelved()},{wantToReadButton__leftShelved:!this.unshelved()});return e=this.unshelved()?this.renderWantToReadLeftUnshelved():this.renderWantToReadLeftShelved(),o("div",{},void 0,o("div",{className:"wantToReadButton"},void 0,o("div",{className:t},void 0,e),this.renderWantToReadRight()),this.props.showStars?o(x["default"],{bookId:this.props.bookId,starsTrackingOptions:this.props.starsTrackingOptions}):null)}})},{"../../modules/ads/click_tracking_helper":3,"../../react_actions/shelvings_actions":38,"../../react_mixins/gr_reflux":171,"../../react_stores/shelvings_store":189,"../../react_stores/user_agent_capabilities_store":192,"../../react_stores/user_shelves_store":193,"../dropdown":79,"../gr_component_factory":91,"../user_rating":156,"../want_to_read/want_to_read_menu":158,classnames:"classnames",react:"react",reflux:"reflux"}],158:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("lodash"),i=s(a),l=e("../gr_component_factory"),u=s(l),d=e("../../react_mixins/gr_reflux"),c=e("../../react_stores/want_to_read_menu_store"),f=s(c),p=e("./want_to_read_menu_filter"),m=s(p),_=e("../../react_actions/shelvings_actions"),h=s(_),g=e("./want_to_read_menu_shelf_creator"),v=s(g),y=7;r["default"]=u["default"].createClass({displayName:"WantToReadMenu",mixins:[(0,d.connectToLazyStore)(f["default"],"uniqueId")],propTypes:{bookId:React.PropTypes.string.isRequired,bookTitle:React.PropTypes.string.isRequired,uniqueId:React.PropTypes.string.isRequired,userShelves:React.PropTypes.object.isRequired,shelvings:React.PropTypes.object.isRequired},shelveBook:function(e){h["default"].shelveBook(this.props.bookId,e)},toggleNonExclusiveShelving:function(e){h["default"].toggleNonExclusiveShelving(this.props.bookId,e,!1,this.props.bookTitle)},renderFilter:function(){var e=this.props.userShelves.customExclusiveShelves.concat(this.props.userShelves.nonExclusiveShelves),t=e.length>=y;return t?n(m["default"],{bookId:this.props.bookId,uniqueId:this.props.uniqueId,shelvings:this.props.shelvings,wantToReadMenu:this.state}):void 0},renderEmptyMessage:function(){var e=this.state.displayableExclusiveShelves,t=this.state.displayableNonExclusiveShelves,r=t.concat(e).length;return 0===r?n("li",{className:"wantToReadMenu__genericItem"},void 0,"No Matching Shelves"):void 0},renderExclusiveShelves:function(){var e=this,t=this.state.displayableExclusiveShelves;return null!==this.props.shelvings.exclusiveShelfName&&(t=i["default"].reject(t,function(t){return t.name===e.props.shelvings.exclusiveShelfName})),i["default"].map(t,function(t){var r=t.displayName,s="Shelve "+e.props.bookTitle+" as "+r;return n("li",{className:"wantToReadMenu__shelfItem"},r,n("button",{className:"wantToReadMenu__exclusiveShelf","aria-label":s,onClick:function(){e.shelveBook(t)}},void 0,r))})},renderNonExclusiveShelves:function(){var e=this,t=this.state.displayableNonExclusiveShelves;return i["default"].map(t,function(t){var r=!1;null!==e.props.shelvings.exclusiveShelfName&&i["default"].includes(e.props.shelvings.nonExclusiveShelfNames,t.name)&&(r=!0);var s=t.displayName,o="Shelve "+e.props.bookTitle+" as "+s;return n("li",{className:"wantToReadMenu__shelfItem"},s,n("label",{className:"wantToReadMenu__nonExclusiveShelf"},void 0,n("input",{className:"wantToReadMenu__shelfCheckbox",checked:r,type:"checkbox",name:"shelf["+t.name+"]","aria-label":o,onChange:function(){e.toggleNonExclusiveShelving(t)}}),s))})},renderAddNewShelfButton:function(){var e=this.props.userShelves.customExclusiveShelves.concat(this.props.userShelves.nonExclusiveShelves).concat(this.props.userShelves.defaultShelves),t=i["default"].map(e,function(e){return e.name}),r=!i["default"].includes(t,this.state.shelfNameFilter);return n("li",{className:"wantToReadMenu__newShelfButtonContainer"},void 0,React.createElement(v["default"],o({shelfNameFilter:this.state.shelfNameFilter,userCanAddShelf:r,uniqueId:this.props.uniqueId,bookId:this.props.bookId,bookTitle:this.props.bookTitle},this.state)))},render:function(){return n("div",{},void 0,n("div",{className:"wantToReadMenu__scrollableContainer"},void 0,this.renderFilter(),this.renderEmptyMessage(),this.renderExclusiveShelves(),this.renderNonExclusiveShelves()),this.renderAddNewShelfButton())}})},{"../../react_actions/shelvings_actions":38,"../../react_mixins/gr_reflux":171,"../../react_stores/want_to_read_menu_store":194,"../gr_component_factory":91,"./want_to_read_menu_filter":159,"./want_to_read_menu_shelf_creator":160,lodash:"lodash"}],159:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("../../react_actions/want_to_read_menu_actions"),d=s(u);r["default"]=l["default"].createClass({displayName:"WantToReadMenuFilter",propTypes:{bookId:a["default"].PropTypes.string.isRequired,uniqueId:a["default"].PropTypes.string.isRequired,shelvings:a["default"].PropTypes.object.isRequired,wantToReadMenu:a["default"].PropTypes.object.isRequired},handleKeyPress:function(e){var t=null;null!==this.props.shelvings.exclusiveShelfName&&(t=this.props.shelvings.exclusiveShelfName),d["default"].updateShelfNameFilter(e.target.value,this.props.uniqueId,t)},render:function(){return o("form",{className:"wantToReadMenuFilter"},void 0,o("input",{className:"gr-textInput\n                               gr-textInput--small\n                               gr-textInput--fullWidth\n                               wantToReadMenuFilter--textInput",type:"text",placeholder:"Filter Shelves","aria-label":"Filter Shelf Names",value:this.props.wantToReadMenu.shelfNameFilter,onChange:this.handleKeyPress}))}})},{"../../react_actions/want_to_read_menu_actions":43,"../gr_component_factory":91,react:"react"}],160:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,o){var n=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&n)for(var i in n)void 0===r[i]&&(r[i]=n[i]);else r||(r=n||{});if(1===a)r.children=o;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=s(n),i=e("../gr_component_factory"),l=s(i),u=e("../../react_actions/want_to_read_menu_actions"),d=s(u),c=e("../../react_actions/shelvings_actions"),f=s(c),p=e("../facebook/timeline_publish_toggle"),m=s(p),_=e("lodash"),h=s(_);r["default"]=l["default"].createClass({displayName:"WantToReadMenuShelfCreator",propTypes:{userCanAddShelf:a["default"].PropTypes.bool.isRequired,shelfNameFilter:a["default"].PropTypes.string,uniqueId:a["default"].PropTypes.string.isRequired,bookId:a["default"].PropTypes.string.isRequired,bookTitle:a["default"].PropTypes.string.isRequired},getInitialState:function(){return{unsavedShelfName:""}},openAddShelfTextbox:function(){d["default"].openAddShelfTextbox(this.props.uniqueId)},checkIfCommentIsEmpty:function(e){this.setState({unsavedShelfName:e.target.value})},shelveAsNewShelfName:function(e,t){t.preventDefault(),d["default"].updateShelfNameFilter("",this.props.uniqueId),f["default"].toggleNonExclusiveShelving(this.props.bookId,{name:e},!0,this.props.bookTitle)},render:function(){var e=this;return""!==this.props.shelfNameFilter&&this.props.userCanAddShelf?o("span",{className:"wantToReadShelfCreator"},void 0,o("button",{className:"wantToReadShelfCreator__addNamedShelfButton","aria-label":"Add new "+this.props.shelfNameFilter+" shelf",onClick:function(t){e.shelveAsNewShelfName(e.props.shelfNameFilter,t)}},void 0,"Add new “",o("span",{className:"wantToReadShelfCreator__addShelfButtonShelfName"},void 0,this.props.shelfNameFilter),"” shelf")):this.props.showAddShelfTextbox?o("form",{className:"wantToReadShelfCreator",onSubmit:function(t){e.shelveAsNewShelfName(e.state.unsavedShelfName,t)}},void 0,o("input",{className:"gr-textInput\n                                  gr-textInput--small\n                                  wantToReadShelfCreator__textInput",type:"text",placeholder:"New Shelf Name","aria-label":"Add new shelf name",onChange:this.checkIfCommentIsEmpty}),o("input",{type:"submit",className:"gr-button\n                                  gr-button--small\n                                  wantToReadShelfCreator__addShelfButton",disabled:h["default"].isEmpty(h["default"].trim(this.state.unsavedShelfName)),value:"Add"})):this.props.userCanAddShelf?o("span",{className:"wantToReadShelfCreator"},void 0,o("button",{className:"wantToReadShelfCreator__showAddShelfTextboxButton","aria-label":"Add new shelf",onClick:this.openAddShelfTextbox},void 0,"Add New Shelf"),o(m["default"],{cogAction:m["default"].COG_ACTIONS.READ,bemModifiers:"wtrMenu"})):null}})},{"../../react_actions/shelvings_actions":38,"../../react_actions/want_to_read_menu_actions":43,"../facebook/timeline_publish_toggle":86,"../gr_component_factory":91,lodash:"lodash",react:"react"}],161:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.DealsStores=r.DealsComponents=void 0;var o=e("../react_components/user/preferences/user_preferences_deals"),n=s(o),a=e("../react_stores/user/preferences/user_preferences_store"),i=s(a),l=e("../react_components/deals/deals_landing_page"),u=s(l),d=e("../react_components/deals/deals_category_page"),c=s(d);r.DealsComponents={UserPreferencesDeals:n["default"],DealsLandingPage:u["default"],DealsCategoryPage:c["default"]},r.DealsStores={UserPreferencesStore:i["default"]}},{"../react_components/deals/deals_category_page":69,"../react_components/deals/deals_landing_page":71,"../react_components/user/preferences/user_preferences_deals":149,"../react_stores/user/preferences/user_preferences_store":191}],162:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ConversationsStores=r.ConversationsComponents=void 0;var o=e("../../react_stores/like_store"),n=s(o),a=e("../../react_stores/comments_store"),i=s(a),l=e("../../react_components/comment/comment_form"),u=s(l),d=e("../../react_components/comment/comments"),c=s(d),f=e("../../react_components/like/like_button"),p=s(f),m=e("../../react_components/like/like_information"),_=s(m);
r.ConversationsComponents={CommentForm:u["default"],Comments:c["default"],LikeButton:p["default"],LikeInformation:_["default"]},r.ConversationsStores={CommentsStore:i["default"],LikeStore:n["default"]}},{"../../react_components/comment/comment_form":57,"../../react_components/comment/comments":58,"../../react_components/like/like_button":112,"../../react_components/like/like_information":114,"../../react_stores/comments_store":175,"../../react_stores/like_store":184}],163:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExperimentStores=r.ExperimentComponents=void 0;var s=e("./conversations"),o=e("./old_homepage"),n=e("./review_show"),a=e("lodash");r.ExperimentComponents=(0,a.merge)({},s.ConversationsComponents,o.OldHomepageComponents,n.ReviewShowComponents),r.ExperimentStores=(0,a.merge)({},s.ConversationsStores,o.OldHomepageStores,n.ReviewShowStores)},{"./conversations":162,"./old_homepage":164,"./review_show":165,lodash:"lodash"}],164:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.OldHomepageStores=r.OldHomepageComponents=void 0;var o=e("../../react_stores/like_store"),n=s(o),a=e("../../react_stores/comments_store"),i=s(a),l=e("../../react_components/comment/comment_form"),u=s(l),d=e("../../react_components/comment/comments"),c=s(d),f=e("../../react_components/like/like_button"),p=s(f),m=e("../../react_components/like/like_information"),_=s(m),h=e("../../react_components/like/like_simple_footer"),g=s(h);r.OldHomepageComponents={CommentForm:u["default"],Comments:c["default"],LikeButton:p["default"],LikeInformation:_["default"],LikeSimpleFooter:g["default"]},r.OldHomepageStores={CommentsStore:i["default"],LikeStore:n["default"]}},{"../../react_components/comment/comment_form":57,"../../react_components/comment/comments":58,"../../react_components/like/like_button":112,"../../react_components/like/like_information":114,"../../react_components/like/like_simple_footer":115,"../../react_stores/comments_store":175,"../../react_stores/like_store":184}],165:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ReviewShowStores=r.ReviewShowComponents=void 0;var o=e("../../react_stores/like_store"),n=s(o),a=e("../../react_components/like/like_simple_footer"),i=s(a);r.ReviewShowComponents={LikeSimpleFooter:i["default"]},r.ReviewShowStores={LikeStore:n["default"]}},{"../../react_components/like/like_simple_footer":115,"../../react_stores/like_store":184}],166:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ReadingNotesComponents=void 0;var o=e("../react_components/reading_notes/reading_notes_header"),n=s(o),a=e("../react_components/reading_notes/annotated_books_landing_page"),i=s(a);r.ReadingNotesComponents={ReadingNotesHeader:n["default"],AnnotatedBooksLandingPage:i["default"]}},{"../react_components/reading_notes/annotated_books_landing_page":122,"../react_components/reading_notes/reading_notes_header":125}],167:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.HeaderComponents=r.HeaderStores=void 0;var o=e("../react_stores/favorite_genres_store"),n=s(o),a=e("../react_stores/notifications_store"),i=s(a),l=e("../react_stores/tabs_store"),u=s(l),d=e("../react_stores/current_user_store"),c=s(d),f=e("../react_stores/google_ads_store"),p=s(f),m=e("../react_components/flash_message"),_=s(m),h=e("../react_components/ads/google_banner_ad"),g=s(h),v=e("../react_components/header/header_store_connector"),y=s(v),b=e("../react_components/site_announcement/site_announcement"),S=s(b),T=e("../react_components/site_announcement/choice_site_announcement"),k=s(T),P=e("../react_components/site_announcement/welcome_announcement"),N=s(P),w=e("../react_components/group/preview_broadcast"),R=s(w),x=e("../react_components/share_dialog"),A=s(x),C=e("../react_stores/share_dialog_store"),E=s(C);r.HeaderStores={FavoriteGenresStore:n["default"],NotificationsStore:i["default"],TabsStore:u["default"],GoogleAdsStore:p["default"],CurrentUserStore:c["default"],ShareDialogStore:E["default"]},r.HeaderComponents={FlashMessage:_["default"],HeaderStoreConnector:y["default"],GoogleBannerAd:g["default"],SiteAnnouncement:S["default"],ChoiceSiteAnnouncement:k["default"],WelcomeAnnouncement:N["default"],ShareDialog:A["default"],PreviewBroadcast:R["default"]}},{"../react_components/ads/google_banner_ad":49,"../react_components/flash_message":89,"../react_components/group/preview_broadcast":93,"../react_components/header/header_store_connector":106,"../react_components/share_dialog":131,"../react_components/site_announcement/choice_site_announcement":138,"../react_components/site_announcement/site_announcement":140,"../react_components/site_announcement/welcome_announcement":141,"../react_stores/current_user_store":176,"../react_stores/favorite_genres_store":180,"../react_stores/google_ads_store":182,"../react_stores/notifications_store":186,"../react_stores/share_dialog_store":187,"../react_stores/tabs_store":190}],168:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),n=s(o),a=e("lodash"),i=s(a),l=e("classnames"),u=s(l);r["default"]={propTypes:{bemModifiers:n["default"].PropTypes.oneOfType([n["default"].PropTypes.string,n["default"].PropTypes.arrayOf(n["default"].PropTypes.string)])},withBemModifiers:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(null===t&&(t=this.props.bemModifiers),!t)return e;if(i["default"].isString(t))return e+" "+e+"--"+t;if(i["default"].isArray(t)){var r=(0,u["default"])(e,i["default"].map(t,function(t){return e+"--"+t}));return r}},withBemElement:function(e,t){return this.props.bemModifiers?i["default"].isString(this.props.bemModifiers)?e+"--"+this.props.bemModifiers+"__"+t:i["default"].isArray(this.props.bemModifiers)?(0,u["default"])(i["default"].map(this.props.bemModifiers,function(r){return e+"--"+r+"__"+t})):void 0:e+"__"+t}}},{classnames:"classnames",lodash:"lodash",react:"react"}],169:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),n=s(o),a=e("lodash"),i=s(a);r["default"]={propTypes:{deployServices:n["default"].PropTypes.arrayOf(n["default"].PropTypes.string)},isFeatureEnabled:function(e){return i["default"].indexOf(this.deployServices(),e)>=0},deployServices:function(){if(void 0===this.props.deployServices)throw"trying to access Deploy Services from component, but component does not contain deployServices prop ("+this.constructor.displayName+")";return this.props.deployServices}}},{lodash:"lodash",react:"react"}],170:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(e){return{getInitialState:function(){return this.store=e(),this.store.getInitialState()},componentWillMount:function(){this.actions=this.store.actions,this.unsubscribe=this.store.listen(this.onStoreChange)},componentWillUnmount:function(){this.unsubscribe()},onStoreChange:function(e){this.setState(e)}}}},{}],171:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],s=r.stateKey,n=void 0===s?null:s,a=r.filterValue,l=void 0===a?null:a;return{getInitialState:function(){var r=e.getInitialState(i["default"].get(this.props,t));return l&&(r=r[l]),i["default"].isNull(n)||(r=o({},n,r)),r},componentDidMount:function(){var r=this;u["default"].utils.extend(this,u["default"].ListenerMethods),this.listenTo(e,function(e){var s=e[i["default"].get(r.props,t)];l&&(s=s[l]),i["default"].isNull(n)||(s=o({},n,s)),r.setState(s)})},componentWillUnmount:u["default"].ListenerMixin.componentWillUnmount}}Object.defineProperty(r,"__esModule",{value:!0}),r.connectToLazyStore=n;var a=e("lodash"),i=s(a),l=e("reflux"),u=s(l)},{lodash:"lodash",reflux:"reflux"}],172:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=s(o),a=250;r["default"]={onEnterIntent:function(e,t){t||(t=a);try{clearTimeout(this.leaveTimeout)}catch(r){}this.hoverTimeout=n["default"].delay(e,t)},onLeaveIntent:function(e,t){t||(t=a);try{clearTimeout(this.hoverTimeout)}catch(r){}this.leaveTimeout=n["default"].delay(e,t)}}},{lodash:"lodash"}],173:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("react-dom"),n=s(o),a=e("lodash"),i=e("../modules/data_tracking/data_tracking_helper");r["default"]={componentDidMount:function(){var e=this,t=this.props.trackingOptions;t&&!function(){var r=n["default"].findDOMNode(e);r&&((0,a.each)((0,a.keys)(t),function(e){var s=t[e];(0,a.isUndefined)(s)||r.setAttribute("data-tracking-"+e,JSON.stringify(s))}),t.enableTracking===!0&&r.addEventListener("click",i.handleDataTracking))}()}}},{"../modules/data_tracking/data_tracking_helper":9,lodash:"lodash","react-dom":"react-dom"}],174:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=s(o),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/book_search_actions_factory"),c=s(d),f=function(){var e=new u["default"]({showLoadingSpinner:!1,showResultsContainer:!1,results:[],query:"",activeResult:null}),t=(0,c["default"])(),r=function(t){var r=e.get();r.results.reset(t)},s=i["default"].createStore({listenables:t,getInitialState:e.get,getState:e.get,actions:t,initializeWith:function(t){e.get().set("showLoadingSpinner",t.showLoadingSpinner).set("showResultsContainer",t.showResultsContainer).set("query",t.query).set("activeResult",t.activeResult).results.reset(t.results)},reset:function(){e.get().reset({})},setValue:function(t,r){var s=e.get();s.set(t,r)},onSelectSpecificResult:function(e){var t=n["default"].find(this.getState().results,function(t){return t.bookId===e});this.setValue("activeResult",t),this.trigger(this.getState())},onSetShowResultsContainer:function(e){this.setValue("showResultsContainer",e),this.trigger(this.getState())},onSelectNextResult:function(e){var t=this.getState().results,r=n["default"].indexOf(t,this.getState().activeResult);this.setValue("activeResult",t[(r+1)%e]),this.trigger(this.getState())},onSelectPreviousResult:function(e){var t=this.getState().results,r=this.getState().activeResult,s=n["default"].indexOf(t,r);0===s||null===r?this.setValue("activeResult",t[e-1]):this.setValue("activeResult",t[(s-1)%e]),this.trigger(this.getState())},onSearchResultsFound:function(e,t){r(t),this.setValue("query",e),this.setValue("showLoadingSpinner",!1),this.setValue("activeResult",null),this.setValue("showResultsContainer",!0),this.trigger(this.getState())},onSearch:function(e,r){this.setValue("showLoadingSpinner",!0),this.trigger(this.getState()),$j.ajax({url:r,data:{format:"json",q:e},success:function(r){t.searchResultsFound(e,r)}})}});return s};r["default"]=f},{"../react_actions/book_search_actions_factory":21,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],175:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=s(o),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../modules/gr_error_reporting"),c=s(d),f=e("../react_actions/comment_actions"),p=s(f),m=e("./shared/newsfeed_updates_mixin"),_=s(m),h={},g=new u["default"](h),v=2,y=10,b=function(){return g.get()},S=function(e){b().reset(n["default"].merge({},h,e))},T=function(e){return n["default"].has(b(),e)||b().set(e,{numComments:0,unsavedComment:"",comments:[],saveInProgress:!1,showCommentButton:!1,textareaRows:1,showPagination:!1,currentPage:1,showSeeMoreLoadingSpinner:!1}),b()[e]},k=function(e,t){T(e).set(t)};r["default"]=i["default"].createStore({listenables:p["default"],mixins:[(0,_["default"])(m.NEWSFEED_DEPENDENT_STORE_KEYS.COMMENTS)],initializeWith:function(e){S(e)},updateWith:function(e){var t=n["default"].transform(e,function(e,t,r){e[r]={numComments:t.numComments||0,unsavedComment:t.unsavedComment||"",comments:t.comments||[],showCommentButton:!1,saveInProgress:!1,textareaRows:1,deletableByCurrentUser:t.deletableByCurrentUser,blockedByCurrentUser:t.blockedByCurrentUser||!1}});b().set(t)},onTextareaFocusRequested:function(e){k(e,{textareaFocusRequested:!0}),this.notifyListeners()},onTextareaFocused:function(e){k(e,{textareaRows:v,textareaFocusRequested:!1,showCommentButton:!0}),this.notifyListeners()},onTextareaUnfocused:function(e){var t=T(e).unsavedComment;n["default"].isEmpty(n["default"].trim(t))&&k(e,{textareaRows:1}),this.notifyListeners()},onShowSeeMoreLoadingSpinner:function(e){k(e,{showSeeMoreLoadingSpinner:!0}),this.notifyListeners()},onDeleteComment:function(e,t,r){var s=this,o=T(e),a=o.numComments-1,i=n["default"].findIndex(o.comments,function(e){return e.uri===t});i>=0&&(o.set("numComments",a),o.comments.splice(i,1),o.showPagination||this.notifyListeners(),$j.post("/comment/destroy?comment_uri="+t).done(function(){o.showPagination&&(0===T(e).comments.length&&o.currentPage>1?(r.page=o.currentPage-1,p["default"].showCommentsForPage(r)):o.currentPage<Math.ceil(a/y)?(r.page=o.currentPage,p["default"].showCommentsForPage(r)):s.notifyListeners())}))},onAddNewComment:function(e){var t=this,r={body:T(e.subjectKey).unsavedComment,authorUser:e.authorUser,updatedAtMessage:"Just now"};k(e.subjectKey,{saveInProgress:!0}),this.notifyListeners(),$j.post("/comment_react.json",{type:e.subject.type,id:e.subject.id,resource_uri:e.subject.uri,comment:{body_usertext:r.body},digest_default:!0,respect_update_feed_preference:!0}).done(function(r){var s=T(e.subjectKey),o=s.numComments+1;if(s.set({unsavedComment:"",saveInProgress:!1,numComments:o,showCommentButton:!1}),s.comments.length<y){var n=r;s.comments.push({createdAt:new Date,body:n.body,deletableByCurrentUser:n.deletableByCurrentUser,blockedByCurrentUser:n.blockedByCurrentUser,authorUser:e.authorUser,updatedAtMessage:"Just now",uri:n.uri,flagForAbuseUrl:n.flagForAbuseUrl})}else e.page=Math.ceil(o/y),p["default"].showCommentsForPage(e);t.onTextareaUnfocused(e.subjectKey)}).fail(function(t){var r=null;422===t.status?r="Sorry, your comment cannot be posted because it is too long (must be under 12000 characters). Please try again.":404===t.status?r="Sorry, this post has been deleted.":(r="Sorry, your comment cannot be posted. ",t.responseJSON&&t.responseJSON.errors&&(r+=t.responseJSON.errors.join(", "))),r&&c["default"].notifyUser(r),k(e.subjectKey,{saveInProgress:!1,showCommentButton:!1}),p["default"].textareaUnfocused(e.subjectKey)})},onShowCommentsForPage:function(e){var t=this,r=e.page>0?e.page:1;$j.get("/comment_react/index.json",{type:e.subject.type,id:e.subject.id,resource_uri:e.subject.uri,page:r,per_page:y,reverse:!0}).done(function(s){k(e.subjectKey,{comments:s.comments,showPagination:!0,currentPage:r,showSeeMoreLoadingSpinner:!1}),t.notifyListeners()})},onCommentEntered:function(e,t){k(e,{unsavedComment:t}),this.notifyListeners()},getState:b,getInitialState:function(e){return n["default"].isUndefined(e)?b():T(e)},getInitialStateForKey:T,reset:function(){S({})},notifyListeners:function(){this.trigger(b())}})},{"../modules/gr_error_reporting":15,"../react_actions/comment_actions":22,"./shared/newsfeed_updates_mixin":188,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],176:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),a=s(n),i=e("reflux"),l=s(i),u=e("freezer-js"),d=s(u),c=e("../react_actions/current_user_actions"),f=s(c),p={currentUser:{}},m=new d["default"](p),_=function(){return m.get()},h=function(e){_().reset(a["default"].merge({},p,e))};r["default"]=l["default"].createStore({listenables:[f["default"]],initializeWith:function(e){a["default"].each(a["default"].keys(e),function(e){if(!a["default"].has(p,e))throw new Error("Unexpected key passed to initializeWith. Received "+e+" Expected one of "+a["default"].keys(p))}),h(e)},getState:_,getInitialState:_,onUpdatePreference:function(e,t){$j.post("/user/update_preferences",{user:o({},e,t)})},reset:function(){h({})}})},{"../react_actions/current_user_actions":23,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],177:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=s(o),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../../../modules/ajax/ajax_helper"),c=e("../../../react_actions/experimental/universal_search_actions_factory"),f=s(c),p=function(){var e=new u["default"]({showLoadingSpinner:!1,showResultsContainer:!1,results:[],query:"",activeResult:null,currentInput:null}),t=(0,f["default"])(),r=function(t){var r=e.get();r.results.reset(t)},s=300,o=i["default"].createStore({listenables:t,getInitialState:e.get,getState:e.get,actions:t,initializeWith:function(t){e.get().set({showLoadingSpinner:t.showLoadingSpinner,showResultsContainer:t.showResultsContainer,query:t.query,activeResult:t.activeResult}).results.reset(t.results)},reset:function(){e.get().reset({})},hide:function(){e.get().set({showLoadingSpinner:!1,activeResult:null,showResultsContaine:!1}),this.trigger(e.get())},search:function(r,s,o){r==e.get().currentInput?(e.get().set("showLoadingSpinner",!0),this.trigger(e.get()),(0,d.httpGet)(s,{data:{format:"json",query:r,limit:o},success:function(e){t.searchResultsFound(r,e)}})):this.hide()},delayedSearch:n["default"].debounce(function(e,t,r,s){e.search(t,r,s)},s),onSelectSpecificResult:function(t){e.get().set("activeResult",t),this.trigger(e.get())},onSetShowResultsContainer:function(t){e.get().set("showResultsContainer",t),this.trigger(e.get())},onSelectNextResult:function(t){var r=e.get().results,s=n["default"].indexOf(r,e.get().activeResult);e.get().set("activeResult",r[(s+1)%t]),this.trigger(e.get())},onSelectPreviousResult:function(t){var r=e.get().results,s=e.get().activeResult,o=n["default"].indexOf(r,s);0===o||null===s?e.get().set("activeResult",r[t-1]):e.get().set("activeResult",r[(o-1)%t]),this.trigger(e.get())},onSearchResultsFound:function(t,s){t==e.get().currentInput&&(r(s),e.get().set({query:t,showLoadingSpinner:!1,activeResult:null,showResultsContainer:!0}),this.trigger(e.get()))},onSearch:function(t,r,s){t=t.trim(),e.get().set("currentInput",t),n["default"].isEmpty(t)?this.hide():this.delayedSearch(this,t,r,s)}});return o};r["default"]=p},{"../../../modules/ajax/ajax_helper":5,"../../../react_actions/experimental/universal_search_actions_factory":26,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],178:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=s(o),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/facebook_actions"),c=s(d),f={isUserConnected:!1,cog:{},images:{}},p={STATUS:"status",READ:"read",TO_READ:"toRead",AUTO_ADD_FRIENDS:"autoAdd",LIKE:"like"},m=new u["default"](f),_=function(){return m.get()};r["default"]=i["default"].createStore({listenables:c["default"],getState:_,getInitialState:_,COG_ACTIONS:p,getCogValue:function(e){var t=_().cog;return t&&t[e]?1:0},getCogRead:function(){return this.getCogValue(p.READ)},getCogStatus:function(){return this.getCogValue(p.STATUS)},initializeWith:function(e){_().reset(e)},reset:function(){_().reset({})},updateWith:function(e){_().set({isUserConnected:e.isUserConnected,cog:e.cog,images:e.images})},onEnablePublishPermission:function(){var e=this;$grfb.ensurePublishPermission().done(function(){var t=n["default"].transform(_().cog,function(e,t,r){e[r]=!0});_().set("cog",t),e.trigger(_())})},onTogglePublishPermission:function(e){var t=this,r=_(),s=r.cog[e];s?(r.cog.set(e,!s),this.trigger(_())):$grfb.ensurePublishPermission().done(function(){r.cog.set("enabled",!0).set(e,!0),t.trigger(_())})}})},{"../react_actions/facebook_actions":27,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],179:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=s(o),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/favorite_genres_actions"),c=s(d),f=e("../react_actions/favorite_genres_form_actions"),p=s(f),m=new u["default"]({selectedGenres:[]}),_=function(){return m.get()},h=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];_().selectedGenres.reset(e)},g=i["default"].createStore({listenables:p["default"],getInitialState:_,getState:_,initializeWith:function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];h(t)},onSubmitSelectedGenres:function(){c["default"].changeFavoriteGenres(_().selectedGenres)},onSelectFavoriteGenre:function(e){n["default"].includes(_().selectedGenres,e)||(_().selectedGenres.push(e),this.notifyListeners())},onDeselectFavoriteGenre:function(e){_().selectedGenres.shift(e),this.notifyListeners()},notifyListeners:function(){this.trigger(_())},reset:function(){h()}});r["default"]=g},{"../react_actions/favorite_genres_actions":28,"../react_actions/favorite_genres_form_actions":29,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],180:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=s(o),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/favorite_genres_actions"),c=s(d),f={allGenres:[],favoriteGenres:[],sponsoredGenres:[]},p=new u["default"](f),m=function(){return p.get()},_=function(e){m().reset(n["default"].merge({},f,e))},h=function(e){return n["default"].inject(m().allGenres,function(t,r){var s=r.name;return t.favorites[s]=n["default"].includes(e,s),t},{favorites:{}})};r["default"]=i["default"].createStore({listenables:[c["default"]],initializeWith:function(e){n["default"].each(n["default"].keys(e),function(e){if(!n["default"].has(f,e))throw new Error("Unexpected key passed to initializeWith. Received "+e+". Expected one of "+n["default"].keys(f))}),_(e)},updateWith:function(e){m().set(e)},getState:m,getInitialState:m,reset:function(){_()},notifyListeners:function(){this.trigger(m())},onChangeFavoriteGenres:function(e){var t=this,r=function(){m().favoriteGenres.reset(e),t.notifyListeners()};$j.post("/user/edit_fav_genres",h(e),r)}})},{"../react_actions/favorite_genres_actions":28,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],181:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=s(o),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/featured_genres_actions"),c=s(d),f=e("../react_actions/shelvings_actions"),p=s(f),m=e("../react_stores/favorite_genres_store"),_=s(m),h=new u["default"]({}),g=function(){return h.get()},v=i["default"].createStore({listenables:c["default"],init:function(){_["default"].listen(function(){c["default"].requestFeaturedBooks()})},initializeWith:function(e){h.get().reset({featuredGenreBookInfo:e})},getInitialState:g,getState:g,onRequestFeaturedBooks:function(){var e=this;return n["default"].isEmpty(_["default"].getState().favoriteGenres)?void this.saveNewFeaturedBooks([]):void(g().requestedFeaturedBooksBefore||($j.get("/genres/featured_books").done(function(t){e.saveNewFeaturedBooks(t.genres),p["default"].addShelvings(t.shelvings)}).fail(function(e){c["default"].displayError(e)}),g().set("requestedFeaturedBooksBefore",!0)))},saveNewFeaturedBooks:function(e){g().set("featuredGenreBookInfo",e),this.notifyListeners()},onDisplayError:function(){g().set("errorMessage","Error loading featured books in genre."),this.notifyListeners()},notifyListeners:function(){this.trigger(g())},reset:function(){g().reset({})}});r["default"]=v},{"../react_actions/featured_genres_actions":30,"../react_actions/shelvings_actions":38,"../react_stores/favorite_genres_store":180,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],182:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ImpressionCode=void 0;var o=e("lodash"),n=s(o),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/data_tracking/data_tracking_actions"),c=s(d),f=e("../react_actions/google_ads_actions"),p=s(f),m=e("../react_actions/newsfeed_actions"),_=s(m),h=e("../modules/ads/google_ad_helper"),g=e("./shared/newsfeed_updates_mixin"),v=s(g),y=e("../modules/env_utils"),b=s(y),S={targeting:{},ads:{},nativeAds:{},polls:{},device_type:null},T=new u["default"](S),k=r.ImpressionCode={success:"0",dfpError:"1",monolithError:"2",empty:"3"},P=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];N().reset(n["default"].merge({},S,e))},N=function(){return T.get()},w=function(e){if(!n["default"].has(N().ads,e)){if(!n["default"].has(N().nativeAds,e)){if(!n["default"].has(N().polls,e))throw new ReferenceError("No such product existing for key "+e);return N().polls[e]}return N().nativeAds[e]}return N().ads[e]},R=function(e,t){w(e).set(t)},x=function(e){return e.path.split("/",3)[2]},A=function(e){return{ad_unit:x(e),line_item_id:e.lineItemId,ad_device_type:e.adDeviceType}},C=function(e,t,r){var s=n["default"].merge(A(t),r);$j.ajax({url:e,type:"GET",data:s})},E=function(e,t){var r=w(e);r&&!r.impressionLogged&&(C(r.pmetImpressionTrackUrl,r,{impression_output:t}),U(e))},M=function(e){C(e.pmetClickTrackUrl,e,{click_type:"click"})},L=function(e){R(e,{hasCreative:!0})},U=function(e){R(e,{impressionLogged:!0})};r["default"]=i["default"].createStore({listenables:[p["default"],{trackClickEvent:c["default"].trackClickEvent}],mixins:[(0,v["default"])(g.NEWSFEED_DEPENDENT_STORE_KEYS.NATIVE_ADS)],initializeWith:function(e){if(P(e),b["default"].hasDom()){var t=n["default"].merge({},this.getState().ads,this.getState().nativeAds);n["default"].map(n["default"].merge({},t,this.getState().polls),function(e,t){(0,h.defineSlot)(t,e.path,e.dimensions)}),(0,h.enableServices)()}},initializeWithoutDFPIntegrationWithData:function(e){P(e)},updateWith:function(e){N().set(n["default"].merge({},N(),e))},onTrackClickEvent:function(e,t){var r=e.target,s=void 0,o=void 0,a=void 0,i=void 0,l=/news/,u=JSON.parse(t.getAttribute("data-tracking-adId"));if(u=u?u:n["default"].findKey(N().nativeAds,function(e){return e.path.match(l)}))for(;r!==t;)r.getAttribute("data-tracking-dfp")&&!s&&(s=r.getAttribute("data-tracking-dfp"),a=JSON.parse(s),a&&this.trackDfpClick(u)),r.getAttribute("data-tracking-pmet")&&!o&&(o=r.getAttribute("data-tracking-pmet"),i=JSON.parse(o),this.trackPmetClick(u,i)),r=r.parentNode},mergeWith:function(e){N().set(n["default"].merge({},N(),e))},onHasRequestedCreativeForSlot:function(e){R(e,{hasRequestedCreative:!0})},onDisplayCreativeForSlot:function(e){L(e)},onRemoveAdSlot:function(e){R(e,{hasCreative:!1,hasRequestedCreative:!0,empty:!0}),this.notifyListeners()},onTrackImpression:function(e,t){E(e,t)},findAd:function(e){var t=n["default"].findKey(n["default"].merge({},N().ads,N().nativeAds),function(t){return t.path.match(e)}),r=t?N().ads[t]:null;return r=r?r:N().nativeAds[t],!r||r.hasRequestedCreative&&r.empty?null:{id:t,ad:r}},onAttachServedBannerAdAttributesAndTracking:function(e,t,r,s,o){R(e,{lineItemId:t,creative:r,impressionCode:s});var n=w(e);return r?(o||E(e,s),void n.creative.on("click","a",function(){M(n)})):void E(e,k.dfpError)},onPollAnswerChanged:function(e,t){var r=this;$j.post("/poll/homepage_vote",{answer:e,id:t.creative.pollId}).done(function(e){e.showStats=!0,R(t.id,e),r.trigger(N())}),R(t.id,{answer:Number(e)}),this.trigger(N())},onPopulateHomepagePollAndTracking:function(e,t,r,s){var o=this;return r?(R(e,{creative:r}),$j.get("/poll/index_ajax_homepage_poll/",s).done(function(t){"answer"in t&&(t.showStats=!0),R(e,t),o.trigger(N())}),void E(e,k.success)):void E(e,k.dfpError)},onAttachServedNativeAdAttributesAndTracking:function(e,t,r,s,o,n){var a=this;return R(e,{lineItemId:t,url:n}),r?void $j.ajax({type:"GET",url:"/home/index_ajax_newsfeed_ad",data:{format:"json",id:s,line_item_id:t,ad_unit:"goodr.home.news.625x210",ad_device_type:"desktop",uxo:!0}}).done(function(t){t.ok?(L(e),R(e,t),_["default"].updateNativeAdSlot(w(e).id,w(e)),a.notifyListeners(N()),E(e,o)):E(e,k.monolithError)}):void E(e,k.dfpError)},trackDfpClick:function(e){var t=w(e),r=t.url,s=n["default"].merge(A(t),{click_type:"click"}),o=encodeURIComponent("?"+$j.param(s));$j.ajax({type:"GET",url:r+t.pmetClickTrackUrl+o})},trackPmetClick:function(e,t){var r=w(e),s=n["default"].merge(A(r),t);$j.ajax({type:"GET",url:r.pmetClickTrackUrl,data:s})},getInitialState:function(e){return n["default"].isUndefined(e)?N():w(e)},getInitialStateForKey:w,getState:N,reset:P,notifyListeners:function(){this.trigger(N())}})},{"../modules/ads/google_ad_helper":4,"../modules/env_utils":13,"../react_actions/data_tracking/data_tracking_actions":24,"../react_actions/google_ads_actions":31,"../react_actions/newsfeed_actions":34,"./shared/newsfeed_updates_mixin":188,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],183:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=e("reflux"),a=s(n),i=e("freezer-js"),l=s(i),u=e("../react_actions/discussions_pane_actions"),d=s(u),c={groups:[]},f=new l["default"](c),p=function(){return f.get()},m=function(e){p().reset((0,o.merge)({},c,e))};r["default"]=a["default"].createStore({listenables:[d["default"]],getState:p,getInitialState:p,onOpenPane:function(){var e=this;$j.post("/track/track_click",{feature:"NavBarDiscussionsPaneOpenedGem"}),(0,o.isEmpty)(p().groups)&&(this.trigger(p()),$j.get("/group/navbar_discussions",{format:"json"}).done(function(t){e.updateWith(t)}).fail(function(){p().set("errorMessage","There was an error loading your groups."),e.trigger(p())}))},updateWith:function(e){e.sparse?p().set("sparse",e.sparse):(0,o.each)(e.groups,function(e){var t=e.group;p().groups.push({group:{name:t.name,iconUrl:t.iconUrl,url:t.url,lastActiveAt:t.lastActiveAt,id:t.id,allUnreadPostsUrl:t.allUnreadPostsUrl},topics:e.topics})}),this.trigger(p())},reset:function(){m({})}})},{"../react_actions/discussions_pane_actions":25,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],184:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=s(o),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/like_actions"),c=s(d),f=e("./shared/newsfeed_updates_mixin"),p=s(f),m=e("../modules/gr_error_reporting"),_=s(m),h=e("../modules/ajax/ajax_helper"),g=new u["default"]({}),v=function(){return g.get()},y=function(e){return n["default"].has(v(),e)||v().set(e,{likeCount:0,isLiked:!1,showLoadingSpinner:!1}),v()[e]},b=function(e,t,r){v()[e].set(t,r)},S=function(e,t){return v()[e][t]},T=function(e){var t=S(e,"likeCount"),r=S(e,"isLiked");b(e,"isLiked",!r),b(e,"likeCount",S(e,"isLiked")?t+1:t-1)},k=i["default"].createStore({listenables:c["default"],mixins:[(0,p["default"])(f.NEWSFEED_DEPENDENT_STORE_KEYS.LIKES)],getState:v,getInitialState:function(e){return n["default"].isUndefined(e)?v():y(e)},getInitialStateForKey:y,reset:function(){g.get().reset({})},initializeWith:function(e){n["default"].each(n["default"].keys(e),function(t){
var r=e[t];r.likedBy=r.likedBy||!1,r.likeCount=r.likeCount||0,r.showLoadingSpinner=!1,v().set(t,r)})},updateWith:function(e){this.initializeWith(e)},triggerLoadingSpinner:function(e){var t=S(e,"showLoadingSpinner");b(e,"showLoadingSpinner",!t)},onLike:function(e){var t=this;this.triggerLoadingSpinner(e),this.trigger(this.getState()),(0,h.httpPost)("/rating",{format:"json",data:{rating:{resource_type:S(e,"resourceType"),resource_id:S(e,"resourceId"),resource_uri:S(e,"resourceUri"),rating:1}}}).done(function(r){T(e),b(e,"ratingId",r.rating_id),t.trigger(v())}).fail(function(e){var t=e.responseText;t&&_["default"].notifyUser(t)}).always(function(){t.triggerLoadingSpinner(e),t.trigger(v())})},onUnLike:function(e){var t=this;this.triggerLoadingSpinner(e),this.trigger(this.getState());var r=S(e,"ratingId"),s="",o={};r?(s="/rating/"+r,o={format:"json"}):(s="/rating/",o={format:"json",resource_uri:S(e,"resourceUri")}),(0,h.httpDelete)(s,{data:o}).done(function(){T(e),t.trigger(v())}).fail(function(e){var t="Unable to unlike.";404==e.status?t+=" You may have already unliked.":e.responseText&&(t+=e.responseText),t+=" Please refresh the page and try again.",_["default"].notifyUser(t)}).always(function(){t.triggerLoadingSpinner(e),t.trigger(v())})}});r["default"]=k},{"../modules/ajax/ajax_helper":5,"../modules/gr_error_reporting":15,"../react_actions/like_actions":32,"./shared/newsfeed_updates_mixin":188,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],185:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o),a=e("freezer-js"),i=s(a),l=e("../react_actions/modal_actions"),u=s(l),d=new i["default"]({}),c=function(){return d.get()},f=n["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},onOpenModal:function(e){d.get().set("currentActiveModal",e),this.notifyListeners()},onCloseModal:function(){d.get().set("currentActiveModal",null),this.notifyListeners()},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=f},{"../react_actions/modal_actions":33,"freezer-js":"freezer-js",reflux:"reflux"}],186:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o),a=e("freezer-js"),i=s(a),l=e("../react_actions/notifications_actions"),u=s(l),d=new i["default"]({}),c=function(){return d.get()},f=n["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},updateWith:function(e){this.initializeWith(e)},onLoadNotifications:function(e){d.get().set("notifications",e),d.get().set("unreadCount",0),d.get().set("unreadCountMore",!1),this.notifyListeners()},onLoadError:function(){d.get().set("errorOccurred",!0),this.notifyListeners()},onRequestNotifications:function(){d.get().hasRequestedBefore||$j.ajax({url:"/notifications/",type:"GET",success:function(e){u["default"].loadNotifications(e)},error:function(){u["default"].loadError()}}),d.get().set("hasRequestedBefore",!0)},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=f},{"../react_actions/notifications_actions":35,"freezer-js":"freezer-js",reflux:"reflux"}],187:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o),a=e("freezer-js"),i=s(a),l=e("../react_actions/share_dialog_actions"),u=s(l),d=e("../react_actions/modal_actions"),c=(s(d),e("../modules/ajax/ajax_helper")),f=new i["default"]({}),p=function(){return f.get()},m=420;r["default"]=n["default"].createStore({listenables:[u["default"]],getState:p,getInitialState:function(){return p()},initializeWith:function(e){p().reset(e)},onUpdateSharingTextInputValue:function(e){var t=e.length>m,r=t;p().set({sharingTextInputValue:e,shareModalButtonDisabled:r,textTooLong:t}),this.trigger(p())},onSubmitShare:function(e,t){var r=this;p().set({shareModalButtonDisabled:!0}),this.trigger(p());var s={resource_id:e.resourceId,resource_type:e.resourceTypeFriendlyText,sharing_text:t};e.sharerUserId&&(s.sharer_user_id=e.sharerUserId),(0,c.httpPost)("/sharings",{format:"json",data:{sharing:s}}).done(function(){p().set({shared:!0,sharingTextInputValue:""})}).fail(function(){p().set({error:!0})}).always(function(){p().set({shareModalButtonDisabled:!1}),r.trigger(p())})},onOpenShareModal:function(e){p().set({shared:!1}),this.trigger(p());var t="OpenSharingModal_"+e;(0,c.httpPost)("/track/track_click",{data:{feature:t}})},reset:function(){p().reset({})}})},{"../modules/ajax/ajax_helper":5,"../react_actions/modal_actions":33,"../react_actions/share_dialog_actions":37,"freezer-js":"freezer-js",reflux:"reflux"}],188:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.NEWSFEED_DEPENDENT_STORE_KEYS=void 0;var o=e("../../react_actions/newsfeed_actions"),n=s(o),a=e("lodash"),i=function(e){var t={init:function(){(0,a.includes)((0,a.values)(l),e)&&this.listenTo(n["default"].newsfeedItemsLoaded,this.onNewsfeedItemsLoaded)},onNewsfeedItemsLoaded:function(t){e&&t[e]&&(this.updateWith(t[e]),this.trigger(this.getState()))}};return t};r["default"]=i;var l=r.NEWSFEED_DEPENDENT_STORE_KEYS={COMMENTS:"comments",LIKES:"likes",SHELVINGS:"shelvings",AUTHOR_FOLLOWS:"authorFollows",NATIVE_ADS:"ads"}},{"../../react_actions/newsfeed_actions":34,lodash:"lodash"}],189:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=s(o),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/shelvings_actions"),c=s(d),f=e("../react_actions/reading_session_actions"),p=s(f),m=e("../react_actions/user_shelves_actions"),_=s(m),h=e("../react_stores/facebook_store"),g=s(h),v=e("./shared/newsfeed_updates_mixin"),y=s(v),b=e("../modules/default_shelves"),S=e("../modules/book_origins"),T=new u["default"]({}),k={DEFAULT:"defaultShelves",CUSTOM_EXCLUSIVE:"customExclusiveShelves",NONEXCLUSIVE:"nonExclusiveShelves"},P=function(e){return e===b.DEFAULT_SHELVES.READ.name||e===b.DEFAULT_SHELVES.CURRENTLY_READING.name||e===b.DEFAULT_SHELVES.WANT_TO_READ.name?k.DEFAULT:k.CUSTOM_EXCLUSIVE},N=function(){return T.get()},w=function(e){return n["default"].has(N(),e)||N().set(e,{exclusiveShelfName:null,nonExclusiveShelfNames:null,exclusiveShelfDisplayName:null,isShelvingInProgress:!1}),N()[e]},R=function(e,t){w(e).set(t),n["default"].each(N(),function(r,s){r.book&&r.book.bookId===e&&w(s).set(t)})},x=function(e,t,r){R(e,{exclusiveShelfName:t.name,exclusiveShelfDisplayName:t.displayName}),"undefined"!=typeof r&&R(e,{book:r.book,updatedAt:Date.parse(r.updatedAt)}),t.name===b.DEFAULT_SHELVES.CURRENTLY_READING.name&&p["default"].refreshReadingSessions()},A=function(e,t,r){R(e,{exclusiveShelfName:null,exclusiveShelfDisplayName:null,rating:0,nonExclusiveShelfNames:null}),r&&_["default"].removeNonExclusiveShelf(t.name)},C=function(e){R(e,{rating:0})},E=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];U(e,r),R(e,{rating:t})},M=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],s=w(e),o=n["default"].clone(s.nonExclusiveShelfNames)||[];o.push(t.name),R(e,{nonExclusiveShelfNames:o}),U(e,r),_["default"].addNonExclusiveShelf(t.name)},L=function(e,t,r){var s=w(e),o=n["default"].clone(s.nonExclusiveShelfNames);o=n["default"].without(o,t.name),r&&_["default"].removeNonExclusiveShelf(t.name),R(e,{nonExclusiveShelfNames:o})},U=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=w(e);null===r.exclusiveShelfName&&x(e,b.DEFAULT_SHELVES.READ,t)},I=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=e;return t&&(r=n["default"].merge({},e,{book_origin:t})),r=n["default"].merge({},r,{v:2}),$j.post("/shelf/add_to_shelf.json",r)};r["default"]=i["default"].createStore({listenables:c["default"],mixins:[(0,y["default"])(v.NEWSFEED_DEPENDENT_STORE_KEYS.SHELVINGS)],getState:N,getInitialState:function(e){return n["default"].isUndefined(e)?N():w(e)},initializeWith:function(e){T.get().reset(e),this.notifyListeners()},reset:function(){T.get().reset({})},notifyListeners:function(){this.trigger(N())},updateWith:function(e){var t=n["default"].transform(e,function(e,t,r){return e[r].isShelvingInProgress=!1,e[r].updatedAt=Date.parse(t.updatedAt),e},e);this.getState().set(t),this.notifyListeners()},onShelveBook:function(e,t){var r=this,s=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=w(e).exclusiveShelfName;R(e,{isShelvingInProgress:!0});var n={book_id:e,name:t.name};t.name===b.DEFAULT_SHELVES.READ.name&&(s===S.BOOK_ORIGINS.UPDATE_READING_PROGRESS?n.explicit=g["default"].getCogStatus():n.explicit=g["default"].getCogRead()),this.notifyListeners(),I(n,s).done(function(r){if(x(e,t,r),r=r||{},r.shelves={},r.shelves[P(t.name)]=[t.name],c["default"].bookShelved(r),o){var n={};n[P(o)]=[o],c["default"].bookUnshelved({shelves:n})}s===S.BOOK_ORIGINS.CURRENTLY_READING_WIDGET&&p["default"].shelveBookSuccess()}).fail(function(){window.alert("There was an error adding the book to your shelf, please try again.")}).always(function(){R(e,{isShelvingInProgress:!1}),r.notifyListeners()})},onUnshelveBook:function(e){var t=this;R(e,{isShelvingInProgress:!0}),this.notifyListeners(),$j.post("/review/destroy",{id:e}).done(function(){var t={};t[P(w(e).exclusiveShelfName)]=[w(e).exclusiveShelfName],t[k.NONEXCLUSIVE]=w(e).nonExclusiveShelfNames||[],c["default"].bookUnshelved({shelves:t}),A(e)}).fail(function(){window.alert("There was an error removing the book from your shelves, please try again.")}).always(function(){R(e,{isShelvingInProgress:!1}),t.notifyListeners()})},onToggleNonExclusiveShelving:function(e,t,r,s){var o=this,a=w(e).exclusiveShelfName,i=w(e).nonExclusiveShelfNames,l=!n["default"].includes(i,t.name),u=N()[e]&&null!==w(e).exclusiveShelfName,d={book:{bookId:e,title:s}};l?(U(e,d),M(e,t,d)):L(e,t,!1),this.notifyListeners();var f={book_id:e,name:t.name,a:l?"":"remove",explicit:g["default"].getCogRead()};I(f).done(function(){var e={};l?(e[k.DEFAULT]=a?[]:[b.DEFAULT_SHELVES.READ.name],e[k.NONEXCLUSIVE]=[t.name],c["default"].bookShelved({shelves:e})):(e[k.NONEXCLUSIVE]=[t.name],c["default"].bookUnshelved({shelves:e}))}).fail(function(){window.alert("There was an error adding the book to your shelf, please try again."),u?l?L(e,t,r):M(e,t,d):A(e,t,r),o.notifyListeners()})},onRateBook:function(e,t,r){var s=this,o=0,n=!1,a={book:{bookId:e,title:r}};N()[e]&&(o=w(e).rating,n=null!==w(e).exclusiveShelfName,0===o&&c["default"].rateBook.newBook()),E(e,t,a),this.notifyListeners(),$j.post("/review/rate",{format:"json",stars_click:!0,id:e,rating:t}).fail(function(){window.alert("There was an error saving your rating, please try again."),o>0?E(e,o,a):n?(C(e),c["default"].rateBook.failed()):(A(e,null,!1),c["default"].rateBook.failed()),s.notifyListeners()})},onAddShelvings:function(e){this.updateWith(e),this.notifyListeners()}})},{"../modules/book_origins":7,"../modules/default_shelves":12,"../react_actions/reading_session_actions":36,"../react_actions/shelvings_actions":38,"../react_actions/user_shelves_actions":42,"../react_stores/facebook_store":178,"./shared/newsfeed_updates_mixin":188,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],190:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o),a=e("freezer-js"),i=s(a),l=e("../react_actions/tab_actions"),u=s(l),d=new i["default"]({}),c=function(){return d.get()},f=n["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},updateWith:function(e){c().set(e)},onSelectTab:function(e,t){d.get().set(t,e),this.notifyListeners()},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=f},{"../react_actions/tab_actions":39,"freezer-js":"freezer-js",reflux:"reflux"}],191:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.DEAL_TYPES=r.DEAL_PREF_TYPES=r.PREF_TYPES=void 0;var o=e("reflux"),n=s(o),a=e("freezer-js"),i=s(a),l=e("lodash"),u=s(l),d=e("../../../react_actions/user/preferences/user_preferences_actions"),c=s(d),f=r.PREF_TYPES={DEALS:"deals"},p=r.DEAL_PREF_TYPES={DEAL_TYPES:"deal_types",EVENTS:"subscribed_to_events_emails",GENRE_URIS:"deal_genre_uris",RETAILERS:"retailers",EXCLUDE_SHELVES:"exclude_shelves"},m="aut",_="hor",h=r.DEAL_TYPES={AUTHOR:m+_,GENRE:"genre",WTR:"wtr"},g={preferences:{deals:{}},status:{deals:{waiting:[],disabledPreferences:[]}}},v=new i["default"](g),y=function(){return v.get()};r["default"]=n["default"].createStore({listenables:[c["default"]],updateDealsDisabledPreferences:function(){var e=y().preferences.deals,t=u["default"].merge({},y().status),r=u["default"].merge({},t.deals);r.disabledPreferences=[],u["default"].isEmpty(e.deal_types)?(r.disabledPreferences.push(p.RETAILERS),r.disabledPreferences.push(p.GENRE_URIS),r.disabledPreferences.push(p.EXCLUDE_SHELVES)):u["default"].includes(e.deal_types,h.GENRE)||r.disabledPreferences.push(p.GENRE_URIS),t.deals=r,y().set({status:t})},initialize:function(e){y().set({preferences:e}),this.updateDealsDisabledPreferences()},updateDealsWaitingStatus:function(e,t){var r=u["default"].merge({},y().status),s=u["default"].merge({},r.deals);t?u["default"].contains(s.waiting,e)||s.waiting.push(e):u["default"].pull(s.waiting,e),r.deals=s,y().set({status:r})},updateDealsPreferences:function(e){var t=u["default"].merge({},y().preferences);t[f.DEALS]=e,this.getState().set({preferences:t}),this.updateDealsDisabledPreferences()},handleUpdateDealsPreferencesFailure:function(){var e=this;$j.get("/user/edit",{format:"json",contentType:"application/json"}).done(function(t){e.updateDealsPreferences(t)}),window.alert("There was an error updating your preferences. Please try again later.")},postDealsPreferences:function(e,t){var r=this;this.updateDealsWaitingStatus(t,!0),this.trigger(this.getState()),$j.post("/user/update?tab=Deals&format=json",{format:"json",contentType:"application/json",d_type_preferences:e.deal_types,d_retailer_preferences:e.retailers,d_genre_uri_preferences:e.deal_genre_uris,d_exclude_shelves_preferences:e.exclude_shelves,d_subscribed_to_events_emails:e.subscribed_to_events_emails}).done(function(e){r.updateDealsPreferences(e,t)}).fail(function(){r.handleUpdateDealsPreferencesFailure()}).always(function(){r.updateDealsWaitingStatus(t,!1),r.trigger(r.getState())})},onUpdatePreferences:function(e,t,r){u["default"].isEmpty(e)||u["default"].isEmpty(t)||t===f.DEALS&&(this.updateDealsPreferences(e),this.postDealsPreferences(e,r))},getInitialState:y,getState:y,reset:function(){v.get().reset(g)}})},{"../../../react_actions/user/preferences/user_preferences_actions":40,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],192:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),n=s(o),a=e("freezer-js"),i=s(a),l=e("../react_actions/user_agent_capabilities_actions"),u=s(l),d={touch:!1},c=new i["default"](d);r["default"]=n["default"].createStore({listenables:[u["default"]],initializeWith:function(e){c.get().reset(e)},reset:function(){c.get().reset(d)},getInitialState:function(){return c.get()},onUserAgentGainsTouch:function(){c.get().set("touch",!0),this.trigger(c.get())},onUserAgentLosesTouch:function(){c.get().set("touch",!1),this.trigger(c.get())}})},{"../react_actions/user_agent_capabilities_actions":41,"freezer-js":"freezer-js",reflux:"reflux"}],193:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=s(o),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/shelvings_actions"),c=s(d),f=e("../react_actions/user_shelves_actions"),p=s(f),m=e("../react_actions/want_to_read_menu_actions"),_=s(m),h=e("../modules/default_shelves"),g={defaultShelves:[],customExclusiveShelves:[],nonExclusiveShelves:[]},v=new u["default"](g),y=function(){return v.get()},b=function(e,t,r){var s=n["default"].find(y()[t],{name:e});s&&s.set("bookCount",s.bookCount+r)};r["default"]=i["default"].createStore({listenables:[p["default"],{bookShelved:c["default"].bookShelved,bookUnshelved:c["default"].bookUnshelved}],getInitialState:v.get,getState:y,defaultShelves:function(){var e=y().defaultShelves;return 0===e.length?h.DEFAULT_SHELVES:{READ:n["default"].find(e,"name","read"),CURRENTLY_READING:n["default"].find(e,"name","currently-reading"),WANT_TO_READ:n["default"].find(e,"name","to-read")}},initializeWith:function(e){v.get().reset(e)},reset:function(){v.get().reset(g)},updateWith:function(e){v.get().reset(e)},onAddNonExclusiveShelf:function(e){var t=n["default"].clone(v.get().nonExclusiveShelves)||[],r=n["default"].map(t,function(e){return e.name});n["default"].includes(r,e)||(t.unshift({name:e,url:"",displayName:e,bookCount:0}),v.get().set("nonExclusiveShelves",t),_["default"].updateShelves(),this.trigger(y()))},onRemoveNonExclusiveShelf:function(e){var t=n["default"].clone(v.get().nonExclusiveShelves)||[],r=n["default"].map(t,function(e){return e.name});n["default"].includes(r,e)&&(n["default"].remove(t,function(t){return t.name===e}),v.get().set("nonExclusiveShelves",t),_["default"].updateShelves(),this.trigger(y()))},onBookShelved:function(e){var t=e.shelves||{};n["default"].each(t,function(e,t){n["default"].each(e,function(e){b(e,t,1)})}),this.trigger(y())},onBookUnshelved:function(e){var t=e.shelves||{};n["default"].each(t,function(e,t){n["default"].each(e,function(e){b(e,t,-1)})}),this.trigger(y())}})},{"../modules/default_shelves":12,"../react_actions/shelvings_actions":38,"../react_actions/user_shelves_actions":42,"../react_actions/want_to_read_menu_actions":43,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],194:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),n=s(o),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/want_to_read_menu_actions"),c=s(d),f=e("./user_shelves_store"),p=s(f),m={},_=new u["default"](m),h=function(){return _.get()},g=function(e,t){var r=[],s=t.defaultShelves.concat(t.customExclusiveShelves||[]);return r=n["default"].isEmpty(e)?s:n["default"].filter(s,function(t){return t.name.match(new RegExp(e,"i"))})},v=function(e,t){var r=[];return r=n["default"].isEmpty(e)?t.nonExclusiveShelves:n["default"].filter(t.nonExclusiveShelves,function(t){return t.name.match(new RegExp(e,"i"))})},y=function(e){var t=p["default"].getState(),r=g(e,t),s=v(e,t);return{displayableExclusiveShelves:r,displayableNonExclusiveShelves:s,shelfNameFilter:e}},b=function(e,t){h().set(t,y(e))},S=function(e){var t=h()[e].shelfNameFilter;h().set(e,y(t))},T=function(e){return n["default"].has(h(),e)||b("",e),h()[e]},k=function(e){h().reset(n["default"].merge({},m,e))};r["default"]=i["default"].createStore({listenables:[c["default"]],getInitialState:function(e){return n["default"].isUndefined(e)?h():T(e)},getState:h,initializeWith:function(e){k(e)},reset:function(){k(m)},updateWith:function(e){n["default"].each(n["default"].keys(e),function(t){h().set(t,e[t])}),this.notifyListeners()},notifyListeners:function(){this.trigger(h())},onUpdateShelfNameFilter:function(e,t){b(e,t),T(t).set("showAddShelfTextbox",!1),this.notifyListeners()},onOpenAddShelfTextbox:function(e){T(e).set("showAddShelfTextbox",!0),this.notifyListeners()},onUpdateShelves:function(){n["default"].each(n["default"].keys(h()),function(e){S(e)}),this.notifyListeners()}})},{"../react_actions/want_to_read_menu_actions":43,"./user_shelves_store":193,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}]},{},[48]);
//# sourceMappingURL=../react_client_side/site_header-9a6ad9a183.js.map